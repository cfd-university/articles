<!-- wp:paragraph -->
<p>In this article, we will be looking at package managers for C++ and how we can use them to compile and install libraries with as little as a single command line input. Specifically, we look at Conan, an open-source package manager for C/C++ which is gaining a lot of momentum in C++ circles. We'll look at the difficulties a package manager for compiled languages has to overcome and present a few alternatives to Conan and how they overcome these. Ultimately, though, we'll see that Conan is the only viable option and we should learn at least the basics so that we can use it if we want or need to.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Compiling libraries yourself takes time, is frustrating and often error-prone. Offloading this task to a package manager means you get to write more code yourself. You may realise that dependency management becomes very easy; so much so, that you start using more and more dependencies.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>By the end of the article, you will have an understanding of why managing libraries in C++ is difficult, compared to other (interpreted) languages such as Python and javascript. We'll walk through the basic steps of using Conan to compile and install dependencies for us and how to integrate Conan into a simple starter project, from which you can grow your own code.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading">In this series</h2>
<!-- /wp:heading -->

<!-- wp:shortcode -->
[custom_category_posts_list category_slug="how-to-compile-write-and-use-cfd-libraries-in-c"]
<!-- /wp:shortcode -->

<!-- wp:heading -->
<h2 class="wp-block-heading">In this article</h2>
<!-- /wp:heading -->

<!-- wp:aioseo/table-of-contents {"headings":[{"id":7,"blockClientId":"c7224c08-5399-407f-93b0-f372793f0c3f","content":"Why C++ package managers are difficult to maintain","level":2,"anchor":"aioseo-whats-so-special-about-c","order":0,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":12,"blockClientId":"39731e15-6c3d-4bd7-9cb0-ebcc608c6ee7","content":"ABI compatibility","level":3,"anchor":"aioseo-abi-compatibility","order":1,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":14,"blockClientId":"7f4fb4de-a438-4228-af27-5cbe499ed0cd","content":"Difference in the hardware","level":4,"anchor":"aioseo-difference-in-the-hardware","order":2,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":21,"blockClientId":"f9824038-89b4-4c31-b743-d5c90383677c","content":"Differences in the operating system","level":4,"anchor":"aioseo-differences-in-the-operating-system","order":3,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]}]},{"id":31,"blockClientId":"668c65f8-fa8f-449c-898c-3f6041c6b23e","content":"An overview of available package managers for C++","level":2,"anchor":"aioseo-an-overview-of-available-package-managers","order":4,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":33,"blockClientId":"717083a4-6dbd-4520-b71a-82b78cead151","content":"Conan","level":3,"anchor":"aioseo-conan","order":5,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":42,"blockClientId":"f8634984-a13a-47f3-8e7f-bf5701280d29","content":"vcpkg","level":3,"anchor":"aioseo-vckpg","order":6,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":49,"blockClientId":"1848b00d-7cbb-4b6c-aae0-ea8e70a10a51","content":"Hunter","level":3,"anchor":"aioseo-hunter","order":7,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":54,"blockClientId":"4be50a4f-eb29-4dfd-848c-59ae746d0768","content":"EasyBuild + Lmod","level":3,"anchor":"aioseo-easybuild","order":8,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":59,"blockClientId":"1269c744-8bab-4f9a-9f4e-a5ec07ff9fcd","content":"Case study: Using a package manager to consume the CGNS library","level":2,"anchor":"aioseo-using-a-package-manager","order":9,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":68,"blockClientId":"12173ad1-2acc-42cc-9a97-8ecbce1ab6fd","content":"Conan","level":3,"anchor":"aioseo-c","order":10,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":96,"blockClientId":"dfce9c7b-f75d-4791-964d-49559d5ebba4","content":"vcpkg (no thank you)","level":3,"anchor":"aioseo-vckpg-2","order":11,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":120,"blockClientId":"ae973f2f-77e0-4988-b838-00df96556e1e","content":"Summary","level":2,"anchor":"aioseo-summary","order":12,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]} -->
<div class="wp-block-aioseo-table-of-contents"><ul><li><a href="#aioseo-whats-so-special-about-c">Why C++ package managers are difficult to maintain</a><ul><li><a href="#aioseo-abi-compatibility">ABI compatibility</a><ul><li><a href="#aioseo-difference-in-the-hardware">Difference in the hardware</a></li><li><a href="#aioseo-differences-in-the-operating-system">Differences in the operating system</a></li></ul></li></ul></li><li><a href="#aioseo-an-overview-of-available-package-managers">An overview of available package managers for C++</a><ul><li><a href="#aioseo-conan">Conan</a></li><li><a href="#aioseo-vckpg">vcpkg</a></li><li><a href="#aioseo-hunter">Hunter</a></li><li><a href="#aioseo-easybuild">EasyBuild + Lmod</a></li></ul></li><li><a href="#aioseo-using-a-package-manager">Case study: Using a package manager to consume the CGNS library</a><ul><li><a href="#aioseo-c">Conan</a></li><li><a href="#aioseo-vckpg-2">vcpkg (no thank you)</a></li></ul></li><li><a href="#aioseo-summary">Summary</a></li></ul></div>
<!-- /wp:aioseo/table-of-contents -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-whats-so-special-about-c">Why C++ package managers are difficult to maintain</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>If you come from a different programming language, you will probably already be familiar with the concept of a package manager. We have pip and conda for Python, npm and yarn for javascript, maven and gradle for java, pkg for julia, pub for dart, and luarocks for lua. There are plenty more examples, but you get the idea. A programming language these days typically comes with its own package manager.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>What is a package manager then? Its primary goal is to bring in dependencies (or libraries as we have been mostly calling them, but these terms are used interchangeably), i.e. code that other people have written for us to use. It handles the downloading of the code from some remote repository (all these package managers have their own online repository), configuration if required, and exposing the library to our code, so we can use it straight away.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>So why does C++, then, not come with a package manager by default? Well, because everything in C++ tends to be a bit more complicated than it needs to be (or so it seems, there are good reasons to endure this complexity). C++ has a few available package managers, but these are developed by third parties and there is always a risk that these projects will not be maintained in the future. However, they seem to have some series commitment behind them, for the moment, and so it is worth exploring these in our quest to make dependency management as painless as possible.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Let's look at the main issue, in my view, why C++ package managers have a difficult job: ABI compatibility.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-abi-compatibility">ABI compatibility</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>We looked at <a href="https://cfd.university/learn/what-every-cfd-developer-needs-to-know-about-c/understanding-memory-management-in-c" target="_blank" rel="noopener" title="">memory management</a> a while back, and some terms we introduced there may be useful in the current discussion. If you need a refresher, have a look at the article and then continue here.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-difference-in-the-hardware">Difference in the hardware</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Most will be familiar with the term API. It is used quite frequently in programming circles and stands for Application Programming Interface. Even if you have not come across this term, you will have implemented an API if you followed along in this series. The API is nothing else than the name of the functions and their arguments that our library exposes. For example, our <a href="https://cfd.university/learn/how-to-compiler-write-and-use-cfd-libraries-in-c/how-to-write-a-cfd-library-the-vector-class" target="_blank" rel="noopener" title="">Vector</a> class defined functions such as <code>unsigned size() const;</code>, <code>unsigned size() const;</code>, <code>double operator*(const Vector &amp;other);</code>, etc. The collection of all of these function names and their argument forms the API. It is what other people have to call to use our library.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>ABI stands for the Application Binary Interface and is how your API looks in compiled form. The API is for us humans, the ABI is for the compilers and computers. So what is ABI compatibility then? When we compile our code into object files and then ultimately into a binary file (executable), the compiler translates what we want to achieve in code to what our computer can do on the hardware. So we can see our compiler as a translator of sorts.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If we want to stick with the analogy that our compiler is a translator, then the code we write is a document in one language (say, English) and the compiled executable for a specific platform is the translated document (say French on Windows (why not!) and Spanish for macOS). If I take my executable from Windows (a French document) and try to execute that on macOS (i.e. giving my French document to a person who only understands Spanish), it'll fail to execute. This is ABI in action.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>So what is the cause here then? First of all, there can be hardware differences. We still live in an age where 32-bit processors are around, but on PCs, we all should have a 64-bit CPU by now. There are some differences between these two architectures, for example, the 32-bit processor only has access to [katex]2^{32}[/katex] memory locations, while a 64-bit process has an available address space of [katex]2^{64}[/katex]. Our compiler will take that into account and order memory access differently on these two architectures. This is where the first incompatibility comes in.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Another difference between 32-bit and 64-bit is the increased number and size of registers on the 64-bit. We discussed the memory hierarchy and how <a href="https://cfd.university/learn/what-every-cfd-developer-needs-to-know-about-c/understanding-memory-management-in-c" target="_blank" rel="noopener" title="">memory is brought into the CPU</a> from the RAM through the L-level caches, all the way to the registers. If our registers change, then the compiler will prepare different memory-loading instructions. Even worse, if we try to run a 64-bit compiled executable on a 32-bit machine, we are potentially expecting to make use of registers that don't exist! Consequently, we won't be able to run the 64-bit executable.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>When we discussed <a href="https://cfd.university/learn/what-every-cfd-developer-needs-to-know-about-c/why-you-should-use-c-for-cfd-development" target="_blank" rel="noopener" title="">why we want to use C++</a> in the first place, one of the arguments we had was that C++ is capable of being compiled. Using a compiler allows us to make use of its capabilities to optimise our code for speed, and so the compiler will rewrite some of our functions, potentially. Just turning on optimisation may introduce additional incompatibilities if the compiler decides to optimise the code in a way that is only applicable to one of these architectures.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-differences-in-the-operating-system">Differences in the operating system</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The hardware is only one piece in the ABI incompatibility, but the operating system plays a crucial role here as well. It boils down to convention. An operating system will call functions potentially in a different way, or expect arguments to a function to come in a specific order, and all of that is forcing the compiler to produce a binary that is specific to a given operating system.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>An important concept to understand here is name mangling. Name mangling is what your compiler does to your function names. If you call your C++ function <code>solve()</code>, there is no guarantee that the compiler will actually keep that name. In-fact, in C++ your compiler will pretty much always change that name to something it wants, which may not make much sense to us. It has to do that because C++ supports <a href="https://cfd.university/learn/what-every-cfd-developer-needs-to-know-about-c/enhance-readability-with-operator-overloading-in-c" target="_blank" rel="noopener" title="">operator overloading</a>, i.e. reusing the name of a function with different arguments. The compiler needs to differentiate between your different functions, so it will assign different names for it. Let's look at an example code:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"\nclass Math {\npublic:\n  Math() = default;\n  double add(double a, double b) { return a + b; }\n  int add(int a, int b) { return a + b; }\n};\n\nvoid solve() {\n  Math math;\n  math.add(1, 2);\n  math.add(1.0, 2.0);\n}\n\nint main() {\n  solve();\n  return 0;\n}","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eclass\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eMath\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003epublic:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eMath\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() = \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edefault\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eadd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eb\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) { \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e a + b; }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eint\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eadd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eint\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eint\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eb\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) { \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e a + b; }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003evoid\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003esolve\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  Math math;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003emath\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eadd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003emath\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eadd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e2.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eint\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003emain\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003esolve\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":18,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="
class Math {
public:
  Math() = default;
  double add(double a, double b) { return a + b; }
  int add(int a, int b) { return a + b; }
};

void solve() {
  Math math;
  math.add(1, 2);
  math.add(1.0, 2.0);
}

int main() {
  solve();
  return 0;
}" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color: #569CD6">class</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">Math</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #569CD6">public:</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">Math</span><span style="color: #D4D4D4">() = </span><span style="color: #569CD6">default</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">add</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">a</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">b</span><span style="color: #D4D4D4">) { </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> a + b; }</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">int</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">add</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">int</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">a</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">int</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">b</span><span style="color: #D4D4D4">) { </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> a + b; }</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">void</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">solve</span><span style="color: #D4D4D4">() {</span></span>
<span class="line"><span style="color: #D4D4D4">  Math math;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">math</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">add</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">2</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">math</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">add</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">2.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">int</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">main</span><span style="color: #D4D4D4">() {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">solve</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> </span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>It doesn't do anything useful, but it exposes a few functions for us. Assuming this file was saved as <code>main.cpp</code>, we can compile an object file of this file on UNIX with <code>g++ -c main.cpp</code> (producing a <code>main.o</code>) or <code>cl /nologo /EHsc /c main.cpp</code> on Windows (producing a <code>main.obj</code> file).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>On UNIX, we can then proceed with a tool called <code>nm</code>, which prints out all symbols (that is, the names of the functions in our case) in a file. Calling that on our object file, i.e. <code>nm main.o</code>,  we see now function names such as <code>_Z5solvev</code>, <code>_ZN4Math3addEii</code> and <code>_ZN4Math3addEdd</code> (these may be different for you). We can see the function names still present, e.g. <code>solve</code> and the class <code>Math</code> + its function <code>add</code>, but it has additional identifiers. For example, the last two digits <code>ii</code> or <code>dd</code> indicate that two <code>int</code>egers or <code>double</code>s are passed as arguments. In this way, we have two separate function names and the compierl can differentiate between the two.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We can use <code>nm</code> on Windows as well assuming it is installed (I got it when installing Perl). Using it as <code>nm main.obj</code> provides us with mangled names such as <code>?solve@@YAXXZ</code>, <code>?add@Math@@QAEHHH@Z</code>, and <code>?add@Math@@QAENNN@Z</code>. So, you see, if I compile my code on UNIX, it creates an object file where my  <code>solve()</code> function has now been renamed by the compiler as <code>_Z5solvev</code>. If I then try to execute it on Windows, the runtime may be looking for a function called <code>?solve@@YAXXZ</code> instead and this wouldn't find anything. So this doesn't work and simply using a different operating system breaks the ABI as well as we can see.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The following talk goes much more into details of what issues arise for compiled libraries and why package managers for C++ are more difficult to maintain. It is a somewhat longer talk but does give a pretty good overview.</p>
<!-- /wp:paragraph -->

<!-- wp:embed {"url":"https://youtu.be/rrcngYMAJ-w?si=TUCjrUAVqeRvnqD6","type":"video","providerNameSlug":"youtube","responsive":true,"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->
<figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper">
https://youtu.be/rrcngYMAJ-w?si=TUCjrUAVqeRvnqD6
</div></figure>
<!-- /wp:embed -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-an-overview-of-available-package-managers">An overview of available package managers for C++</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>As alluded to above, we have a few options when it comes to handling dependencies automatically. I want to look at three of them and give a brief overview of their design philosophies and why I would or wouldn't recommend using them. C++ package managers do not just have to provide a platform to exchange and download code from, but they also have to ensure ABI compatibility. I'll discuss how they achieve that below.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-conan">Conan</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p><a href="https://conan.io/" target="_blank" rel="noopener" title="">Conan</a> is a free and open-source package manager for C/C++, despite being developed by JFrog, a company specialising in software delivery.  It is written in Python and thus the easiest way to obtain Conan is actually to use Python's package manager pip (using the command <code>pip install conan</code>, you may need to <a href="https://pip.pypa.io/en/stable/installation/" target="_blank" rel="noopener" title="">install pip</a> first). It has a <a href="https://docs.conan.io/2/" target="_blank" rel="noopener" title="">decent documentation</a>, although I wished some features were better covered sometimes. They may update the documentation over time though.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Conan's philosophy is that you provide a file called <code>conanfile.txt</code> or <code>conanfile.py</code>, of which the <code>*.txt</code> version is much simpler (the <code>*.py</code> file allows you to create some more advanced configurations). This file contains the libraries that you want to install, any options you want to set (i.e. do you want to use a static or dynamic version of the library) and a generator. The generator specifies how you want to consume the output from Conan, i.e. how you want to integrate that into your build system. Typically, we would use a CMake project, as this covers both Windows and UNIX, but other options, such as Make, Meson, MSBuild, etc. are available.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>In order to check which libraries are available through Conan, you can browse <a href="https://conan.io/center" target="_blank" rel="noopener" title="">conan center</a>, which is the remote server that stores all libraries. It is possible to also create your own remote server to host your own, private libraries if that is what you want and is a solution that may appeal to companies with in-house proprietary libraries that they don't want to release to the public.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>How does Conan then handle the ABI issues discussed above? Well, the easiest solution is that someone has already compiled and built the library for the target platform you are operating on, with the same processor architecture (32-bit vs. 64-bit) and in the same build type (Debug or Release). If that library already exists in compiled form (binary form), then Conan will simply download the library from its server and that's all, you don't have to compile anything yourself. But if it doesn't exist, then Conan has enough information available to compile and build the library on your machine. After it has been compiled, it will be stored on your PC so if you need the library again in the future, it will be copied from here and not compiled again.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>You interact with Conan through the command line, i.e. if you simply type <code>conan</code>, it will return a list of possible commands. The most important command is <code>conan install</code>, which will look at your <code>conanfile.txt</code> or <code>conanfile.py</code> and then install the libraries listed in this file (i.e. go to <a href="https://conan.io/center" target="_blank" rel="noopener" title="">conan center</a>, download either the binaries or a so-called recipe and then build the library from that recipe). It will output textfiles that can be integrated into your build system, which is steered by the generators specified in the conanfile. </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>I personally find Conan quite pleasant to use, it is intuitive and doesn't take a lot to learn. It may be a bit more complicated to write your own recipes, but that is only really required if you are writing your own library and want others to be able to consume it through Conan. And, if you have a particularly useful library developed, you might not even have to write that recipe yourself, someone else may beat you to it and provide one for you.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We will look into the most common use case of Conan in the next section, but if you want to get a better overview of the matter, I'd recommend this talk which provides you with some more background and how to use Conan but also what changed when Conan 2.0 was introduced (and there were a few changes)</p>
<!-- /wp:paragraph -->

<!-- wp:embed {"url":"https://www.youtube.com/watch?v=NM-xp3tob2Q","type":"video","providerNameSlug":"youtube","responsive":true,"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio","style":{"spacing":{"margin":{"right":"0","left":"0","top":"0","bottom":"0"}}}} -->
<figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio" style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0"><div class="wp-block-embed__wrapper">
https://www.youtube.com/watch?v=NM-xp3tob2Q
</div></figure>
<!-- /wp:embed -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-vckpg">vcpkg</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Who came up with that name? Seriously? I can never remember in which order the letters should be and they don't seem to abbreviate anything, or at least not to anything that is openly shared on their website (I get that the pkg part probably means package, but vc? Anyone?). Oh wait, what are you saying? Microsoft is developing <a href="https://vcpkg.io/en/" target="_blank" rel="noopener" title="">vcpkg</a>? The same people <a href="https://cfd.university/learn/how-to-compiler-write-and-use-cfd-libraries-in-c/how-to-write-a-cfd-library-compiling-and-testing" target="_blank" rel="noopener" title="">who introduced non-standard C++ statements</a> for dynamic libraries that only work on Windows? So the same people who can't build libraries the way everyone else is (without having to hack C++) are developing a tool to manage and handle our libraries? Well, I think the name is perfect, actually! And surely this tool will provide a smooth journey when dealing with dependencies (if you don't get sarcasm, read on, it gets much worse, the name is not the only issue ...).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Microsoft developing a package manager is, to me, the same as employing a blind bus driver or using Facebook as a cloud storage for sensitive data. Would you get on board the bus? Would you store your PIN and card details on Facebook? Having said all that, cvpgkf (or whatever it was called) seems to be a pretty decent tool, it just comes with a lot of baggage (for me, anyway). If you are a Microsoft fanboy or fangirl, then this tool may be for you.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>vkpibg is entirely stored on GitHub, and since we don't have write access to someone else's repository, we can't compile and build binaries and then upload them to GitHub. So, instead, vpghlk will always compile and build libraries on your PC when you want to use them for the first time and then cache them so that they become available the next time you want to use them again. So you always compile and build from source, which is a pretty good idea. This is different to Conan, where we first check if compiled versions are already available. </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Otherwise, working with vp0kfc feels very similar to Conan. It is a Python package as well but unlike Conan, you have to clone their repository from GitHub and run a configuration file before you can use it. After this is done, you type <code>vcpkg &lt;command&gt;</code>, just like in Conan, for example, <code>vcpkg install</code> which will then install all dependencies listed in a file called <code>vcpkg.json</code>. The <code>vcpkg.json</code> file is equivalent to <code>conanfile.txt</code> and will list all the dependencies/libraries you wish to install.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>There is a much more in-depth talk that shows how to use this tool which you may want to check out if you want to get a better overview of what this tool can do for you.</p>
<!-- /wp:paragraph -->

<!-- wp:embed {"url":"https://www.youtube.com/watch?v=3vXOKkv3ND0","type":"video","providerNameSlug":"youtube","responsive":true,"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->
<figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper">
https://www.youtube.com/watch?v=3vXOKkv3ND0
</div></figure>
<!-- /wp:embed -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-hunter">Hunter</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The <a href="https://hunter.readthedocs.io/en/latest/" target="_blank" rel="noopener" title="">Hunter package manager</a> is somewhat different to Conan and vipkl. It is essentially an extension to CMake, instead of a standalone package manager in its own right. After providing a few configuration steps within our <code>CMakeLists.txt</code> file, we can use it by simply declaring the libraries we want to use and it will then resolve them at configuration time within CMake.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>In its own right, I like the approach of defining all dependencies within your CMake file. However, in software engineering, we talk about the <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle" target="_blank" rel="noopener" title="">single responsibility principle</a>, which states that any one module should only do one thing. Typically it is applied to <a href="https://cfd.university/learn/what-every-cfd-developer-needs-to-know-about-c/object-orientated-programming-in-cfd" target="_blank" rel="noopener" title="">classes</a>, where each class should only do one thing (e.g. read a mesh, another class would then process the mesh (setting up data structures), yet another would calculate mesh quality metrics (one quality metric per class), etc. You would not have a single massive class called <code>Mesh</code> doing all of that at the same time).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The single responsibility principle in this case can be understood to mean that CMake should look after compiling your code, not dealing with dependencies (in the sense of checking if they are available and if not, find them). Just because it can, doesn't mean it should. Opinions on this vary. On a side note: CMake already provides support for this with <a href="https://cmake.org/cmake/help/latest/module/ExternalProject.html#module:ExternalProject" target="_blank" rel="noopener" title="">ExternalProject</a> and <a href="https://cmake.org/cmake/help/latest/module/FetchContent.html" target="_blank" rel="noopener" title="">FetchContent</a> so you can achieve the same without having to use Hunter. The appeal of using Hunter, though, is that you can achieve dependency management by writing fewer lines of build instructions. </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The reason I am not advocating using Hunter is that it is CMake specific, it is developed by a relatively small group of people, though development seems to be active and ongoing, and as of the day of writing, Hunter is still in version <code>0.x</code>, meaning we still don't have a stable version. But if you feel generous and want to support a bunch of motivated people to write a package manager when there are good alternatives available, backed with massive financial support, then go for it.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-easybuild">EasyBuild + Lmod</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>I want to love <a href="https://easybuild.io/" target="_blank" rel="noopener" title="">EasyBuild</a>, I really do, but similar to Autotools, it is pretty much a UNIX-only tool. In their case, it makes sense, though, as they are targeting high-performance computing (HPC) platforms, which pretty much always run UNIX as an operating system. The 1% of HPC clusters that run Windows (yes, they seemingly exist) probably only exist as demos to show that you could run Windows on a cluster if you are crazy enough.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>EasyBuild follows the philosophy of building everything, and I mean <em>everything</em>, from scratch. Say you want to install the <a href="https://cfd.university/learn/how-to-compiler-write-and-use-cfd-libraries-in-c/how-to-integrate-external-cfd-libraries-in-your-code" target="_blank" rel="noopener" title="">CGNS library as we did in the previous article</a>, then EasyBuild would look at the requirements that are needed to build CGNS (this is similar to what Conan calls a recipe) and then build these. But you don't just need hdf5 and zlib installed, you also need a compiler, and a compiler will need some additional dependencies. So, before you even build any library, EasyBuild will compile a compiler for your specific platform. See, I told you, we build <em>everything</em> from scratch.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>EasyBuild is just one part of the equation and it requires a Modules package, of which Lmod is the preferred package. <a href="https://lmod.readthedocs.io/en/latest/" target="_blank" rel="noopener" title="">Lmod</a> is written in Lua (which gives us a perfect excuse to learn yet another programming language!) The module package will make different libraries available by setting and unsetting environmental variables. Say you want to install the CGNS library but you need a few versions to be compatible with all the different libraries you want to work with. In that case, EasyBuild will download the source files and compile and build all of them for you, while Lmod will provide the interface to you which allows you to load any version of the library. If you load a library that depends on another library, Lmod will silently load that in the background for you as well.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>EasyBuild + Lmod is really a treat to work with, but if you are gunning for cross-platform compatibility, this is not the right tool to use. I am always in favour of building code that runs on more than one platform, so either Conan or vgplkh may be better suited in this case to handle dependencies. If you are, however, locked into using UNIX anyway, this may be a viable tool for you.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-using-a-package-manager">Case study: Using a package manager to consume the CGNS library</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>We looked at how to compile and build the CGNS library ourselves <a href="https://cfd.university/learn/how-to-compiler-write-and-use-cfd-libraries-in-c/how-to-integrate-external-cfd-libraries-in-your-code" target="_blank" rel="noopener" title="">in the previous article</a>, so I wanted to pick up this example and show you how to do that with either Conan or vgkpcf. We use a simple example project which has the following structure</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"root\n├── build/\n├── main.cpp\n└── CMakeLists.txt","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eroot\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── build/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003emain\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ecpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e└── \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eCMakeLists\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003etxt\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":4,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="root
├── build/
├── main.cpp
└── CMakeLists.txt" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">root</span></span>
<span class="line"><span style="color: #D4D4D4">├── build/</span></span>
<span class="line"><span style="color: #D4D4D4">├── </span><span style="color: #9CDCFE">main</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">cpp</span></span>
<span class="line"><span style="color: #D4D4D4">└── </span><span style="color: #9CDCFE">CMakeLists</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">txt</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Here, the <code>build/</code> folder will contain all output from the compilation. The <code>main.cpp</code> file has the following content:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"#include \u0026lt;iostream\u003e\n#include \u0022cgnslib.h\u0022\n\nint main() {\n  int cgFile = 0;\n  float version = 0.0;\n  cg_open(\u0022test.cgns\u0022, CG_MODE_WRITE, \u0026amp;cgFile);\n  cg_version(cgFile, \u0026amp;version);\n  cg_close(cgFile);\n\n  std::cout \u0026lt;\u0026lt; \u0022cgns version: \u0022 \u0026lt;\u0026lt; version \u0026lt;\u0026lt; std::endl;\n\n  return 0;\n}","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cgnslib.h\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eint\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003emain\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eint\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e cgFile = \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003efloat\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e version = \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecg_open\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;test.cgns\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, CG_MODE_WRITE, \u0026amp;cgFile);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecg_version\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(cgFile, \u0026amp;version);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecg_close\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(cgFile);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::cout \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cgns version: \u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u0026lt;\u0026lt; version \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::endl;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":14,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="#include &lt;iostream&gt;
#include &quot;cgnslib.h&quot;

int main() {
  int cgFile = 0;
  float version = 0.0;
  cg_open(&quot;test.cgns&quot;, CG_MODE_WRITE, &amp;cgFile);
  cg_version(cgFile, &amp;version);
  cg_close(cgFile);

  std::cout &lt;&lt; &quot;cgns version: &quot; &lt;&lt; version &lt;&lt; std::endl;

  return 0;
}" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;iostream&gt;</span></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&quot;cgnslib.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">int</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">main</span><span style="color: #D4D4D4">() {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">int</span><span style="color: #D4D4D4"> cgFile = </span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">float</span><span style="color: #D4D4D4"> version = </span><span style="color: #B5CEA8">0.0</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">cg_open</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&quot;test.cgns&quot;</span><span style="color: #D4D4D4">, CG_MODE_WRITE, &amp;cgFile);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">cg_version</span><span style="color: #D4D4D4">(cgFile, &amp;version);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">cg_close</span><span style="color: #D4D4D4">(cgFile);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::cout &lt;&lt; </span><span style="color: #CE9178">&quot;cgns version: &quot;</span><span style="color: #D4D4D4"> &lt;&lt; version &lt;&lt; </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::endl;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> </span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>It includes the CGNS header file on line 2, and then simply proceeds to open a new CGNS file in write mode on line 7, checks its version on line 8, closes the file on line 9 and then prints the version on line 11. If everything goes correctly, we should see the same library version printed on line 11 that we installed with either method shown below.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The <code>CMakeLists.txt</code> file contains the following content:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake_minimum_required(VERSION 3.15)\nproject(CGNStest)\n\nfind_package(CGNS REQUIRED)\n\nadd_executable(${PROJECT_NAME} main.cpp)\ntarget_link_libraries(${PROJECT_NAME} CGNS::CGNS)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003ecmake_minimum_required\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(VERSION 3.15)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eproject\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(CGNStest)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003efind_package\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(CGNS REQUIRED)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eadd_executable\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${PROJECT_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e main.cpp)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003etarget_link_libraries\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${PROJECT_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e CGNS::CGNS)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":7,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake_minimum_required(VERSION 3.15)
project(CGNStest)

find_package(CGNS REQUIRED)

add_executable(${PROJECT_NAME} main.cpp)
target_link_libraries(${PROJECT_NAME} CGNS::CGNS)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">cmake_minimum_required</span><span style="color: #D4D4D4">(VERSION 3.15)</span></span>
<span class="line"><span style="color: #569CD6">project</span><span style="color: #D4D4D4">(CGNStest)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">find_package</span><span style="color: #D4D4D4">(CGNS REQUIRED)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">add_executable</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${PROJECT_NAME}</span><span style="color: #D4D4D4"> main.cpp)</span></span>
<span class="line"><span style="color: #569CD6">target_link_libraries</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${PROJECT_NAME}</span><span style="color: #D4D4D4"> CGNS::CGNS)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We specify a minimum CMake version (which is pretty inconsequential here, i.e. we are not making use of any advanced, recent features, so anything above 3.0 should work just fine) and a name for our project. On line 4, we tell CMake that the CGNS library is required, and without it, we can't produce an executable. On line 6, we generate said executable which depends on the <code>main.cpp</code> file, and then on line 7, we specify that we want to link our executable against the CGNS library. Don't get hung up too much on the specific syntax, just try to understand in spirit what we are trying to achieve here. We will look at CMake in a lot more detail in a future series.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-c">Conan</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>We first need to make sure Conan is installed. As mentioned above, given that this is a Python package, we simply install it through pip with</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>pip install conan</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The first time we want to use it, we have to generate a default profile. This profile will tell Conan what operating system we are using, what our processor architecture is (32-bit or 64-bit), and what type of build we want to produce (Debug or Release). We can generate several profiles or overwrite specific settings for specific libraries later, but we need to have a default place to start from. To do that, you would invoke the following command</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>conan profile detect</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This command will spit out a warning saying that it tried to guess sensible default values. I have tried it on both Windows and Ubuntu and in both cases, it works quite well, so it does a good job of sensing your environment. We are now ready to use Conan to manage libraries for us.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>First, we have to generate a <code>conanfile.txt</code>, which will sit in the root directory. Our project structure now becomes</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"root\n├── build/\n├── main.cpp\n├── conanfile.txt\n└── CMakeLists.txt","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eroot\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── build/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── main.cpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── conanfile.txt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e└── CMakeLists.txt\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":5,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="root
├── build/
├── main.cpp
├── conanfile.txt
└── CMakeLists.txt" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">root</span></span>
<span class="line"><span style="color: #D4D4D4">├── build/</span></span>
<span class="line"><span style="color: #D4D4D4">├── main.cpp</span></span>
<span class="line"><span style="color: #D4D4D4">├── conanfile.txt</span></span>
<span class="line"><span style="color: #D4D4D4">└── CMakeLists.txt</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>and the content of the <code>conanfile.txt</code> is as follows:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"[requires]\ncgns/4.3.0\n\n[generators]\nCMakeToolchain\nCMakeDeps\n\n[options]\ncgns*:shared=False","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[requires]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #F44747\u0022\u003ecgns/4.3.0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[generators]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #F44747\u0022\u003eCMakeToolchain\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #F44747\u0022\u003eCMakeDeps\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[options]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #F44747\u0022\u003ecgns*:shared=False\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"toml","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":9,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="[requires]
cgns/4.3.0

[generators]
CMakeToolchain
CMakeDeps

[options]
cgns*:shared=False" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">[requires]</span></span>
<span class="line"><span style="color: #F44747">cgns/4.3.0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">[generators]</span></span>
<span class="line"><span style="color: #F44747">CMakeToolchain</span></span>
<span class="line"><span style="color: #F44747">CMakeDeps</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">[options]</span></span>
<span class="line"><span style="color: #F44747">cgns*:shared=False</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>The <code>[requires]</code> section specifies the library, along with its version, we want to use. To find out which libraries are available, we have to browse through <a href="https://conan.io/center" target="_blank" rel="noopener" title="">conan center</a>. For example, if we search for CGNS, we will find, we will <a href="https://conan.io/center/recipes/cgns?version=4.3.0" target="_blank" rel="noopener" title="">find it for version 4.3.0</a>. On the left-hand side at the bottom, it shows us how to specify it in our <code>[requires]</code> section.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>There is also a link to the <a href="https://github.com/conan-io/conan-center-index/tree/master/recipes/cgns" target="_blank" rel="noopener" title="">recipe on GitHub</a>, where we can look for some options that we can set for this library. If you click through to the recipe, within the <code>all/</code> directory, there is a file called <code>conanfile.py</code>. You will find a Python dictionary called <code>options</code> with entries for <code>shared</code>, <code>fPIC</code>, <code>with_hdf5</code>, and <code>parallel</code>. These are the options that we can set for the library and you see that in the <code>[options]</code> section in the above shown <code>conanfile.txt</code>. Here we set the <code>shared</code> option to <code>False</code> for all library versions (indicated by the asterisk), meaning we are going to build a static library.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The <code>conanfile.py</code> file also has an Python dictionary called <code>default_options</code>, which specifies the default options in case no options are specified in the <code>conanfile.txt</code>. Even if <code>shared</code> is by default set to <code>False</code>, it makes sense to set the options here specifically to avoid surprises in the future should any default option change.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The <code>[generators]</code> section, then, provides the interface to Conan, i.e. how we want to consume the libraries generated by Conan for us. As I mentioned before, CMake is probably the best default option as CMake should be our preferred build system, but we have support for other build systems as well here. Unfortunately, there doesn't seem to be a good reference page for that in the Conan docs, so the best way to find out which generators are available is by running Conan with an invalid generator name (how about <a href="https://openfoamwiki.net/index.php/OpenFOAM_guide/Use_bananas" target="_blank" rel="noopener" title="">banana</a>?). Conan will then print all currently available generators to the screen.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>With the <code>conanfile.txt</code> completed, we have to first create an output directory, which in our case is the <code>build/</code> directory. Then, we invoke the following command</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>conan install . --output-folder=build --build=missing</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>It will install everything required into the <code>output-folder</code> and it will compile any libraries from source if they are missing. Once this step is done, we can configure and compile our CMake project in the usual way. During the configuration step, though, we have to pass in one additional variable to point to the Conan toolchain file. A toolchain file contains information about essential compilation resources. It is usually used to specify options for cross-compilation (i.e. setting up the build script for different operating systems, but Conan (ab)uses it to inject all library dependencies here.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you look inside the generated <code>build/conan_toolchain.cmake</code> toolchain file, it contains two important entries:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"list(PREPEND CMAKE_LIBRARY_PATH\n  \u0022C:/Users/\u0026lt;username\u003e/.conan2/p/b/cgnse905a92186320/p/lib\u0022\n  \u0022C:/Users/\u0026lt;username\u003e/.conan2/p/hdf5e507ea1cd290d/p/lib\u0022\n  \u0022C:/Users/\u0026lt;username\u003e/.conan2/p/zlibee1f000851145/p/lib\u0022)\nlist(PREPEND CMAKE_INCLUDE_PATH\n  \u0022C:/Users/\u0026lt;username\u003e/.conan2/p/b/cgnse905a92186320/p/include\u0022     \n  \u0022C:/Users/\u0026lt;username\u003e/.conan2/p/hdf5e507ea1cd290d/p/include\u0022 \n  \u0022C:/Users/\u0026lt;username\u003e/.conan2/p/hdf5e507ea1cd290d/p/include/hdf5\u0022   \n  \u0022C:/Users/\u0026lt;username\u003e/.conan2/p/zlibee1f000851145/p/include\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003elist\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(PREPEND \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eCMAKE_LIBRARY_PATH\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;C:/Users/\u0026lt;username\u0026gt;/.conan2/p/b/cgnse905a92186320/p/lib\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;C:/Users/\u0026lt;username\u0026gt;/.conan2/p/hdf5e507ea1cd290d/p/lib\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;C:/Users/\u0026lt;username\u0026gt;/.conan2/p/zlibee1f000851145/p/lib\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003elist\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(PREPEND \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eCMAKE_INCLUDE_PATH\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;C:/Users/\u0026lt;username\u0026gt;/.conan2/p/b/cgnse905a92186320/p/include\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e     \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;C:/Users/\u0026lt;username\u0026gt;/.conan2/p/hdf5e507ea1cd290d/p/include\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;C:/Users/\u0026lt;username\u0026gt;/.conan2/p/hdf5e507ea1cd290d/p/include/hdf5\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e   \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;C:/Users/\u0026lt;username\u0026gt;/.conan2/p/zlibee1f000851145/p/include\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":9,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="list(PREPEND CMAKE_LIBRARY_PATH
  &quot;C:/Users/&lt;username&gt;/.conan2/p/b/cgnse905a92186320/p/lib&quot;
  &quot;C:/Users/&lt;username&gt;/.conan2/p/hdf5e507ea1cd290d/p/lib&quot;
  &quot;C:/Users/&lt;username&gt;/.conan2/p/zlibee1f000851145/p/lib&quot;)
list(PREPEND CMAKE_INCLUDE_PATH
  &quot;C:/Users/&lt;username&gt;/.conan2/p/b/cgnse905a92186320/p/include&quot;     
  &quot;C:/Users/&lt;username&gt;/.conan2/p/hdf5e507ea1cd290d/p/include&quot; 
  &quot;C:/Users/&lt;username&gt;/.conan2/p/hdf5e507ea1cd290d/p/include/hdf5&quot;   
  &quot;C:/Users/&lt;username&gt;/.conan2/p/zlibee1f000851145/p/include&quot;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">list</span><span style="color: #D4D4D4">(PREPEND </span><span style="color: #9CDCFE">CMAKE_LIBRARY_PATH</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">&quot;C:/Users/&lt;username&gt;/.conan2/p/b/cgnse905a92186320/p/lib&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">&quot;C:/Users/&lt;username&gt;/.conan2/p/hdf5e507ea1cd290d/p/lib&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">&quot;C:/Users/&lt;username&gt;/.conan2/p/zlibee1f000851145/p/lib&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">list</span><span style="color: #D4D4D4">(PREPEND </span><span style="color: #9CDCFE">CMAKE_INCLUDE_PATH</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">&quot;C:/Users/&lt;username&gt;/.conan2/p/b/cgnse905a92186320/p/include&quot;</span><span style="color: #D4D4D4">     </span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">&quot;C:/Users/&lt;username&gt;/.conan2/p/hdf5e507ea1cd290d/p/include&quot;</span><span style="color: #D4D4D4"> </span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">&quot;C:/Users/&lt;username&gt;/.conan2/p/hdf5e507ea1cd290d/p/include/hdf5&quot;</span><span style="color: #D4D4D4">   </span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">&quot;C:/Users/&lt;username&gt;/.conan2/p/zlibee1f000851145/p/include&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>It sets the library and include paths for CMake to find (in this case, I am on Windows, on UNIX it would be in <code>/home/&lt;username&gt;/.conan2/</code>). We see as before, that we need to install not just the CGNS library, but also hdf5 and zlib. Conan and CMake hide this fact from us so we just need to declare the libraries we want to use and they will resolve additional dependencies in the background for us.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>So, now that we have an idea of what a toolchain file is, we start the configuration step, assuming we are within the <code>build/</code> directory, with:</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE=./conan_toolchain.cmake ..</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Afterwards, we compile the code with the usual build command</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>cmake --build . --config Release</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Depending on which platform you are on, the executable will now be located either within the <code>build/Release</code> (Windows) or just the <code>build/</code> folder (UNIX). Executing <code>build/Release/CGNStest.exe</code> (Windows) or <code>build/CGNStest</code> (UNIX), will print the following message to the console:</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>cgns version: 4.3</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This is the print statement from our <code>main.cpp</code> file and we can see that indeed the CGNS library was successfully installed and found, and we are getting the correct version.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This shows how to use Conan, in a nutshell. It is much more powerful than that and you can use it to do a few more things but most commonly, as an end-user, you wouldn't be doing much else than what we have looked at in this section. So if you understood all in this section, then you are already a Conan power user.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-vckpg-2">vcpkg (no thank you)</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>I never used vbplg before so I thought it would be a good idea to get to grips with it and write up about the basic usage here. It can't be that difficult I thought, but the more I looked into this tool, the messier it got, and it doesn't seem to be just my opinion. So instead, I'll summarise here why I think you should stay away from this tool as much as possible (sorry Microsoft fanboys and girls).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Before you start using vcfgh, you have to run a bootstrap script which will set up your environment. This script is doing weird stuff! First of all, it seems to be confused about what you already have installed on your system. Take for example <a href="https://youtu.be/KOeOLOu6nHw?si=vAm2oExoKS-GwO-P" target="_blank" rel="noopener" title="">Jason Turner's shot</a> at vgpgg, when he tried using it for the first time, the first thing it did was to download CMake, which was already installed on his machine. Furthermore, it detected an outdated compiler and even worse, different versions for the C and C++ compilers. How I have no idea!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Arguably his video is somewhat outdated by now (and I'll get to that in a second), so I did not observe the same behaviour. however, when you run the bootstrap script it proudly announces that it will collect data about you to, <em>of course</em>, improve <em>your</em> user experience. It can't possibly be used for more sinister reasons, can it? <a href="https://www.ftc.gov/business-guidance/blog/2023/06/20-million-ftc-settlement-addresses-microsoft-xbox-illegal-collection-kids-data-game-changer-coppa" target="_blank" rel="noopener" title="">$20 million settlement over illegal data collection</a>, and <a href="https://iapp.org/news/a/lawsuit-accuses-openai-microsoft-of-illegal-data-scraping/" target="_blank" rel="noopener" title="">lawsuit over code piracy (yes, piracy) at Microsoft</a>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Microsoft is kind enough to allow you to opt-out (I guess legally they have to), so you can run the bootstrap script with user data collection turned off. This is what I did. Much to my surprise, looking through the logs, I was surprised to find the following line:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"[DEBUG] VS telemetry opted in at SOFTWARE\\WOW6432Node\\Microsoft\\VSCommon\\17.0\\SQM\\\\OptIn","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[DEBUG] VS telemetry opted in at SOFTWARE\\WOW6432Node\\Microsoft\\VSCommon\\17.0\\SQM\\\\OptIn\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="[DEBUG] VS telemetry opted in at SOFTWARE\WOW6432Node\Microsoft\VSCommon\17.0\SQM\\OptIn" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">[DEBUG] VS telemetry opted in at SOFTWARE\WOW6432Node\Microsoft\VSCommon\17.0\SQM\\OptIn</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>I did not! So vgpjh decided to ignore my request. It definitely recognised that I did not want my data to be collected because if I run the bootstrap script with and without data collection enabled, the output looks different. I re-ran the bootstrapper, just to be sure, removed temporary directors and ran viplg again but I still got this line. This is a very questionable behaviour and, to be honest, reason enough not to use it.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This is coming from someone who has ditched Chrome for <a href="https://brave.com/" target="_blank" rel="noopener" title="">Brave</a>, and Google for <a href="https://search.brave.com/" target="_blank" rel="noopener" title="">Brave search</a> for the same reasons (and this sentence is probably the quickest way to destroy your SEO ranking on Google, ah well ...).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The second issue I have is the design philosophy itself. The package seems to have radically changed and while that in itself is not necessarily an issue, it means that any documentation you look up other than the official documentation from Microsoft, is pretty much outdated (like <a href="https://youtu.be/KOeOLOu6nHw?si=vAm2oExoKS-GwO-P" target="_blank" rel="noopener" title="">Jason Turner's video</a> mentioned above).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This means there is just a single resource you should use, but most people will either use YouTube or ChatGPT first to get an idea and this simply will not work. This point will become less important over time, assuming that Microsoft is not introducing further breaking changes. If you always look at the documentation first anyway, then this may not apply. But, if you look at the documentation, the next surprise awaits.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Ok, I get it, vcght introduced a <a href="https://learn.microsoft.com/en-gb/vcpkg/users/manifests" target="_blank" rel="noopener" title="">manifest mode</a>, which I am in full support of. This requires a manifest JSON file which lists all dependencies that you want to install. When you then type <code>vcpkg install</code> it will look through your manifest and install the required libraries, including resolving any additional dependencies which are needed to compile the libraries you are interested in. I get all that. But how can I specify that I want to build a library in release or debug mode? How can I specify that I want to build a static or dynamic library?</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you look at the <a href="https://learn.microsoft.com/en-gb/vcpkg/reference/vcpkg-json" target="_blank" rel="noopener" title="">manifest reference page</a>, this is not mentioned. I have looked through a few other places as well, and something as basic as this seems to be hidden very well in the documentation (or, perhaps you don't get a choice here).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you still say that you can live with a package manager that can't reliably detect your compiler, downloads dependencies it doesn't need, collects your user data against your will and provides you with documentation that doesn't document how to use your package manager, perhaps the next point will convince you.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>It just doesn't work. Period.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Let me explain. Let's say you want to install CGNS, as we did with Conan. Then, you would provide a <code>vcpkg.json</code> file of this form</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"{\n  \u0022dependencies\u0022: [\n    \u0022cgns\u0022\n  ]\n}","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e\u0026quot;dependencies\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cgns\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"json","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":5,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="{
  &quot;dependencies&quot;: [
    &quot;cgns&quot;
  ]
}" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">{</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">&quot;dependencies&quot;</span><span style="color: #D4D4D4">: [</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #CE9178">&quot;cgns&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">  ]</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>This doesn't look too bad (and is pretty self-explanatory). So next, we type <code>vcpkg install --triplet x64-windows</code> (yes, we have to specify that we want to build for 64 bit which is not the default, although it seems to become one now) and we get an error message like so: </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>error: building zlib:x64-windows failed with: BUILD_FAILED</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>That's interesting, something went wrong when building the first dependency. So you comb through your log files, realise Microsoft collects your data against your will, but you also stumble across the following line:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"Downloading https://repo.msys2.org/mingw/i686/mingw-w64-i686-libwinpthread-git-9.0.0.6373.5be8fcd83-1-any.pkg.tar.zst\nerror: Failed to download from mirror set","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eDownloading\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003ehttps://repo.msys2.org/mingw/i686/mingw-w64-i686-libwinpthread-git-9.0.0.6373.5be8fcd83-1-any.pkg.tar.zst\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eerror:\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eFailed\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eto\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003edownload\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003efrom\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003emirror\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eset\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":2,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="Downloading https://repo.msys2.org/mingw/i686/mingw-w64-i686-libwinpthread-git-9.0.0.6373.5be8fcd83-1-any.pkg.tar.zst
error: Failed to download from mirror set" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">Downloading</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">https://repo.msys2.org/mingw/i686/mingw-w64-i686-libwinpthread-git-9.0.0.6373.5be8fcd83-1-any.pkg.tar.zst</span></span>
<span class="line"><span style="color: #DCDCAA">error:</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">Failed</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">to</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">download</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">from</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">mirror</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">set</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Ok, so you check out the mirror and sure enough <code>mingw-w64-i686-libwinpthread-git-9.0.0.6373.5be8fcd83-1-any.pkg.tar.zst</code> doesn't exist. <code>mingw-w64-i686-libwinpthread-git-9.0.0.6448.b03cbfb95-1-any.pkg.tar.zst</code> does exist but that isn't detected. And sure, you could argue that there is probably a way to tell vghpl to use a newer version of this dependency, but that would be missing the point.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>First of all, I don't want to interact with low-level stuff. If I wanted to, I could just download, compile and install the packages myself. The whole point of a package manager is that we don't have to deal with this low-level stuff ourselves. Being unable to resolve the dependencies correctly is a pretty bad sign for a package manager. You could argue that this may be one of the few packages for which the build fails while most other packages work. Ok, I get your point, but let's move on to the next, much more problematic point:</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Why is vgfth downloading MinGW as a dependency in the first place? MinGW is a GNU compiler that essentially makes UNIX tools available on Windows. Why is a package manager developed by Microsoft downloading UNIX compilers to compile the libraries you have requested? We saw in the <a href="https://cfd.university/learn/how-to-compiler-write-and-use-cfd-libraries-in-c/how-to-integrate-external-cfd-libraries-in-your-code" target="_blank" rel="noopener" title="">previous article</a> that zlib can be compiled natively on Windows using its own <code>cl</code> compiler. So why does it need MinGW? It bamboozles me, and I don't have a good answer here.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>So there you have it, a broken package manager that is unable to manage packages, developed by Microsoft using UNIX tools to compile dependencies, and despite illegal data collection to <em>improve my user experience</em>, my user experience is still pretty abysmal (how are they using my data again?)</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-summary">Summary</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>So what have we learned in this article? Mainly that Microsoft is fueling my inner dyslexia, but in more serious terms, we looked at package managers that help us deal with dependencies. Specifically, we highlighted Conan, vcpkg (yes, I know how to spell it ...), Hunter and EasyBuild, while taking a deeper look at Conan, as well as reasons why I can't recommend vcpkg.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Conan is a great package manager and every time I work with it, I am just very satisfied. It took me some time to master managing dependencies / installing libraries and I felt only comfortable doing that on UNIX for quite some time. With Conan, however, anyone can become a C++ power user and inject libraries into their code with a single command.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Package managers are supposed to make our life easier and allow us to concentrate on the important part; writing code (and not debugging the build process, yes vcpkg, I am looking at you). Given the relative ease at which you can pick up Conan, I would recommend starting with this package manager for all of your C++ projects. It's a great and user-friendly entry into the world of managing dependencies automatically.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->