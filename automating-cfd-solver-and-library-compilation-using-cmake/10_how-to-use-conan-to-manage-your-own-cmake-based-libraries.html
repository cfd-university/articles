<!-- How to use Conan to manage your own CMake-based libraries -->
<!-- https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/how-to-use-conan-to-manage-your-own-cmake-based-libraries/ -->

<!-- wp:paragraph -->
<p>In this final article in our series on build automation, we look at how we can provide our own Conan recipe to compile and package our libraries with Conan so that we can store them in our local Conan cache for easy reuse in other projects. We will be able to put our own libraries into a <code>conanfile.txt</code> as a dependency, and Conan will not only make these libraries available to us, but also resolve any dependencies our libraries depend on in the background, e.g. the CGNS library.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>By the end of this article, you will be a Conan master and will know how to use it to bring in external and internal dependencies. Never before has developing CFD libraries been so painless and we should use the tools available to use to make our life, and that of our users, as simple as possible, so that all the hard work we put into our library will pay off and users will start to use our work.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you have followed this series, you will also have become a black belt CMake practitioner, and you will be able to automate all of your software projects, from configuring to packaging. Knowing CMake, especially in conjunction with Conan, will make you more productive, and you will find that building software has never been that simple before, especially if you have to resolve dependencies.</p>
<!-- /wp:paragraph -->

<!-- wp:block {"ref":2490} /-->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li><strong>Download</strong>: <a href="https://cfd.university/download/build-systems-part-10-meshreaderlib/?tmstv=1720673795&amp;v=4039" title="">Build-Systems-Part-10-meshReaderLib</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><strong>Download</strong>: <a href="https://cfd.university/download/build-systems-part-10-linearalgebrasolverlib/?tmstv=1720673861&amp;v=4043" title="">Build-Systems-Part-10-linearAlgebraSolverLib</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><strong>Download</strong>: <a href="https://cfd.university/download/build-systems-part-10-testing/?tmstv=1720673849&amp;v=4041" title="">Build-Systems-Part-10-testing</a></li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:heading -->
<h2 class="wp-block-heading">In this series</h2>
<!-- /wp:heading -->

<!-- wp:shortcode -->
[custom_category_posts_list category_slug="automating-cfd-solver-and-library-compilation-using-cmake"]
<!-- /wp:shortcode -->

<!-- wp:heading -->
<h2 class="wp-block-heading">In this article</h2>
<!-- /wp:heading -->

<!-- wp:aioseo/table-of-contents {"headings":[{"id":9,"blockClientId":"891e931a-6192-41b2-96b1-589cdb00ef2b","content":"Introduction: How to impress your users","level":2,"anchor":"aioseo-introduction","order":0,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":20,"blockClientId":"8815b19d-777d-4bfa-afdf-10f70a7fa36b","content":"Creating a Conan recipe for our mesh reader library","level":2,"anchor":"aioseo-creating-a-conan-receip","order":1,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":23,"blockClientId":"04a74a46-983e-4d59-a0c7-72cf35a6c646","content":"Creating a new Conan package from scratch","level":3,"anchor":"aioseo-creating-a-new-conan-package-from-scratch","order":2,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":31,"blockClientId":"bd63c362-3f16-4264-9d0a-ae0f4d42842b","content":"Project structure","level":3,"anchor":"aioseo-project-structure","order":3,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":36,"blockClientId":"74fcbddb-92bb-4ab7-a7e5-4f194f598999","content":"Creating the required instructions for Conan: conanfile.py","level":3,"anchor":"aioseo-creating-the-top-level-conanfile-py","order":4,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":40,"blockClientId":"921dd70f-da9a-4ea2-9764-012a81c06528","content":"Import statements, class declaration, and class variables","level":4,"anchor":"aioseo-import-statements-class-declaration-and-class-variables","order":5,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":53,"blockClientId":"909eb327-7775-412d-bf3c-5555d3a347b3","content":"Declaring required source files","level":4,"anchor":"aioseo-declaring-required-source-files","order":6,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":66,"blockClientId":"e563f33c-8913-4093-99c1-5de186c953ba","content":"Information for the configuration step","level":4,"anchor":"aioseo-information-for-the","order":7,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":87,"blockClientId":"a09fb911-822d-4444-890b-58cdd5789387","content":"Building our library with Conan","level":4,"anchor":"aioseo-building-our-library-with-conan","order":8,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":91,"blockClientId":"06a560a1-f9ae-4a3a-ac85-96d64498af9e","content":"Package and install our library into our local Conan cache","level":4,"anchor":"aioseo-package-and-install-our-library-into-our-local-conan-cache","order":9,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":100,"blockClientId":"c7be9c41-51c6-472e-b5fa-76b42725c8a3","content":"Creating a test for Conan","level":3,"anchor":"aioseo-creating-a-test-for-conan","order":10,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":106,"blockClientId":"ac3feb6f-65ef-42a6-a1d0-247884f2c6fe","content":"Creating a C++ test: example.cpp","level":4,"anchor":"aioseo-creating-a-c-test-example-cpp","order":11,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":110,"blockClientId":"0f6e7ce2-dd96-414e-97cf-d0610f0d2dc8","content":"Build the C++ test: CMakeLists.txt","level":4,"anchor":"aioseo-build-the-c-test-cmakelists-txt","order":12,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":113,"blockClientId":"df361580-8c42-43a9-92dd-20e8040f441c","content":"Handling dependencies: conanfile.py","level":4,"anchor":"aioseo-handling-dependencies-conanfile-py","order":13,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":117,"blockClientId":"bc05bfde-b3f9-4028-af26-5dc889771085","content":"Command line instructions to create the package","level":3,"anchor":"aioseo-command-line-instructions-to-create-the-package","order":14,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":130,"blockClientId":"2cc662d2-3584-431f-b254-cb8c73263c23","content":"I really want others to use my amazing library, what should I do?","level":3,"anchor":"aioseo-i-really-want-others-to-use-my-amazing-library-what-shoudl-i-do","order":15,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":132,"blockClientId":"84d83aad-06bc-4a20-8143-14d7695e3789","content":"Notes on the linear algebra library changes","level":2,"anchor":"aioseo-notes-on-the-linear-algebra-library-changes","order":16,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":136,"blockClientId":"21f4c31b-215a-4335-8286-aea0c1ee3a03","content":"Consuming the newly Conan-based libraries in our test project","level":2,"anchor":"aioseo-consuming-the-newly-conan-based-libraries-in-our-test-project","order":17,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":139,"blockClientId":"6fc87adb-e1ce-424b-a06a-85be6c761078","content":"Changes to the test project","level":3,"anchor":"aioseo-changes-to","order":18,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":148,"blockClientId":"4d40ccd0-9910-431f-94ac-0885fbd0c1c1","content":"Command line instructions","level":3,"anchor":"aioseo-command-line-instructions","order":19,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":157,"blockClientId":"5c3770a3-b27d-4ecc-916e-52b651507264","content":"Summary","level":2,"anchor":"aioseo-summary","order":20,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]} -->
<div class="wp-block-aioseo-table-of-contents"><ul><li><a href="#aioseo-introduction">Introduction: How to impress your users</a></li><li><a href="#aioseo-creating-a-conan-receip">Creating a Conan recipe for our mesh reader library</a><ul><li><a href="#aioseo-creating-a-new-conan-package-from-scratch">Creating a new Conan package from scratch</a></li><li><a href="#aioseo-project-structure">Project structure</a></li><li><a href="#aioseo-creating-the-top-level-conanfile-py">Creating the required instructions for Conan: conanfile.py</a><ul><li><a href="#aioseo-import-statements-class-declaration-and-class-variables">Import statements, class declaration, and class variables</a></li><li><a href="#aioseo-declaring-required-source-files">Declaring required source files</a></li><li><a href="#aioseo-information-for-the">Information for the configuration step</a></li><li><a href="#aioseo-building-our-library-with-conan">Building our library with Conan</a></li><li><a href="#aioseo-package-and-install-our-library-into-our-local-conan-cache">Package and install our library into our local Conan cache</a></li></ul></li><li><a href="#aioseo-creating-a-test-for-conan">Creating a test for Conan</a><ul><li><a href="#aioseo-creating-a-c-test-example-cpp">Creating a C++ test: example.cpp</a></li><li><a href="#aioseo-build-the-c-test-cmakelists-txt">Build the C++ test: CMakeLists.txt</a></li><li><a href="#aioseo-handling-dependencies-conanfile-py">Handling dependencies: conanfile.py</a></li></ul></li><li><a href="#aioseo-command-line-instructions-to-create-the-package">Command line instructions to create the package</a></li><li><a href="#aioseo-i-really-want-others-to-use-my-amazing-library-what-shoudl-i-do">I really want others to use my amazing library, what should I do?</a></li></ul></li><li><a href="#aioseo-notes-on-the-linear-algebra-library-changes">Notes on the linear algebra library changes</a></li><li><a href="#aioseo-consuming-the-newly-conan-based-libraries-in-our-test-project">Consuming the newly Conan-based libraries in our test project</a><ul><li><a href="#aioseo-changes-to">Changes to the test project</a></li><li><a href="#aioseo-command-line-instructions">Command line instructions</a></li></ul></li><li><a href="#aioseo-summary">Summary</a></li></ul></div>
<!-- /wp:aioseo/table-of-contents -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-introduction">Introduction: How to impress your users</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>In my previous article on <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/how-to-add-external-libraries-into-your-cfd-solver-using-cmake" target="_blank" rel="noopener" title="">how to manage dependencies with CMake</a>, we looked at three separate ways to manage dependencies:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li>Using a combination of <code>CMAKE_PREFIX_PATH</code> and <code>find_package()</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Using CMake's <a href="https://cmake.org/cmake/help/latest/module/FetchContent.html" target="_blank" rel="noopener" title="">FetchContent</a> module</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Using <a href="https://conan.io/" target="_blank" rel="noopener" title="">Conan</a> as a package manager</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>The first option works well if the library you are trying to use has provided all the required <code>*.cmake</code> files. There are some slight complications arising from using <code>find_package()</code>, in that it can be operated in either <code>CONFIG</code> or <code>MODULE</code> mode, which will determine how CMake is looking for the required files. We have only been using <code>CONFIG</code> mode, and that is the preferred choice nowadays. But for completeness, <a href="https://stackoverflow.com/questions/20746936/what-use-is-find-package-when-you-need-to-specify-cmake-module-path" target="_blank" rel="noopener" title="">here is a good answer</a> for the difference.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The <a href="https://cmake.org/cmake/help/latest/module/FetchContent.html" target="_blank" rel="noopener" title="">FetchContent</a> module is a nice idea and useful as an onboard tool if you want to keep dependency management within CMake. However, it doesn't always work the way you want, and you can spend ages trying to get the configuration settings right. You can always opt for the <a href="https://cmake.org/cmake/help/latest/module/ExternalProject.html#module:ExternalProject" target="_blank" rel="noopener" title="">ExternalProject</a> module instead (which we did not elaborate on, but it can be regarded as a more flexible alternative to FetchContent), but this is just hardcoding build requirements that may need to change over time and thus can lead to code-breaking all of a sudden.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Using a package manager, in my view, is a much better option, and we reviewed, at least conceptually, available options for C++ <a href="https://cfd.university/learn/how-to-compile-write-and-use-cfd-libraries-in-c/how-to-handle-c-libraries-with-a-package-manager/#aioseo-an-overview-of-available-package-managers" target="_blank" rel="noopener" title="">in an earlier article</a>. Chances are, if you are using either FetchContent or ExternalProject, you are just one step away from using a package manager, and you may as well make use of all the additional features a package manager can offer you, compared to CMake, for which both FetchContent and ExternalProject are just two additional modules (and much less powerful in comparison to, say, Conan).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>So, I hope to have made my point in previous articles why using a package manager is, in general, a good idea. We have used Conan extensively in this series to bring in dependencies (primarily <a href="https://cgns.github.io/" target="_blank" rel="noopener" title="">CGNS</a>, <a href="https://google.github.io/googletest/" target="_blank" rel="noopener" title="">Gtest</a>, and <a href="https://doxygen.nl/" target="_blank" rel="noopener" title="">Doxygen</a>). But what if we wanted to use Conan to package our own library so that others can use our library through Conan?</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Well, this is what we will look at in this article. If you already understand the install step in CMake, and the <code>conanfile.txt</code> that we have looked at previously, then making the next step to writing our own recipe for Conan to handle our library is not that much more difficult (and, I suppose, the difficulty level will be determined by your confidence in using Python!).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This is what we will do in today's article:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul class="wp-block-list"><!-- wp:list-item -->
<li>First, we will make necessary changes to transform our mesh reading library to use Conan not just to bring in dependencies but also to package our library so that it can be used and consumed by other projects</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Then, we will take a look at what changes needs to be done for the linear algebra solver library as well. These are, however, minimal, as you will see.</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Finally, we will reuse our <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/complete-walkthrough-adding-cmake-to-an-existing-library#aioseo-testing-our-newly-created-cmake-based-libraries" target="_blank" rel="noopener" title="">test project from the previous article</a> to test that both the mesh reading and linear algebra solver library were both successfully found and exposed by Conan so that CMake can make use of them.</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Let's get started and make dependency management an issue of the past!</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-creating-a-conan-receip">Creating a Conan recipe for our mesh reader library</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>This section will walk you through how to change the mesh reading library <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/complete-walkthrough-adding-cmake-to-an-existing-library#aioseo-preparing-the-mesh-reader-library" target="_blank" rel="noopener" title="">we have prepared in the previous article</a> so that we can use Conan not just to handle our required libraries for this project but also to expose it to other projects that may want to use it. There is a rather nice summary on how to do that over in the <a href="https://docs.conan.io/2/tutorial/creating_packages.html" target="_blank" rel="noopener" title="">Conan documentation</a> (which I am heavily leaning on in my write-up). Feel free to consult it for some more in-depth discussions; it is really well-written and worth a read!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>I am assuming you have Conan already installed, if not, you can read my write-up on <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/how-to-add-external-libraries-into-your-cfd-solver-using-cmake#aioseo-command-line-instruction-to-marry-cmake-with-conan-the-most-beautiful-day-of-your-and-my-life-dont-tell-my-wife" target="_blank" rel="noopener" title="">how to get started with Conan</a>, including the default profile you have to create before doing anything useful with Conan.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-creating-a-new-conan-package-from-scratch">Creating a new Conan package from scratch</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The first thing we need to do is to create a starter project from scratch. Conan does provide us with a handy command that we can use:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"conan new cmake_lib -d name=meshReaderLib -d version=1.0","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003econan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003enew\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003ecmake_lib\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-d\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003ename=meshReaderLib\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-d\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eversion=\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.0\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>conan new cmake_lib -d name=meshReaderLib -d version=1.0</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">conan</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">new</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">cmake_lib</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-d</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">name=meshReaderLib</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-d</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">version=</span><span style="color: #B5CEA8">1.0</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Here, <code>conan new</code> states that we want to create a new project, and the first argument to this command is the template we want to use. In our case, we want to create a CMake-based library, so our template is <code>cmake_lib</code>. Have a look at the <a href="https://docs.conan.io/2/reference/commands/new.html" target="_blank" rel="noopener" title="">conan new command</a> for all available templates. We provide two additional inputs: the name and version of the project. Once we have executed that command, we will create the following folder structure:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"root\n├── include/\n│   └── meshReaderLib.h\n├── src/\n│   └── meshReaderLib.cpp\n├── test_package/\n│   ├── src/\n│   │   └── example.cpp\n│   ├── CMakeLists.txt\n│   └── conanfile.py\n├── CMakeLists.txt\n└── conanfile.py","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eroot\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── include/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── meshReaderLib.h\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── src/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── meshReaderLib.cpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── test_package/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   ├── src/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   │   └── example.cpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   ├── CMakeLists.txt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── conanfile.py\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── CMakeLists.txt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e└── conanfile.py\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"plaintext","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":12,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>root
├── include/
│   └── meshReaderLib.h
├── src/
│   └── meshReaderLib.cpp
├── test_package/
│   ├── src/
│   │   └── example.cpp
│   ├── CMakeLists.txt
│   └── conanfile.py
├── CMakeLists.txt
└── conanfile.py</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">root</span></span>
<span class="line"><span style="color: #D4D4D4">├── include/</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── meshReaderLib.h</span></span>
<span class="line"><span style="color: #D4D4D4">├── src/</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── meshReaderLib.cpp</span></span>
<span class="line"><span style="color: #D4D4D4">├── test_package/</span></span>
<span class="line"><span style="color: #D4D4D4">│   ├── src/</span></span>
<span class="line"><span style="color: #D4D4D4">│   │   └── example.cpp</span></span>
<span class="line"><span style="color: #D4D4D4">│   ├── CMakeLists.txt</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── conanfile.py</span></span>
<span class="line"><span style="color: #D4D4D4">├── CMakeLists.txt</span></span>
<span class="line"><span style="color: #D4D4D4">└── conanfile.py</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We could go ahead and compile this project now using CMake, i.e. there is sensible content in each of these generated files. It is intended to be used to develop a library from scratch. However, we have already developed the library so we only need some parts of this generated project.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>In particular, we are interested in the <code>conanfile.py</code> and the <code>test_package/</code> folder. You have probably noticed that the <code>conanfile.py</code> shared close resemblance to the previously used <code>conanfile.txt</code>. Indeed, both of these are very similar. While the <code>conanfile.txt</code> is very rigid (we can only declare dependencies globally), the <code>conanfile.py</code> is much more flexible and allows, for example, to handle conditional dependencies based on the settings and platform. It also allows additional steps to package our own library and make it available to others!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Suffice it to say that if we want to export our own library to other users, we need to use the more flexible <code>conanfile.py</code>, and the file we have generated using <code>conan new</code> already has most of the boilerplate code inserted; all we have to do is provide the required dependencies and package information. The Conan documentation explains the details of the <code>conanfile.txt</code> and <code>conanfile.py</code> rather well, have a look if you are interested to learn more.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-project-structure">Project structure</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>In this section, I want to look at our modified project structure. We are not going through all the different folders again; we did have a deep-dive into them in the <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/complete-walkthrough-adding-cmake-to-an-existing-library#aioseo-preparing-the-mesh-reader-library" target="_blank" rel="noopener" title="">previous article</a>. I want to look at the changes only that we made, and this is shown in the modified project structure below (where the content of the folders we have looked at previously is left out and replaced by <code>...</code>).</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"root\n├── build/\n├── cmake/\n│   └── ...\n├── docs/\n│   └── ...\n├── mesh/\n│   └── ...\n├── meshReaderLib/\n│   └── ...\n├── test_package/\n│   ├── src/\n│   │   └── example.cpp\n│   ├── CMakeLists.txt\n│   ├── conanfile.py\n│   └── structured2D.cgns\n├── tests/\n│   └── ...\n├── ...\n└── conanfile.py","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eroot\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── build/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── cmake/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── docs/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── mesh/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── meshReaderLib/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── test_package/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   ├── src/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   │   └── example.cpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   ├── CMakeLists.txt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   ├── conanfile.py\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── structured2D.cgns\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── tests/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e└── conanfile.py\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"plaintext","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":20,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>root
├── build/
├── cmake/
│   └── ...
├── docs/
│   └── ...
├── mesh/
│   └── ...
├── meshReaderLib/
│   └── ...
├── test_package/
│   ├── src/
│   │   └── example.cpp
│   ├── CMakeLists.txt
│   ├── conanfile.py
│   └── structured2D.cgns
├── tests/
│   └── ...
├── ...
└── conanfile.py</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">root</span></span>
<span class="line"><span style="color: #D4D4D4">├── build/</span></span>
<span class="line"><span style="color: #D4D4D4">├── cmake/</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── ...</span></span>
<span class="line"><span style="color: #D4D4D4">├── docs/</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── ...</span></span>
<span class="line"><span style="color: #D4D4D4">├── mesh/</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── ...</span></span>
<span class="line"><span style="color: #D4D4D4">├── meshReaderLib/</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── ...</span></span>
<span class="line"><span style="color: #D4D4D4">├── test_package/</span></span>
<span class="line"><span style="color: #D4D4D4">│   ├── src/</span></span>
<span class="line"><span style="color: #D4D4D4">│   │   └── example.cpp</span></span>
<span class="line"><span style="color: #D4D4D4">│   ├── CMakeLists.txt</span></span>
<span class="line"><span style="color: #D4D4D4">│   ├── conanfile.py</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── structured2D.cgns</span></span>
<span class="line"><span style="color: #D4D4D4">├── tests/</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── ...</span></span>
<span class="line"><span style="color: #D4D4D4">├── ...</span></span>
<span class="line"><span style="color: #D4D4D4">└── conanfile.py</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>I have simply copied the <code>test_package/</code> folder into our mesh reading library folder, as well as the <code>conanfile.py</code>. You will later see that if you have both a <code>conanfile.py</code> and <code>conanfile.txt</code> in your project, you'll confuse Conan, and it will abort. You can safely remove the <code>conanfile.txt</code> at this point, as we will no longer need it.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>One additional file I have copied into the <code>test_package/</code> folder is the <code>structured2D.cgns</code> file which is coming from the <code>mesh/</code> directory. This will be used to test that we can open a mesh file, as you will see when we test the generated Conan package. For now, though, let us have a look at the <code>conanfile.py</code>, which is the main focus of this article.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-creating-the-top-level-conanfile-py">Creating the required instructions for Conan: conanfile.py</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>If you have never used Python before, then you may want to read up on, at least, the basics of Python. <a href="https://nerdparadise.com/programming/python4minutes/" target="_blank" rel="noopener" title="">Here is a 4-minute introduction</a>, which you can supplement with this <a href="https://www.geeksforgeeks.org/python-crash-course/" target="_blank" rel="noopener" title="">more advanced crash course</a>, which also covers <a href="https://www.geeksforgeeks.org/python-classes-and-objects/" target="_blank" rel="noopener" title="">object-orientated concepts</a>, i.e. classes. Well, I probably need my own series on Python for high-performance computing, don't I? It is on my to-do list ...</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you feel ready to be exposed to some Python code, let's have a look at the <code>conanfile.py</code> in the top-level directory, and then go through it afterwards, section by section:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"from conan import ConanFile\nfrom conan.tools.cmake import CMakeToolchain, CMake, cmake_layout, CMakeDeps\n\n\nclass meshReaderLibRecipe(ConanFile):\n    name = \u0022meshreaderlib\u0022\n    version = \u00221.0\u0022\n    package_type = \u0022library\u0022\n\n    # Optional metadata\n    license = \u0022MIT\u0022\n    author = \u0022Tom-Robin Teschner\u0022\n    url = \u0022https://cfd.university\u0022\n    description = \u0022A mesh reading library for multi-block structured and unstructured grids using the CGNS file format.\u0022\n    topics = (\u0022cfd\u0022, \u0022mesh\u0022, \u0022grids\u0022, \u0022cgns\u0022, \u0022structured\u0022, \u0022unstructured\u0022)\n\n    # Binary configuration\n    settings = \u0022os\u0022, \u0022compiler\u0022, \u0022build_type\u0022, \u0022arch\u0022\n    options = {\n        \u0022shared\u0022: [True, False],\n        \u0022fPIC\u0022: [True, False],\n        \u0022with_gtest\u0022: [True, False],\n        \u0022with_doxygen\u0022: [True, False]\n    }\n    default_options = {\n        \u0022shared\u0022: False,\n        \u0022fPIC\u0022: True,\n        \u0022with_gtest\u0022: True,\n        \u0022with_doxygen\u0022: False\n    }\n\n    # Sources are located in the same place as this recipe, copy them to the recipe\n    exports_sources = \u0022CMakeLists.txt\u0022, \u0022cmake/*\u0022, \u0022docs/*\u0022, \u0022tests/*\u0022, \u0022mesh/*\u0022, \u0022meshReaderLib/*\u0022\n\n    def config_options(self):\n        if self.settings.os == \u0022Windows\u0022:\n            self.options.rm_safe(\u0022fPIC\u0022)\n\n    def configure(self):\n        if self.options.shared:\n            self.options.rm_safe(\u0022fPIC\u0022)\n\n    def layout(self):\n        cmake_layout(self)\n\n    def requirements(self):\n        self.requires(\u0022cgns/4.3.0\u0022, transitive_headers=True)\n        if self.options.with_gtest:\n            self.requires(\u0022gtest/1.14.0\u0022, transitive_headers=True)\n    \n    def build_requirements(self):        \n        if self.options.with_doxygen:\n            self.requires(\u0022doxygen/1.9.4\u0022)\n\n    def generate(self):\n        deps = CMakeDeps(self)\n        deps.generate()\n        tc = CMakeToolchain(self)\n        tc.variables[\u0022ENABLE_SHARED\u0022] = self.options.shared\n        tc.variables[\u0022ENABLE_TESTS\u0022] = self.options.with_gtest\n        tc.variables[\u0022BUILD_DOCS\u0022] = self.options.with_doxygen\n        tc.generate()\n\n    def build(self):\n        cmake = CMake(self)\n        cmake.configure()\n        cmake.build()\n\n    def package(self):\n        cmake = CMake(self)\n        cmake.install()\n\n    def package_info(self):\n        # set global project settings\n        self.cpp_info.set_property(\u0022cmake_file_name\u0022, \u0022meshReaderLib\u0022)\n        self.cpp_info.set_property(\u0022cmake_target_name\u0022, \u0022meshReaderLib::meshReaderLib\u0022)\n\n        # handle Window's amazing naming convention for debug libraries\n        if self.settings.os == \u0022Windows\u0022 and self.settings.build_type == \u0022Debug\u0022:\n            self.cpp_info.libs = [\u0022meshReaderLibd\u0022]\n        else:\n            self.cpp_info.libs = [\u0022meshReaderLib\u0022]\n\n        # add pre-processor definitions to resolve __declspec()s correctly on Windows for shared libraries\n        if self.settings.os == \u0022Windows\u0022:\n            if self.options.shared:\n                self.cpp_info.defines = [\u0022COMPILEDLL\u0022]\n            else:\n                self.cpp_info.defines = [\u0022COMPILELIB\u0022]\n\n        # link against dependencies\n        self.cpp_info.requires = [\u0022cgns::cgns\u0022]\n\n        if self.options.with_gtest:\n            self.cpp_info.requires.append(\u0022gtest::gtest\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003efrom\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e conan \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eimport\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e ConanFile\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003efrom\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e conan.tools.cmake \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eimport\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e CMakeToolchain, CMake, cmake_layout, CMakeDeps\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eclass\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003emeshReaderLibRecipe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eConanFile\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    name = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;meshreaderlib\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    version = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;1.0\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    package_type = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;library\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Optional metadata\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003elicense\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;MIT\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    author = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Tom-Robin Teschner\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    url = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;https://cfd.university\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    description = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;A mesh reading library for multi-block structured and unstructured grids using the CGNS file format.\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    topics = (\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cfd\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;mesh\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;grids\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cgns\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;structured\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;unstructured\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Binary configuration\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    settings = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;os\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;compiler\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;build_type\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;arch\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    options = {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;shared\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: [\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eFalse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;fPIC\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: [\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eFalse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;with_gtest\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: [\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eFalse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;with_doxygen\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: [\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eFalse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    default_options = {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;shared\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eFalse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;fPIC\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;with_gtest\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;with_doxygen\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eFalse\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Sources are located in the same place as this recipe, copy them to the recipe\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    exports_sources = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;CMakeLists.txt\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cmake/*\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;docs/*\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;tests/*\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;mesh/*\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;meshReaderLib/*\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003econfig_options\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.settings.os == \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Windows\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.rm_safe(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;fPIC\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003econfigure\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.shared:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.rm_safe(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;fPIC\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003elayout\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake_layout(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003erequirements\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.requires(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cgns/4.3.0\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003etransitive_headers\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.with_gtest:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.requires(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;gtest/1.14.0\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003etransitive_headers\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ebuild_requirements\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):        \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.with_doxygen:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.requires(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;doxygen/1.9.4\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003egenerate\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        deps = CMakeDeps(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        deps.generate()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        tc = CMakeToolchain(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        tc.variables[\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;ENABLE_SHARED\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e] = \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.shared\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        tc.variables[\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;ENABLE_TESTS\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e] = \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.with_gtest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        tc.variables[\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;BUILD_DOCS\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e] = \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.with_doxygen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        tc.generate()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ebuild\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake = CMake(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake.configure()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake.build()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003epackage\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake = CMake(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake.install()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003epackage_info\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# set global project settings\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.set_property(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cmake_file_name\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;meshReaderLib\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.set_property(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cmake_target_name\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;meshReaderLib::meshReaderLib\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# handle Window\u0026#39;s amazing naming convention for debug libraries\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.settings.os == \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Windows\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eand\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.settings.build_type == \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Debug\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.libs = [\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;meshReaderLibd\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eelse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.libs = [\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;meshReaderLib\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# add pre-processor definitions to resolve __declspec()s correctly on Windows for shared libraries\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.settings.os == \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Windows\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.shared:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.defines = [\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;COMPILEDLL\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eelse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.defines = [\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;COMPILELIB\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# link against dependencies\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.requires = [\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cgns::cgns\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.with_gtest:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.requires.append(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;gtest::gtest\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":95,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>from conan import ConanFile
from conan.tools.cmake import CMakeToolchain, CMake, cmake_layout, CMakeDeps


class meshReaderLibRecipe(ConanFile):
    name = "meshreaderlib"
    version = "1.0"
    package_type = "library"

    # Optional metadata
    license = "MIT"
    author = "Tom-Robin Teschner"
    url = "https://cfd.university"
    description = "A mesh reading library for multi-block structured and unstructured grids using the CGNS file format."
    topics = ("cfd", "mesh", "grids", "cgns", "structured", "unstructured")

    # Binary configuration
    settings = "os", "compiler", "build_type", "arch"
    options = {
        "shared": [True, False],
        "fPIC": [True, False],
        "with_gtest": [True, False],
        "with_doxygen": [True, False]
    }
    default_options = {
        "shared": False,
        "fPIC": True,
        "with_gtest": True,
        "with_doxygen": False
    }

    # Sources are located in the same place as this recipe, copy them to the recipe
    exports_sources = "CMakeLists.txt", "cmake/*", "docs/*", "tests/*", "mesh/*", "meshReaderLib/*"

    def config_options(self):
        if self.settings.os == "Windows":
            self.options.rm_safe("fPIC")

    def configure(self):
        if self.options.shared:
            self.options.rm_safe("fPIC")

    def layout(self):
        cmake_layout(self)

    def requirements(self):
        self.requires("cgns/4.3.0", transitive_headers=True)
        if self.options.with_gtest:
            self.requires("gtest/1.14.0", transitive_headers=True)
    
    def build_requirements(self):        
        if self.options.with_doxygen:
            self.requires("doxygen/1.9.4")

    def generate(self):
        deps = CMakeDeps(self)
        deps.generate()
        tc = CMakeToolchain(self)
        tc.variables["ENABLE_SHARED"] = self.options.shared
        tc.variables["ENABLE_TESTS"] = self.options.with_gtest
        tc.variables["BUILD_DOCS"] = self.options.with_doxygen
        tc.generate()

    def build(self):
        cmake = CMake(self)
        cmake.configure()
        cmake.build()

    def package(self):
        cmake = CMake(self)
        cmake.install()

    def package_info(self):
        # set global project settings
        self.cpp_info.set_property("cmake_file_name", "meshReaderLib")
        self.cpp_info.set_property("cmake_target_name", "meshReaderLib::meshReaderLib")

        # handle Window's amazing naming convention for debug libraries
        if self.settings.os == "Windows" and self.settings.build_type == "Debug":
            self.cpp_info.libs = ["meshReaderLibd"]
        else:
            self.cpp_info.libs = ["meshReaderLib"]

        # add pre-processor definitions to resolve __declspec()s correctly on Windows for shared libraries
        if self.settings.os == "Windows":
            if self.options.shared:
                self.cpp_info.defines = ["COMPILEDLL"]
            else:
                self.cpp_info.defines = ["COMPILELIB"]

        # link against dependencies
        self.cpp_info.requires = ["cgns::cgns"]

        if self.options.with_gtest:
            self.cpp_info.requires.append("gtest::gtest")</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">from</span><span style="color: #D4D4D4"> conan </span><span style="color: #C586C0">import</span><span style="color: #D4D4D4"> ConanFile</span></span>
<span class="line"><span style="color: #C586C0">from</span><span style="color: #D4D4D4"> conan.tools.cmake </span><span style="color: #C586C0">import</span><span style="color: #D4D4D4"> CMakeToolchain, CMake, cmake_layout, CMakeDeps</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">class</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">meshReaderLibRecipe</span><span style="color: #D4D4D4">(</span><span style="color: #4EC9B0">ConanFile</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">    name = </span><span style="color: #CE9178">&quot;meshreaderlib&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    version = </span><span style="color: #CE9178">&quot;1.0&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    package_type = </span><span style="color: #CE9178">&quot;library&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #6A9955"># Optional metadata</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">license</span><span style="color: #D4D4D4"> = </span><span style="color: #CE9178">&quot;MIT&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    author = </span><span style="color: #CE9178">&quot;Tom-Robin Teschner&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    url = </span><span style="color: #CE9178">&quot;https://cfd.university&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    description = </span><span style="color: #CE9178">&quot;A mesh reading library for multi-block structured and unstructured grids using the CGNS file format.&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    topics = (</span><span style="color: #CE9178">&quot;cfd&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;mesh&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;grids&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;cgns&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;structured&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;unstructured&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #6A9955"># Binary configuration</span></span>
<span class="line"><span style="color: #D4D4D4">    settings = </span><span style="color: #CE9178">&quot;os&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;compiler&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;build_type&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;arch&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    options = {</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;shared&quot;</span><span style="color: #D4D4D4">: [</span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">False</span><span style="color: #D4D4D4">],</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;fPIC&quot;</span><span style="color: #D4D4D4">: [</span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">False</span><span style="color: #D4D4D4">],</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;with_gtest&quot;</span><span style="color: #D4D4D4">: [</span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">False</span><span style="color: #D4D4D4">],</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;with_doxygen&quot;</span><span style="color: #D4D4D4">: [</span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">False</span><span style="color: #D4D4D4">]</span></span>
<span class="line"><span style="color: #D4D4D4">    }</span></span>
<span class="line"><span style="color: #D4D4D4">    default_options = {</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;shared&quot;</span><span style="color: #D4D4D4">: </span><span style="color: #569CD6">False</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;fPIC&quot;</span><span style="color: #D4D4D4">: </span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;with_gtest&quot;</span><span style="color: #D4D4D4">: </span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;with_doxygen&quot;</span><span style="color: #D4D4D4">: </span><span style="color: #569CD6">False</span></span>
<span class="line"><span style="color: #D4D4D4">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #6A9955"># Sources are located in the same place as this recipe, copy them to the recipe</span></span>
<span class="line"><span style="color: #D4D4D4">    exports_sources = </span><span style="color: #CE9178">&quot;CMakeLists.txt&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;cmake/*&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;docs/*&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;tests/*&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;mesh/*&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;meshReaderLib/*&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">config_options</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.settings.os == </span><span style="color: #CE9178">&quot;Windows&quot;</span><span style="color: #D4D4D4">:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.rm_safe(</span><span style="color: #CE9178">&quot;fPIC&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">configure</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.shared:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.rm_safe(</span><span style="color: #CE9178">&quot;fPIC&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">layout</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake_layout(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">requirements</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.requires(</span><span style="color: #CE9178">&quot;cgns/4.3.0&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">transitive_headers</span><span style="color: #D4D4D4">=</span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.with_gtest:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.requires(</span><span style="color: #CE9178">&quot;gtest/1.14.0&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">transitive_headers</span><span style="color: #D4D4D4">=</span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">    </span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">build_requirements</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):        </span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.with_doxygen:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.requires(</span><span style="color: #CE9178">&quot;doxygen/1.9.4&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">generate</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        deps = CMakeDeps(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        deps.generate()</span></span>
<span class="line"><span style="color: #D4D4D4">        tc = CMakeToolchain(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        tc.variables[</span><span style="color: #CE9178">&quot;ENABLE_SHARED&quot;</span><span style="color: #D4D4D4">] = </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.shared</span></span>
<span class="line"><span style="color: #D4D4D4">        tc.variables[</span><span style="color: #CE9178">&quot;ENABLE_TESTS&quot;</span><span style="color: #D4D4D4">] = </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.with_gtest</span></span>
<span class="line"><span style="color: #D4D4D4">        tc.variables[</span><span style="color: #CE9178">&quot;BUILD_DOCS&quot;</span><span style="color: #D4D4D4">] = </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.with_doxygen</span></span>
<span class="line"><span style="color: #D4D4D4">        tc.generate()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">build</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake = CMake(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake.configure()</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake.build()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">package</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake = CMake(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake.install()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">package_info</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #6A9955"># set global project settings</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.set_property(</span><span style="color: #CE9178">&quot;cmake_file_name&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;meshReaderLib&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.set_property(</span><span style="color: #CE9178">&quot;cmake_target_name&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;meshReaderLib::meshReaderLib&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #6A9955"># handle Window&#39;s amazing naming convention for debug libraries</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.settings.os == </span><span style="color: #CE9178">&quot;Windows&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">and</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.settings.build_type == </span><span style="color: #CE9178">&quot;Debug&quot;</span><span style="color: #D4D4D4">:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.libs = [</span><span style="color: #CE9178">&quot;meshReaderLibd&quot;</span><span style="color: #D4D4D4">]</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">else</span><span style="color: #D4D4D4">:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.libs = [</span><span style="color: #CE9178">&quot;meshReaderLib&quot;</span><span style="color: #D4D4D4">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #6A9955"># add pre-processor definitions to resolve __declspec()s correctly on Windows for shared libraries</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.settings.os == </span><span style="color: #CE9178">&quot;Windows&quot;</span><span style="color: #D4D4D4">:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.shared:</span></span>
<span class="line"><span style="color: #D4D4D4">                </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.defines = [</span><span style="color: #CE9178">&quot;COMPILEDLL&quot;</span><span style="color: #D4D4D4">]</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #C586C0">else</span><span style="color: #D4D4D4">:</span></span>
<span class="line"><span style="color: #D4D4D4">                </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.defines = [</span><span style="color: #CE9178">&quot;COMPILELIB&quot;</span><span style="color: #D4D4D4">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #6A9955"># link against dependencies</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.requires = [</span><span style="color: #CE9178">&quot;cgns::cgns&quot;</span><span style="color: #D4D4D4">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.with_gtest:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.requires.append(</span><span style="color: #CE9178">&quot;gtest::gtest&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-import-statements-class-declaration-and-class-variables">Import statements, class declaration, and class variables</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>First, we provide a few <code>import</code> statements, which are equivalent to <code>#include "file-name.hpp"</code> and linking to a library in C++ at the same time, and then declare our <code>meshReaderLibRecipe</code> class, which inherits from the <code>ConanFile</code> class:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"from conan import ConanFile\nfrom conan.tools.cmake import CMakeToolchain, CMake, cmake_layout, CMakeDeps\n\n\nclass meshReaderLibRecipe(ConanFile):","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003efrom\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e conan \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eimport\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e ConanFile\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003efrom\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e conan.tools.cmake \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eimport\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e CMakeToolchain, CMake, cmake_layout, CMakeDeps\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eclass\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003emeshReaderLibRecipe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eConanFile\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":5,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>from conan import ConanFile
from conan.tools.cmake import CMakeToolchain, CMake, cmake_layout, CMakeDeps


class meshReaderLibRecipe(ConanFile):</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">from</span><span style="color: #D4D4D4"> conan </span><span style="color: #C586C0">import</span><span style="color: #D4D4D4"> ConanFile</span></span>
<span class="line"><span style="color: #C586C0">from</span><span style="color: #D4D4D4"> conan.tools.cmake </span><span style="color: #C586C0">import</span><span style="color: #D4D4D4"> CMakeToolchain, CMake, cmake_layout, CMakeDeps</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">class</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">meshReaderLibRecipe</span><span style="color: #D4D4D4">(</span><span style="color: #4EC9B0">ConanFile</span><span style="color: #D4D4D4">):</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>This is followed by some public attributes (variables) in our class, that define things like the name and version of the library, the license, author, URL for additional information, as well as a description and a list of topics that this library falls in to.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"    name = \u0022meshreaderlib\u0022\n    version = \u00221.0\u0022\n    package_type = \u0022library\u0022\n\n    # Optional metadata\n    license = \u0022MIT\u0022\n    author = \u0022Tom-Robin Teschner\u0022\n    url = \u0022https://cfd.university\u0022\n    description = \u0022A mesh reading library for multi-block structured and unstructured grids using the CGNS file format.\u0022\n    topics = (\u0022cfd\u0022, \u0022mesh\u0022, \u0022grids\u0022, \u0022cgns\u0022, \u0022structured\u0022, \u0022unstructured\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    name = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;meshreaderlib\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    version = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;1.0\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    package_type = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;library\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Optional metadata\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003elicense\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;MIT\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    author = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Tom-Robin Teschner\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    url = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;https://cfd.university\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    description = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;A mesh reading library for multi-block structured and unstructured grids using the CGNS file format.\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    topics = (\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cfd\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;mesh\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;grids\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cgns\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;structured\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;unstructured\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":10,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>    name = "meshreaderlib"
    version = "1.0"
    package_type = "library"

    # Optional metadata
    license = "MIT"
    author = "Tom-Robin Teschner"
    url = "https://cfd.university"
    description = "A mesh reading library for multi-block structured and unstructured grids using the CGNS file format."
    topics = ("cfd", "mesh", "grids", "cgns", "structured", "unstructured")</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">    name = </span><span style="color: #CE9178">&quot;meshreaderlib&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    version = </span><span style="color: #CE9178">&quot;1.0&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    package_type = </span><span style="color: #CE9178">&quot;library&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #6A9955"># Optional metadata</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">license</span><span style="color: #D4D4D4"> = </span><span style="color: #CE9178">&quot;MIT&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    author = </span><span style="color: #CE9178">&quot;Tom-Robin Teschner&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    url = </span><span style="color: #CE9178">&quot;https://cfd.university&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    description = </span><span style="color: #CE9178">&quot;A mesh reading library for multi-block structured and unstructured grids using the CGNS file format.&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    topics = (</span><span style="color: #CE9178">&quot;cfd&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;mesh&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;grids&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;cgns&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;structured&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;unstructured&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Next, we specify some settings and options. We have seen them, to some extend, already before but here is a more detailed differentiation: Settings are platform specific. They can change for different users (i.e. they may have different operating systems) but once set for a project, they will not change (i.e. you would not change the operating system or architecture during your project).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Options, on the other hand, are project-specific and can change during the compilation. These are things like building a shared (dynamic) or static library, enabling tests and documentation, and so on. These are the settings and options specified in our project:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"    # Binary configuration\n    settings = \u0022os\u0022, \u0022compiler\u0022, \u0022build_type\u0022, \u0022arch\u0022\n    options = {\n        \u0022shared\u0022: [True, False],\n        \u0022fPIC\u0022: [True, False],\n        \u0022with_gtest\u0022: [True, False],\n        \u0022with_doxygen\u0022: [True, False]\n    }\n    default_options = {\n        \u0022shared\u0022: False,\n        \u0022fPIC\u0022: True,\n        \u0022with_gtest\u0022: False,\n        \u0022with_doxygen\u0022: False\n    }","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Binary configuration\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    settings = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;os\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;compiler\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;build_type\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;arch\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    options = {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;shared\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: [\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eFalse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;fPIC\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: [\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eFalse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;with_gtest\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: [\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eFalse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;with_doxygen\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: [\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eFalse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    default_options = {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;shared\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eFalse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;fPIC\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;with_gtest\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eFalse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;with_doxygen\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eFalse\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    }\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":14,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>    # Binary configuration
    settings = "os", "compiler", "build_type", "arch"
    options = {
        "shared": [True, False],
        "fPIC": [True, False],
        "with_gtest": [True, False],
        "with_doxygen": [True, False]
    }
    default_options = {
        "shared": False,
        "fPIC": True,
        "with_gtest": False,
        "with_doxygen": False
    }</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">    </span><span style="color: #6A9955"># Binary configuration</span></span>
<span class="line"><span style="color: #D4D4D4">    settings = </span><span style="color: #CE9178">&quot;os&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;compiler&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;build_type&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;arch&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    options = {</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;shared&quot;</span><span style="color: #D4D4D4">: [</span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">False</span><span style="color: #D4D4D4">],</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;fPIC&quot;</span><span style="color: #D4D4D4">: [</span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">False</span><span style="color: #D4D4D4">],</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;with_gtest&quot;</span><span style="color: #D4D4D4">: [</span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">False</span><span style="color: #D4D4D4">],</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;with_doxygen&quot;</span><span style="color: #D4D4D4">: [</span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">False</span><span style="color: #D4D4D4">]</span></span>
<span class="line"><span style="color: #D4D4D4">    }</span></span>
<span class="line"><span style="color: #D4D4D4">    default_options = {</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;shared&quot;</span><span style="color: #D4D4D4">: </span><span style="color: #569CD6">False</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;fPIC&quot;</span><span style="color: #D4D4D4">: </span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;with_gtest&quot;</span><span style="color: #D4D4D4">: </span><span style="color: #569CD6">False</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #CE9178">&quot;with_doxygen&quot;</span><span style="color: #D4D4D4">: </span><span style="color: #569CD6">False</span></span>
<span class="line"><span style="color: #D4D4D4">    }</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>This is generated by the <code>conan new</code> command, the only additions are the <code>with_gtest</code> and <code>with_doxygen</code> variables that I have added. We see that we specify the available options in the <code>options</code> <a href="https://www.w3schools.com/python/python_dictionaries.asp">dictionary</a> (which is equivalent to a C++ <code>std::map</code>), and then we set the default options in the <code>default_options</code> dictionary, i.e. these will be used if we do not specify them on the command line.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>I have set <code>with_doxygen</code> to <code>False</code> by default, as it will break the build process; let me elaborate: The CGNS library is linked against the mesh reader library, and we need it, so it is not an option. GTest, however, is only required if we want to build the tests (and it is typical not to install them at this stage where we provide the library to our users through Conan; we'd hope that it has been thoroughly tested and it shouldn't be the responsibility of our users to test everything). So we set this to <code>False</code> by default (but setting it to <code>True</code> will work just fine).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Doxygen, however, is not a library but rather an executable. When we had our <code>conanfile.txt</code> before, we would list Doxygen as a tool instead of a library, and we had to execute the <code>conanbuild.ps1</code> or <code>conanbuild.sh</code> to discover the executable. This was working fine; however, when we create our mesh reading library with the <code>conanfile.py</code> that we have just created, then Conan will set its own environment in which Doxygen is not loaded. Subsequently, the Doxygen executable will never be found, and the entire package will not install.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><a href="https://github.com/conan-io/cmake-conan/issues/330" target="_blank" rel="noopener" title="">This seems to be an issue with Conan</a> and we can't simply fix it within our recipe. It would be ridiculous not to be able to install the library if we can't find Doxygen, which is not an essential part of the build process anyway. We could change our CMake file to only build the documentation if Doxygen was found, but that means we set <code>with_doxygen</code> to <code>True</code> in our options, we think the documentation will be generated and then we can't find it.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>So, the solution to this problem is to install Doxygen systemwide (use your favourite package manager, i.e. <code>winget</code>, <code>brew</code>, <code>apt</code>, etc.). If Doxygen can be discovered somewhere on your system, you'll be able to build the documentation again and can set <code>with_doxygen</code> to <code>True</code>, otherwise, leave it to <code>False</code> and develop a minute grudge over Conan.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-declaring-required-source-files">Declaring required source files</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Moving on, we have to declare the sources that we need to build this project. It is similar to the install step in CMake, where we have to specify which header files, executables or libraries, and additional files (e.g. documentation) we need to build this project from source successfully. Think about it this way: If you were to copy this project somewhere else to build it (this is what Conan will do), which files (and folders) do you need to copy to ensure you can compile everything from scratch? All these files go into the <code>exports_sources</code> variable.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"    # Sources are located in the same place as this recipe, copy them to the recipe\n    exports_sources = \u0022CMakeLists.txt\u0022, \u0022cmake/*\u0022, \u0022docs/*\u0022, \u0022tests/*\u0022, \u0022mesh/*\u0022, \u0022meshReaderLib/*\u0022","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Sources are located in the same place as this recipe, copy them to the recipe\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    exports_sources = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;CMakeLists.txt\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cmake/*\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;docs/*\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;tests/*\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;mesh/*\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;meshReaderLib/*\u0026quot;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":2,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>    # Sources are located in the same place as this recipe, copy them to the recipe
    exports_sources = "CMakeLists.txt", "cmake/*", "docs/*", "tests/*", "mesh/*", "meshReaderLib/*"</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">    </span><span style="color: #6A9955"># Sources are located in the same place as this recipe, copy them to the recipe</span></span>
<span class="line"><span style="color: #D4D4D4">    exports_sources = </span><span style="color: #CE9178">&quot;CMakeLists.txt&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;cmake/*&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;docs/*&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;tests/*&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;mesh/*&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;meshReaderLib/*&quot;</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Conan is actually more powerful here, and under normal circumstances, you would likely not define the <code>exports_sources</code> variable at all, but instead provide a <code>build()</code> function that downloads the source code from a remote repository, which is then used instead. For example, if we wanted to provide our own Conan recipe for the CGNS library, we could have the following <code>build()</code> method:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"from conan.tools.scm import Git\n\nclass cgnsRecipe(ConanFile):\n    name = \u0022CGNS\u0022\n    version = \u00224.4.0\u0022\n\n    ...\n\n    def source(self):\n        git = Git(self)\n        git.clone(url=\u0022https://github.com/CGNS/CGNS.git\u0022, target=\u0022.\u0022)\n        git.checkout(\u0022v4.4.0\u0022)\n\n    ...","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003efrom\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e conan.tools.scm \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eimport\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e Git\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eclass\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003ecgnsRecipe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eConanFile\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    name = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;CGNS\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    version = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;4.4.0\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003esource\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        git = Git(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        git.clone(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eurl\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;https://github.com/CGNS/CGNS.git\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003etarget\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;.\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        git.checkout(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;v4.4.0\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    ...\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":14,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>from conan.tools.scm import Git

class cgnsRecipe(ConanFile):
    name = "CGNS"
    version = "4.4.0"

    ...

    def source(self):
        git = Git(self)
        git.clone(url="https://github.com/CGNS/CGNS.git", target=".")
        git.checkout("v4.4.0")

    ...</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">from</span><span style="color: #D4D4D4"> conan.tools.scm </span><span style="color: #C586C0">import</span><span style="color: #D4D4D4"> Git</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">class</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">cgnsRecipe</span><span style="color: #D4D4D4">(</span><span style="color: #4EC9B0">ConanFile</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">    name = </span><span style="color: #CE9178">&quot;CGNS&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    version = </span><span style="color: #CE9178">&quot;4.4.0&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">source</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        git = Git(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        git.clone(</span><span style="color: #9CDCFE">url</span><span style="color: #D4D4D4">=</span><span style="color: #CE9178">&quot;https://github.com/CGNS/CGNS.git&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">target</span><span style="color: #D4D4D4">=</span><span style="color: #CE9178">&quot;.&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        git.checkout(</span><span style="color: #CE9178">&quot;v4.4.0&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    ...</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Here, we are telling Conan to use <a href="https://docs.conan.io/2/reference/tools/scm/git.html" target="_blank" rel="noopener" title="">Git</a> and which repository we want to clone (download), where we want to download it to (indicated by the target, i.e. here into the current folder indicated by the dot (<code>.</code>)), as well as which tag or commit in particular we want to check out and use. Then, we can proceed as normal.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>One last thing about getting sources: Conan also provides support to extend the recipe easily for multiple versions of the library, in this way, you can provide a range of versions that your (Conan) users can make use of in their project. For that, we need to provide a <code>conandata.yml</code> file, where the extension <code>*.yml</code> stands for YAML (yet another markup language), and it is very similar to a JSON file that we have seen previously. And if you don't know what JSON files are, think: Configuration file.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>For the CGNS library, we may have the following <code>conandata.yml</code> file (which will be located in the same folder as the <code>conanfile.py</code>):</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"sources:\n  \u00224.3.0\u0022:\n    url: \u0022https://github.com/CGNS/CGNS/archive/refs/tags/v4.3.0.zip\u0022\n    sha256: \u00227c8fbd44f3efa99d83b87f009df50813a04491e6e89d3bfef110c5dc27cf1623\u0022\n    strip_root: true\n  \u00224.4.0\u0022:\n    url: \u0022https://github.com/CGNS/CGNS/archive/refs/tags/v4.4.0.zip\u0022\n    sha256: \u002272ad499936089102c1d77e3cdd78a623d61d1c6ad94c4df3b23f36db9ddfad6a\u0022\n    strip_root: true","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003esources\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;4.3.0\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eurl\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;https://github.com/CGNS/CGNS/archive/refs/tags/v4.3.0.zip\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003esha256\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;7c8fbd44f3efa99d83b87f009df50813a04491e6e89d3bfef110c5dc27cf1623\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003estrip_root\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003etrue\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;4.4.0\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eurl\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;https://github.com/CGNS/CGNS/archive/refs/tags/v4.4.0.zip\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003esha256\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;72ad499936089102c1d77e3cdd78a623d61d1c6ad94c4df3b23f36db9ddfad6a\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003estrip_root\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003etrue\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"yaml","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":9,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>sources:
  "4.3.0":
    url: "https://github.com/CGNS/CGNS/archive/refs/tags/v4.3.0.zip"
    sha256: "7c8fbd44f3efa99d83b87f009df50813a04491e6e89d3bfef110c5dc27cf1623"
    strip_root: true
  "4.4.0":
    url: "https://github.com/CGNS/CGNS/archive/refs/tags/v4.4.0.zip"
    sha256: "72ad499936089102c1d77e3cdd78a623d61d1c6ad94c4df3b23f36db9ddfad6a"
    strip_root: true</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">sources</span><span style="color: #D4D4D4">:</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">&quot;4.3.0&quot;</span><span style="color: #D4D4D4">:</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">url</span><span style="color: #D4D4D4">: </span><span style="color: #CE9178">&quot;https://github.com/CGNS/CGNS/archive/refs/tags/v4.3.0.zip&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">sha256</span><span style="color: #D4D4D4">: </span><span style="color: #CE9178">&quot;7c8fbd44f3efa99d83b87f009df50813a04491e6e89d3bfef110c5dc27cf1623&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">strip_root</span><span style="color: #D4D4D4">: </span><span style="color: #569CD6">true</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">&quot;4.4.0&quot;</span><span style="color: #D4D4D4">:</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">url</span><span style="color: #D4D4D4">: </span><span style="color: #CE9178">&quot;https://github.com/CGNS/CGNS/archive/refs/tags/v4.4.0.zip&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">sha256</span><span style="color: #D4D4D4">: </span><span style="color: #CE9178">&quot;72ad499936089102c1d77e3cdd78a623d61d1c6ad94c4df3b23f36db9ddfad6a&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">strip_root</span><span style="color: #D4D4D4">: </span><span style="color: #569CD6">true</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Now, we can make use of this in our <code>build()</code> function as follows:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"...\n\nclass cgnsRecipe(ConanFile):\n    name = \u0022CGNS\u0022\n    version = \u00224.4.0\u0022\n    \n    ...\n\ndef source(self):\n    data = self.conan_data[\u0022sources\u0022][self.version]\n    get(self, data[\u0022url\u0022], sha256=data[\u0022sha256\u0022], strip_root=data[\u0022strip_root\u0022])\n    \n    ...","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eclass\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003ecgnsRecipe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eConanFile\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    name = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;CGNS\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    version = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;4.4.0\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003esource\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    data = \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.conan_data[\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;sources\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e][\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.version]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    get(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, data[\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;url\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e], \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003esha256\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e=data[\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;sha256\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e], \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003estrip_root\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e=data[\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;strip_root\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e])\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    ...\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":13,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>...

class cgnsRecipe(ConanFile):
    name = "CGNS"
    version = "4.4.0"
    
    ...

def source(self):
    data = self.conan_data["sources"][self.version]
    get(self, data["url"], sha256=data["sha256"], strip_root=data["strip_root"])
    
    ...</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">class</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">cgnsRecipe</span><span style="color: #D4D4D4">(</span><span style="color: #4EC9B0">ConanFile</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">    name = </span><span style="color: #CE9178">&quot;CGNS&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    version = </span><span style="color: #CE9178">&quot;4.4.0&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span></span>
<span class="line"><span style="color: #D4D4D4">    ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">source</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">    data = </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.conan_data[</span><span style="color: #CE9178">&quot;sources&quot;</span><span style="color: #D4D4D4">][</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.version]</span></span>
<span class="line"><span style="color: #D4D4D4">    get(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">, data[</span><span style="color: #CE9178">&quot;url&quot;</span><span style="color: #D4D4D4">], </span><span style="color: #9CDCFE">sha256</span><span style="color: #D4D4D4">=data[</span><span style="color: #CE9178">&quot;sha256&quot;</span><span style="color: #D4D4D4">], </span><span style="color: #9CDCFE">strip_root</span><span style="color: #D4D4D4">=data[</span><span style="color: #CE9178">&quot;strip_root&quot;</span><span style="color: #D4D4D4">])</span></span>
<span class="line"><span style="color: #D4D4D4">    </span></span>
<span class="line"><span style="color: #D4D4D4">    ...</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Conan will now look specifically for an entry titled <code>4.4.0</code> within the <code>sources</code> entry in the <code>conandata.yml</code> file and get the required download information this way. It is handy if you want to keep your recipe unmodified (apart from changing the version) and then have a separate file that allows you to add additional versions as you need. You can even further shortcut this with the <a href="https://docs.conan.io/2/reference/tools/files/patches.html#conan-tools-files-export-conandata-patches" target="_blank" rel="noopener" title=""><code>export_conandata_patches()</code> function</a>, which will essentially replace lines 10-11 above and look for the right version automatically. This is what the <a href="https://github.com/conan-io/conan-center-index/blob/master/recipes/cgns/all/conanfile.py" target="_blank" rel="noopener" title="">CGNS recipe</a> is doing.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This was a crash course in handling sources with Conan and mainly intended to show you what we can do here, as our <code>exports_sources</code> variable makes sense in our case, but most likely, you will see a link to a repository within a <code>build()</code> method instead. If you want to take a closer look, feel free to look up the <a href="https://docs.conan.io/2/tutorial/creating_packages/handle_sources_in_packages.html#" target="_blank" rel="noopener" title="">source handling section</a> in the Conan documentation.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-information-for-the">Information for the configuration step</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>There are a few functions we use to help with the project configuration. First, we have the <code>config_options()</code> and <code>configure()</code> functions, which may seem very similar. Looking at the <a href="https://docs.conan.io/2/tutorial/creating_packages/configure_options_settings.html" target="_blank" rel="noopener" title="">relevant section in the Conan documentation</a>, we see that <code>config_options()</code> is used to look at the available project options and remove any that may not make sense for the current settings while <code>configure()</code> is used to, well, configure the remaining ones. In our case, we leave the defaults for both options provided to us by Conan:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"    def config_options(self):\n        if self.settings.os == \u0022Windows\u0022:\n            self.options.rm_safe(\u0022fPIC\u0022)\n\n    def configure(self):\n        if self.options.shared:\n            self.options.rm_safe(\u0022fPIC\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003econfig_options\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.settings.os == \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Windows\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.rm_safe(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;fPIC\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003econfigure\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.shared:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.rm_safe(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;fPIC\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":7,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>    def config_options(self):
        if self.settings.os == "Windows":
            self.options.rm_safe("fPIC")

    def configure(self):
        if self.options.shared:
            self.options.rm_safe("fPIC")</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">config_options</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.settings.os == </span><span style="color: #CE9178">&quot;Windows&quot;</span><span style="color: #D4D4D4">:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.rm_safe(</span><span style="color: #CE9178">&quot;fPIC&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">configure</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.shared:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.rm_safe(</span><span style="color: #CE9178">&quot;fPIC&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We specify the layout of our build folder using the <code>layout()</code> function. This will determine how the generated files will be written to disk (i.e. what folder structure to apply). Since we are using CMake, Conan will automatically dump all files within a <code>build/</code> folder, as this is what CMake is expecting (if we specified Meson, for example, this would be <code>builddir/</code> as this is Meson's default). The internal structure within the <code>build/</code> folder will also be adjusted, instead of dumping everything into the <code>build/</code> folder itself.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"    def layout(self):\n        cmake_layout(self)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003elayout\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake_layout(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":2,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>    def layout(self):
        cmake_layout(self)</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">layout</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake_layout(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>As a side note, within our <code>conanfile.txt</code> file, we can also specify a section called <code>[layout]</code> and then pass <code>cmake_layout</code> as the layout option, which will achieve the same. I have not used that in any of our previous Conan examples, but you will see this popping up in <a href="https://conan.io/center" target="_blank" rel="noopener" title="">Conan central</a> if you look for example usages. It is not required, but, well, most people will expect this layout if they are already using Conan and other CMake-based projects, so let's be kind to them and give them what they expect.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Finally, we need to tell our project what dependencies we have, and we can split these into the <code>requirements()</code> and <code>build_requirements()</code> functions. The difference here is that the <code>requirements()</code> function lists all dependencies that we would list under the <code>[requires]</code> section in our <code>conanfile.txt</code> (i.e. libraries), while the <code>build_requirements()</code> function lists all dependencies we need to build our project, which would go under <code>[tool_requires]</code> (i.e. executables).</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"    def requirements(self):\n        self.requires(\u0022cgns/4.3.0\u0022, transitive_headers=True)\n        if self.options.with_gtest:\n            self.requires(\u0022gtest/1.14.0\u0022, transitive_headers=True)\n    \n    def build_requirements(self):        \n        if self.options.with_doxygen:\n            self.requires(\u0022doxygen/1.9.4\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003erequirements\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.requires(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cgns/4.3.0\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003etransitive_headers\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.with_gtest:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.requires(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;gtest/1.14.0\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003etransitive_headers\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ebuild_requirements\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):        \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.with_doxygen:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.requires(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;doxygen/1.9.4\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":8,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>    def requirements(self):
        self.requires("cgns/4.3.0", transitive_headers=True)
        if self.options.with_gtest:
            self.requires("gtest/1.14.0", transitive_headers=True)
    
    def build_requirements(self):        
        if self.options.with_doxygen:
            self.requires("doxygen/1.9.4")</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">requirements</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.requires(</span><span style="color: #CE9178">&quot;cgns/4.3.0&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">transitive_headers</span><span style="color: #D4D4D4">=</span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.with_gtest:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.requires(</span><span style="color: #CE9178">&quot;gtest/1.14.0&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">transitive_headers</span><span style="color: #D4D4D4">=</span><span style="color: #569CD6">True</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">    </span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">build_requirements</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):        </span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.with_doxygen:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.requires(</span><span style="color: #CE9178">&quot;doxygen/1.9.4&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Since we can decide if we want to use GTest and Doxygen in our build, we first check if this option was set to true and only then do we require it in our build. Hmm, what on earth are <code>transitive_headers</code> I hear you ask? Don't get me started. That was probably a good two days of debugging Conan and CMake.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>In a nutshell, when you build a project that depends on a library (in our case, the mesh reader library we are developing depends on the CGNS library), then Conan will forward all libraries (e.g. <code>cgns.lib</code> or <code>libcgns.a</code>) to our mesh reader library, but not their header files. So when we have an <code>#include "cgnslib.h"</code> statement somewhere in our code, CMake does not know where to find this file as Conan refuses to provide that information (but it has no problem telling CMake where to find the library and how to link against it!)</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>To overcome this issue, we can set the <code>transitive_header</code> variable to <code>True</code>, which, to someone at Conan, made sense. I learned about this from a <a href="https://github.com/conan-io/conan/issues/13308" target="_blank" rel="noopener" title="">bug report on Conan's Git repository</a>. Yes, someone pointed out that they have found a bug in Conan, and the developer got back and essentially replied "it's not a bug, it's a feature!" (and changed the bug report to a question ...). Great, Conan is expecting requirements to break as soon as you use them unless you change the default behaviour! Software engineering at its best!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We don't need to forward any headers for Doxygen, as we only work with its executable, which already contains all the information to run automatically without dependencies.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Finally, the configuration step is brought to a close with the <code>generate()</code> function, which, in our case, will create the CMake toolchain file that will contain all the locations of our libraries in our local Conan cache, as well as any project-specific variables we need to set in our CMake environment. This function is shown below:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"    def generate(self):\n        deps = CMakeDeps(self)\n        deps.generate()\n        tc = CMakeToolchain(self)\n        tc.variables[\u0022ENABLE_SHARED\u0022] = self.options.shared\n        tc.variables[\u0022ENABLE_TESTS\u0022] = self.options.with_gtest\n        tc.variables[\u0022BUILD_DOCS\u0022] = self.options.with_doxygen\n        tc.generate()","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003egenerate\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        deps = CMakeDeps(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        deps.generate()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        tc = CMakeToolchain(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        tc.variables[\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;ENABLE_SHARED\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e] = \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.shared\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        tc.variables[\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;ENABLE_TESTS\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e] = \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.with_gtest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        tc.variables[\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;BUILD_DOCS\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e] = \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.with_doxygen\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        tc.generate()\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":8,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>    def generate(self):
        deps = CMakeDeps(self)
        deps.generate()
        tc = CMakeToolchain(self)
        tc.variables["ENABLE_SHARED"] = self.options.shared
        tc.variables["ENABLE_TESTS"] = self.options.with_gtest
        tc.variables["BUILD_DOCS"] = self.options.with_doxygen
        tc.generate()</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">generate</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        deps = CMakeDeps(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        deps.generate()</span></span>
<span class="line"><span style="color: #D4D4D4">        tc = CMakeToolchain(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        tc.variables[</span><span style="color: #CE9178">&quot;ENABLE_SHARED&quot;</span><span style="color: #D4D4D4">] = </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.shared</span></span>
<span class="line"><span style="color: #D4D4D4">        tc.variables[</span><span style="color: #CE9178">&quot;ENABLE_TESTS&quot;</span><span style="color: #D4D4D4">] = </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.with_gtest</span></span>
<span class="line"><span style="color: #D4D4D4">        tc.variables[</span><span style="color: #CE9178">&quot;BUILD_DOCS&quot;</span><span style="color: #D4D4D4">] = </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.with_doxygen</span></span>
<span class="line"><span style="color: #D4D4D4">        tc.generate()</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>The <code>CMakeDeps</code> generator will create all required files for CMake to find the required dependencies (these are the <code>&lt;package-name&gt;Config.cmake</code> files we wrote manually during our <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/how-to-compile-install-and-use-custom-libraries-with-cmake#aioseo-cmake-build-scripts" target="_blank" rel="noopener" title="">install article</a>). This allows CMake to know where to find specific libraries, and we can simply write <code>find_package(&lt;library-name&gt; REQUIRED)</code> within our CMake script, and it will know where to find them.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The CMake toolchain part from lines 4-8 is concerned with setting project options based on our settings in the <code>conanfile.py</code>. Since we can specify if we want to have Gtest or Doxygen as a requirement to build our library, we can pass this information to CMake, as it would make no sense to build tests if we did not require GTest to be available. This also means that we only need to pass the toolchain file to CMake, and we no longer have to manually set the required options. Quite handy!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>So, for example, in the <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/complete-walkthrough-adding-cmake-to-an-existing-library#aioseo-configuring-the-project" target="_blank" rel="noopener" title="">previous article</a>, we saw that to configure our project, we had the following command:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_TOOLCHAIN_FILE=\u0022conan_toolchain.cmake\u0022 -DBUILD_DOCS=ON -DENABLE_SHARED=ON -DENABLE_TESTS=ON -G Ninja ..","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DCMAKE_BUILD_TYPE=Debug\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DCMAKE_TOOLCHAIN_FILE=\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;conan_toolchain.cmake\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DBUILD_DOCS=ON\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DENABLE_SHARED=ON\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DENABLE_TESTS=ON\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-G\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eNinja\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e..\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_TOOLCHAIN_FILE="conan_toolchain.cmake" -DBUILD_DOCS=ON -DENABLE_SHARED=ON -DENABLE_TESTS=ON -G Ninja ..</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DCMAKE_BUILD_TYPE=Debug</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DCMAKE_TOOLCHAIN_FILE=</span><span style="color: #CE9178">&quot;conan_toolchain.cmake&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DBUILD_DOCS=ON</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DENABLE_SHARED=ON</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DENABLE_TESTS=ON</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-G</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">Ninja</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">..</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Since we specify the options now in the toolchain, we can now simply write</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_TOOLCHAIN_FILE=\u0022conan_toolchain.cmake\u0022 -G Ninja ..","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DCMAKE_BUILD_TYPE=Debug\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DCMAKE_TOOLCHAIN_FILE=\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;conan_toolchain.cmake\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-G\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eNinja\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e..\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_TOOLCHAIN_FILE="conan_toolchain.cmake" -G Ninja ..</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DCMAKE_BUILD_TYPE=Debug</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DCMAKE_TOOLCHAIN_FILE=</span><span style="color: #CE9178">&quot;conan_toolchain.cmake&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-G</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">Ninja</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">..</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Ahhh, Conan, I forgive you for <code>transitive_header</code> mess! This is looking much nicer, neater, and cleaner! (though, since we used a CMake layout now, the toolchain file will be located elsewhere, which we will see in a second).</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-building-our-library-with-conan">Building our library with Conan</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The next step, after having configured our project successfully, is the build step. This is fairly straightforward, as it was with CMake itself when we manually built projects ourselves. This is the <code>build()</code> function in our Conan recipe:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"    def build(self):\n        cmake = CMake(self)\n        cmake.configure()\n        cmake.build()","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ebuild\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake = CMake(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake.configure()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake.build()\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":4,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>    def build(self):
        cmake = CMake(self)
        cmake.configure()
        cmake.build()</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">build</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake = CMake(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake.configure()</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake.build()</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We see that we configure and build our project in the same function, though all of the heavy lifting was done in the previous functions, which means we can simply call <code>configure()</code> here without any arguments and it will know how to configure our CMake project. The same goes for the <code>build()</code> methods.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-package-and-install-our-library-into-our-local-conan-cache">Package and install our library into our local Conan cache</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>After we have built our library, we can install it simply with</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"    def package(self):\n        cmake = CMake(self)\n        cmake.install()","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003epackage\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake = CMake(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake.install()\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":3,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>    def package(self):
        cmake = CMake(self)
        cmake.install()</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">package</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake = CMake(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake.install()</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>This is similar to manually installing targets with CMake, i.e. a simple call to CMake with the <code>--install</code> flag is sufficient to install the project. We have not specified the installation prefix, i.e. the location where Conan should install this library. This is handled automatically by Conan internally through some clever hash calculation that will influence the installation location.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Just to give you a bit of a background, all of our project settings will be used to compute a <a href="https://en.wikipedia.org/wiki/Hash_function" target="_blank" rel="noopener" title="">hash</a>. This means that if we try to compile the library again with the same settings, the computed hash will be the same. Conan makes use of that by installing all of its builds to a specific folder, which includes the hash. If you need the same library in the future and use the same settings, Conan does not need to recompile the library; instead, it reuses the already compiled version. This also allows you to have the same library installed multiple times for different settings.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The last bits of information we have to provide are located in the <code>package_info()</code> function. This function collects the name of the library that should be used by CMake to find this dependency later, the namespace, library name, and so on. Even though all of that information is already provided in our CMake scripts, we have to duplicate it here (which allows us to provide missing information in case we write a recipe for a third-party library where we can't modify the CMake scripts). Have a look through this function, and we will look at it afterwards:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"    def package_info(self):\n        # set global project settings\n        self.cpp_info.set_property(\u0022cmake_file_name\u0022, \u0022meshReaderLib\u0022)\n        self.cpp_info.set_property(\u0022cmake_target_name\u0022, \u0022meshReaderLib::meshReaderLib\u0022)\n\n        # handle Window's amazing naming convention for debug libraries\n        if self.settings.os == \u0022Windows\u0022 and self.settings.build_type == \u0022Debug\u0022:\n            self.cpp_info.libs = [\u0022meshReaderLibd\u0022]\n        else:\n            self.cpp_info.libs = [\u0022meshReaderLib\u0022]\n\n        # add pre-processor definitions to resolve __declspec()s correctly on Windows for shared libraries\n        if self.settings.os == \u0022Windows\u0022:\n            if self.options.shared:\n                self.cpp_info.defines = [\u0022COMPILEDLL\u0022]\n            else:\n                self.cpp_info.defines = [\u0022COMPILELIB\u0022]\n\n        # link against dependencies\n        self.cpp_info.requires = [\u0022cgns::cgns\u0022]\n\n        if self.options.with_gtest:\n            self.cpp_info.requires.append(\u0022gtest::gtest\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003epackage_info\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# set global project settings\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.set_property(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cmake_file_name\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;meshReaderLib\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.set_property(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cmake_target_name\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;meshReaderLib::meshReaderLib\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# handle Window\u0026#39;s amazing naming convention for debug libraries\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.settings.os == \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Windows\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eand\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.settings.build_type == \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Debug\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.libs = [\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;meshReaderLibd\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eelse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.libs = [\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;meshReaderLib\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# add pre-processor definitions to resolve __declspec()s correctly on Windows for shared libraries\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.settings.os == \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Windows\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.shared:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.defines = [\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;COMPILEDLL\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eelse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.defines = [\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;COMPILELIB\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# link against dependencies\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.requires = [\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cgns::cgns\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.options.with_gtest:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp_info.requires.append(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;gtest::gtest\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":23,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>    def package_info(self):
        # set global project settings
        self.cpp_info.set_property("cmake_file_name", "meshReaderLib")
        self.cpp_info.set_property("cmake_target_name", "meshReaderLib::meshReaderLib")

        # handle Window's amazing naming convention for debug libraries
        if self.settings.os == "Windows" and self.settings.build_type == "Debug":
            self.cpp_info.libs = ["meshReaderLibd"]
        else:
            self.cpp_info.libs = ["meshReaderLib"]

        # add pre-processor definitions to resolve __declspec()s correctly on Windows for shared libraries
        if self.settings.os == "Windows":
            if self.options.shared:
                self.cpp_info.defines = ["COMPILEDLL"]
            else:
                self.cpp_info.defines = ["COMPILELIB"]

        # link against dependencies
        self.cpp_info.requires = ["cgns::cgns"]

        if self.options.with_gtest:
            self.cpp_info.requires.append("gtest::gtest")</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">package_info</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #6A9955"># set global project settings</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.set_property(</span><span style="color: #CE9178">&quot;cmake_file_name&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;meshReaderLib&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.set_property(</span><span style="color: #CE9178">&quot;cmake_target_name&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;meshReaderLib::meshReaderLib&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #6A9955"># handle Window&#39;s amazing naming convention for debug libraries</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.settings.os == </span><span style="color: #CE9178">&quot;Windows&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">and</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.settings.build_type == </span><span style="color: #CE9178">&quot;Debug&quot;</span><span style="color: #D4D4D4">:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.libs = [</span><span style="color: #CE9178">&quot;meshReaderLibd&quot;</span><span style="color: #D4D4D4">]</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">else</span><span style="color: #D4D4D4">:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.libs = [</span><span style="color: #CE9178">&quot;meshReaderLib&quot;</span><span style="color: #D4D4D4">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #6A9955"># add pre-processor definitions to resolve __declspec()s correctly on Windows for shared libraries</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.settings.os == </span><span style="color: #CE9178">&quot;Windows&quot;</span><span style="color: #D4D4D4">:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.shared:</span></span>
<span class="line"><span style="color: #D4D4D4">                </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.defines = [</span><span style="color: #CE9178">&quot;COMPILEDLL&quot;</span><span style="color: #D4D4D4">]</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #C586C0">else</span><span style="color: #D4D4D4">:</span></span>
<span class="line"><span style="color: #D4D4D4">                </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.defines = [</span><span style="color: #CE9178">&quot;COMPILELIB&quot;</span><span style="color: #D4D4D4">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #6A9955"># link against dependencies</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.requires = [</span><span style="color: #CE9178">&quot;cgns::cgns&quot;</span><span style="color: #D4D4D4">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.options.with_gtest:</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp_info.requires.append(</span><span style="color: #CE9178">&quot;gtest::gtest&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Lines 3-4 specify the name of our library (used in the <code>find_package()</code> function), as well as the namespace to use (used in the <code>target_link_libraries()</code> function. Lines 6-10 take care of Window's naming convention for debug libraries, where the letter <code>d</code> is suffixed to the library name, and then more Windows stuff happens on lines 12-17, where we add the required pre-processor statements to the compiler so that we are correctly exporting our library (with the required <code>__declspec()</code> directives for shared (dynamic) libraries).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Line 20 tells Conan that the CGNS library is a dependency. So, if we link against our mesh reader library, Conan also needs to link against the CGNS library. It will do so for us in the background, without us knowing or seeing it (and, hopefully, it will not forget to also pass on information on where to find the required header files!). We do so for GTest as well on lines 22-23, but only if we requested to build the tests.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-creating-a-test-for-conan">Creating a test for Conan</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Right, that was quite a journey. We looked through the entire <code>conanfile.py</code> and saw how to prepare the mesh reading library so that Conan can compile and install it automatically, as well as forward any required information. Before we release this, though, we probably want to test it first and make sure that Conan can correctly do all of these things we want it to do. This is where the <code>test_package</code> folder comes in.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>In Conan, it is customary to provide a <code>test_package</code> folder (using the exact same name as Conan will look for this explicitly). Here, we want to write a small test program that will exercise our library to make sure it can be used. It is similar to a unit test, but we are not testing the library here; rather, we are testing that Conan was able to build and install the library correctly.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>As a reminder, this is the structure of our <code>test_package</code> folder:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"root\n├── ...\n├── test_package/\n│   ├── src/\n│   │   └── example.cpp\n│   ├── CMakeLists.txt\n│   ├── conanfile.py\n│   └── structured2D.cgns\n└── ...","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eroot\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── test_package/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   ├── src/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   │   └── example.cpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   ├── CMakeLists.txt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   ├── conanfile.py\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── structured2D.cgns\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e└── ...\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"plaintext","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":9,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>root
├── ...
├── test_package/
│   ├── src/
│   │   └── example.cpp
│   ├── CMakeLists.txt
│   ├── conanfile.py
│   └── structured2D.cgns
└── ...</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">root</span></span>
<span class="line"><span style="color: #D4D4D4">├── ...</span></span>
<span class="line"><span style="color: #D4D4D4">├── test_package/</span></span>
<span class="line"><span style="color: #D4D4D4">│   ├── src/</span></span>
<span class="line"><span style="color: #D4D4D4">│   │   └── example.cpp</span></span>
<span class="line"><span style="color: #D4D4D4">│   ├── CMakeLists.txt</span></span>
<span class="line"><span style="color: #D4D4D4">│   ├── conanfile.py</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── structured2D.cgns</span></span>
<span class="line"><span style="color: #D4D4D4">└── ...</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Let's look through these files in the next section.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-creating-a-c-test-example-cpp">Creating a C++ test: example.cpp</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The first file is located at <code>test_package/src/example.cpp</code> and provides a source file that we can fill however we see fit to exercise the library sufficiently so that we are confident everything is working correctly. In our case, the library is so small that simply reading a mesh file for either a structured or unstructured grid is sufficient. This is shown below:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"#include \u0026lt;vector\u003e\n#include \u0026lt;string\u003e\n\n#include \u0022meshReaderLib/meshReader.hpp\u0022\n\nint main() {\n  ReadStructuredMesh structuredMesh(\u0022structured2D.cgns\u0022);\n  structuredMesh.readMesh();\n  return 0;\n}","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;vector\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;string\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;meshReaderLib/meshReader.hpp\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eint\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003emain\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ReadStructuredMesh \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003estructuredMesh\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;structured2D.cgns\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003estructuredMesh\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ereadMesh\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":10,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>#include &lt;vector>
#include &lt;string>

#include "meshReaderLib/meshReader.hpp"

int main() {
  ReadStructuredMesh structuredMesh("structured2D.cgns");
  structuredMesh.readMesh();
  return 0;
}</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;vector&gt;</span></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;string&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&quot;meshReaderLib/meshReader.hpp&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">int</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">main</span><span style="color: #D4D4D4">() {</span></span>
<span class="line"><span style="color: #D4D4D4">  ReadStructuredMesh </span><span style="color: #DCDCAA">structuredMesh</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&quot;structured2D.cgns&quot;</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">structuredMesh</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">readMesh</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> </span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>The importance here is that we can include our mesh reading library correctly and read a mesh without problems. If we can, then the rest of the library will likely also work correctly.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-build-the-c-test-cmakelists-txt">Build the C++ test: CMakeLists.txt</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The CMake file is very simplistic. We set our boilerplate <code>cmake_minimum_required()</code> and <code>project()</code> information, and then require that the <code>meshReaderLib</code> library is available through the <code>find_package()</code> command. We then create an executable and link it against the <code>meshReaderLib</code> library. Since we are also using a mesh file here, we copy it next to the executable so we can read it once it is executed. This is shown in the <code>CMakeLists.txt</code> file below, located within the <code>test_package/</code> folder:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake_minimum_required(VERSION 3.15)\nproject(PackageTest CXX)\n\nfind_package(meshReaderLib CONFIG REQUIRED)\n\nadd_executable(example src/example.cpp)\ntarget_link_libraries(example meshReaderLib::meshReaderLib)\n\nadd_custom_command(TARGET example POST_BUILD\n  COMMAND ${CMAKE_COMMAND} -E copy ${CMAKE_SOURCE_DIR}/structured2D.cgns $\u0026lt;TARGET_FILE_DIR:example\u003e/structured2D.cgns\n)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003ecmake_minimum_required\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(VERSION 3.15)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eproject\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(PackageTest CXX)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003efind_package\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(meshReaderLib CONFIG REQUIRED)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eadd_executable\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(example src/example.cpp)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003etarget_link_libraries\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(example meshReaderLib::meshReaderLib)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eadd_custom_command\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTARGET\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e example POST_BUILD\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCOMMAND\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_COMMAND}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e -E copy \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_SOURCE_DIR}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e/structured2D.cgns $\u0026lt;TARGET_FILE_DIR:example\u0026gt;/structured2D.cgns\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":11,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>cmake_minimum_required(VERSION 3.15)
project(PackageTest CXX)

find_package(meshReaderLib CONFIG REQUIRED)

add_executable(example src/example.cpp)
target_link_libraries(example meshReaderLib::meshReaderLib)

add_custom_command(TARGET example POST_BUILD
  COMMAND ${CMAKE_COMMAND} -E copy ${CMAKE_SOURCE_DIR}/structured2D.cgns $&lt;TARGET_FILE_DIR:example>/structured2D.cgns
)</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">cmake_minimum_required</span><span style="color: #D4D4D4">(VERSION 3.15)</span></span>
<span class="line"><span style="color: #569CD6">project</span><span style="color: #D4D4D4">(PackageTest CXX)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">find_package</span><span style="color: #D4D4D4">(meshReaderLib CONFIG REQUIRED)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">add_executable</span><span style="color: #D4D4D4">(example src/example.cpp)</span></span>
<span class="line"><span style="color: #569CD6">target_link_libraries</span><span style="color: #D4D4D4">(example meshReaderLib::meshReaderLib)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">add_custom_command</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">TARGET</span><span style="color: #D4D4D4"> example POST_BUILD</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">COMMAND</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">${CMAKE_COMMAND}</span><span style="color: #D4D4D4"> -E copy </span><span style="color: #569CD6">${CMAKE_SOURCE_DIR}</span><span style="color: #D4D4D4">/structured2D.cgns $&lt;TARGET_FILE_DIR:example&gt;/structured2D.cgns</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-handling-dependencies-conanfile-py">Handling dependencies: conanfile.py</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Our test project also has its own <code>conanfile.py</code> file, but this is typically just a boilerplate file, which we don't have to edit. You will see that within the <code>requirements()</code> function shown on line 12 below, we say that we require the <code>self.tested_reference_str</code>, which will forward any packages that are required (including the mesh reading library itself) from the main <code>conanfile.py</code>.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"import os\n\nfrom conan import ConanFile\nfrom conan.tools.cmake import CMake, cmake_layout\nfrom conan.tools.build import can_run\n\n\nclass meshReaderLibTestConan(ConanFile):\n    settings = \u0022os\u0022, \u0022compiler\u0022, \u0022build_type\u0022, \u0022arch\u0022\n    generators = \u0022CMakeDeps\u0022, \u0022CMakeToolchain\u0022\n\n    def requirements(self):\n        self.requires(self.tested_reference_str)\n\n    def build(self):\n        cmake = CMake(self)\n        cmake.configure()\n        cmake.build()\n\n    def layout(self):\n        cmake_layout(self)\n\n    def test(self):\n        if can_run(self):\n            cmd = os.path.join(self.cpp.build.bindir, \u0022example\u0022)\n            self.run(cmd, env=\u0022conanrun\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eimport\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e os\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003efrom\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e conan \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eimport\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e ConanFile\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003efrom\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e conan.tools.cmake \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eimport\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e CMake, cmake_layout\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003efrom\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e conan.tools.build \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eimport\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e can_run\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eclass\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003emeshReaderLibTestConan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eConanFile\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    settings = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;os\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;compiler\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;build_type\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;arch\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    generators = \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;CMakeDeps\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;CMakeToolchain\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003erequirements\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.requires(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.tested_reference_str)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ebuild\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake = CMake(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake.configure()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake.build()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003elayout\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        cmake_layout(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edef\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003etest\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e can_run(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e):\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            cmd = os.path.join(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.cpp.build.bindir, \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;example\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.run(cmd, \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eenv\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;conanrun\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"python","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":26,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>import os

from conan import ConanFile
from conan.tools.cmake import CMake, cmake_layout
from conan.tools.build import can_run


class meshReaderLibTestConan(ConanFile):
    settings = "os", "compiler", "build_type", "arch"
    generators = "CMakeDeps", "CMakeToolchain"

    def requirements(self):
        self.requires(self.tested_reference_str)

    def build(self):
        cmake = CMake(self)
        cmake.configure()
        cmake.build()

    def layout(self):
        cmake_layout(self)

    def test(self):
        if can_run(self):
            cmd = os.path.join(self.cpp.build.bindir, "example")
            self.run(cmd, env="conanrun")</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">import</span><span style="color: #D4D4D4"> os</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C586C0">from</span><span style="color: #D4D4D4"> conan </span><span style="color: #C586C0">import</span><span style="color: #D4D4D4"> ConanFile</span></span>
<span class="line"><span style="color: #C586C0">from</span><span style="color: #D4D4D4"> conan.tools.cmake </span><span style="color: #C586C0">import</span><span style="color: #D4D4D4"> CMake, cmake_layout</span></span>
<span class="line"><span style="color: #C586C0">from</span><span style="color: #D4D4D4"> conan.tools.build </span><span style="color: #C586C0">import</span><span style="color: #D4D4D4"> can_run</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">class</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">meshReaderLibTestConan</span><span style="color: #D4D4D4">(</span><span style="color: #4EC9B0">ConanFile</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">    settings = </span><span style="color: #CE9178">&quot;os&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;compiler&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;build_type&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;arch&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    generators = </span><span style="color: #CE9178">&quot;CMakeDeps&quot;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;CMakeToolchain&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">requirements</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.requires(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.tested_reference_str)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">build</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake = CMake(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake.configure()</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake.build()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">layout</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        cmake_layout(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">def</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">test</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> can_run(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">):</span></span>
<span class="line"><span style="color: #D4D4D4">            cmd = os.path.join(</span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.cpp.build.bindir, </span><span style="color: #CE9178">&quot;example&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">            </span><span style="color: #569CD6">self</span><span style="color: #D4D4D4">.run(cmd, </span><span style="color: #9CDCFE">env</span><span style="color: #D4D4D4">=</span><span style="color: #CE9178">&quot;conanrun&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>The only addition here is the <code>test()</code> function, which essentially just executes some command line instructions to run our executable. If everything works correctly, our <code>example.cpp</code> file will <code>return 0;</code> at the end of the file, which Conan captures to verify that the code is executed correctly. If it didn't, some other return code would be given, and Conan would raise an error.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-command-line-instructions-to-create-the-package">Command line instructions to create the package</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Ok, so let's turn our attention now to how we can create the Conan package for our mesh reading library and store it in our local Conan cache. But first, let's consider our approach. If we want to export our library, we typically want to share a Release version of our library, not a Debug version. We can steer this with our Conan profile. We will have, at a minimum, a <code>default</code> profile, which is typically set up automatically by Conan in such a way that we will default to Release builds. If we don't specify any profile at all, then we will default to that.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>So, let's try to build then a Release version of our library. This is achieved by running the following command:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"conan create . \u002d\u002dbuild=missing","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003econan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003ecreate\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u002d\u002dbuild=missing\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>conan create . --build=missing</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">conan</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">create</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">.</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">--build=missing</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Alternatively, we can specify the profile we want to use as we did in previous articles where we used Conan using the <code>-pr</code> flag, such as:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"conan create . -pr dev \u002d\u002dbuild=missing","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003econan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003ecreate\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-pr\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003edev\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u002d\u002dbuild=missing\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>conan create . -pr dev --build=missing</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">conan</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">create</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">.</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-pr</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">dev</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">--build=missing</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Both of these commands will execute the instructions encoded in our <code>conanfile.py</code> and compile our library against all of our dependencies, and make it available for easy consumption. There are a few pitfalls here, which may result in your package not to be created. Most of the time it has to do with user privileges, i.e. you are not allowed to execute scripts on your PC (see my <a href="https://cfd.university/blog/setting-up-a-programming-environment-to-develop-cfd-codes/#aioseo-notes-on-how-to-run-scripts-downloaded-from-cfd-university" target="_blank" rel="noopener" title="">write-up</a> on how to circumvent this issue on Windows in particular).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Sometimes, it may just be a particular setting or system configuration that lets you down (e.g., the wrong C++ standard set in the Conan profile or not an up-to-date version of your compiler, CMake, etc.). These are difficult to predict, but I have seen Conan fail to work with a Debug profile while a release version is working just fine. It is not a perfect tool, but it is better than not using any tool at all.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Once we have created the package and hopefully did not get any error message, we are done. Part of the <code>conan create</code> command is to look into the <code>test_package</code> folder and try to compile and run the <code>test_package/srx/example.cpp</code> file, which should exercise our library. If that worked without any issue, then we can assume that our library has been compiled and installed correctly.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you look at the output Conan generates, you can see the various different sections it goes through:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"======== Input profiles ========\n...\n======== Computing dependency graph ========\n...\n======== Computing necessary packages ========\n...\n======== Installing packages ========\n...\n======== Launching test_package ========\n...\n======== Computing dependency graph ========\n...\n======== Computing necessary packages ========\n...\n======== Installing packages ========\n...\n======== Testing the package ========\n...\n======== Testing the package: Executing test ========\nmeshreaderlib/1.0 (test package): Running test()\nmeshreaderlib/1.0 (test package): RUN: .\\example","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e======== \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eInput\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eprofiles\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e========\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e======== \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eComputing\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003edependency\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003egraph\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e========\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e======== \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eComputing\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003enecessary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003epackages\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e========\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e======== \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eInstalling\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003epackages\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e========\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e======== \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eLaunching\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003etest_package\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e========\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e======== \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eComputing\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003edependency\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003egraph\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e========\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e======== \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eComputing\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003enecessary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003epackages\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e========\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e======== \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eInstalling\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003epackages\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e========\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e======== \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eTesting\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003ethe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003epackage\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e========\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e======== \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eTesting\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003ethe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003epackage:\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eExecuting\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003etest\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e========\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003emeshreaderlib/1.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e (test \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003epackage\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e): Running \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003etest\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003emeshreaderlib/1.0 (\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003etest\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003epackage\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e): RUN: .\u003c/span\u003e\u003cspan style=\u0022color: #D7BA7D\u0022\u003e\\e\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003example\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":21,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>======== Input profiles ========
...
======== Computing dependency graph ========
...
======== Computing necessary packages ========
...
======== Installing packages ========
...
======== Launching test_package ========
...
======== Computing dependency graph ========
...
======== Computing necessary packages ========
...
======== Installing packages ========
...
======== Testing the package ========
...
======== Testing the package: Executing test ========
meshreaderlib/1.0 (test package): Running test()
meshreaderlib/1.0 (test package): RUN: .\example</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">======== </span><span style="color: #CE9178">Input</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">profiles</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">========</span></span>
<span class="line"><span style="color: #DCDCAA">...</span></span>
<span class="line"><span style="color: #D4D4D4">======== </span><span style="color: #CE9178">Computing</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">dependency</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">graph</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">========</span></span>
<span class="line"><span style="color: #DCDCAA">...</span></span>
<span class="line"><span style="color: #D4D4D4">======== </span><span style="color: #CE9178">Computing</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">necessary</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">packages</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">========</span></span>
<span class="line"><span style="color: #DCDCAA">...</span></span>
<span class="line"><span style="color: #D4D4D4">======== </span><span style="color: #CE9178">Installing</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">packages</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">========</span></span>
<span class="line"><span style="color: #DCDCAA">...</span></span>
<span class="line"><span style="color: #D4D4D4">======== </span><span style="color: #CE9178">Launching</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">test_package</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">========</span></span>
<span class="line"><span style="color: #DCDCAA">...</span></span>
<span class="line"><span style="color: #D4D4D4">======== </span><span style="color: #CE9178">Computing</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">dependency</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">graph</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">========</span></span>
<span class="line"><span style="color: #DCDCAA">...</span></span>
<span class="line"><span style="color: #D4D4D4">======== </span><span style="color: #CE9178">Computing</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">necessary</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">packages</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">========</span></span>
<span class="line"><span style="color: #DCDCAA">...</span></span>
<span class="line"><span style="color: #D4D4D4">======== </span><span style="color: #CE9178">Installing</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">packages</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">========</span></span>
<span class="line"><span style="color: #DCDCAA">...</span></span>
<span class="line"><span style="color: #D4D4D4">======== </span><span style="color: #CE9178">Testing</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">the</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">package</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">========</span></span>
<span class="line"><span style="color: #DCDCAA">...</span></span>
<span class="line"><span style="color: #D4D4D4">======== </span><span style="color: #CE9178">Testing</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">the</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">package:</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">Executing</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">test</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">========</span></span>
<span class="line"><span style="color: #DCDCAA">meshreaderlib/1.0</span><span style="color: #D4D4D4"> (test </span><span style="color: #CE9178">package</span><span style="color: #D4D4D4">): Running </span><span style="color: #DCDCAA">test</span><span style="color: #D4D4D4">()</span></span>
<span class="line"><span style="color: #D4D4D4">meshreaderlib/1.0 (</span><span style="color: #DCDCAA">test</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">package</span><span style="color: #D4D4D4">): RUN: .</span><span style="color: #D7BA7D">\e</span><span style="color: #D4D4D4">xample</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>The first four sections deal with the mesh reading library itself, i.e. gathering input files (determining the profile and deriving inputs from it), looking at dependencies and which need to be built from the source, if any, and then installing those packages, including the generated mesh reading library. We then go into the <code>Launching test_package</code> section where we do the same steps, only this time for our mini-project within the <code>test_package/</code> folder.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>As long as this step is executed without any issues, we should have confidence that our library was correctly compiled and stored within our local Conan cache.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-i-really-want-others-to-use-my-amazing-library-what-shoudl-i-do">I really want others to use my amazing library, what should I do?</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Well, it sounds like you have an amazing piece of work lined up. Congratulations! If you can't wait to share your library with the rest of the world, you can upload it to <a href="https://conan.io/center" target="_blank" rel="noopener" title="">Conan central</a>. This is rather straightforward; you can do all of that with the <code>conan upload</code> command. Since the mesh reader library is not intended for widespread use (at least not yet), I have no intention of putting it on Conan central, but if you want to publish your own library, I'd suggest having a look at the <a href="https://docs.conan.io/2/reference/commands/upload.html#conan-upload" target="_blank" rel="noopener" title="">Conan documentation for uploading packages</a>.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-notes-on-the-linear-algebra-library-changes">Notes on the linear algebra library changes</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Similar to our <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/complete-walkthrough-adding-cmake-to-an-existing-library#aioseo-comments-on-how-to-prepare-the-linear-algebra-solver-library" target="_blank" rel="noopener" title="">last article</a>, where we added CMake to both the mesh reader and linear algebra solver library, there were a lot of commonalities, and that is the case for the <code>conanfile.py</code> and its associated test project as well. In fact, the <code>conanfile.py</code> of the linear algebra solver library is pretty much a search and replace exercise for replacing the library name in various places (and removing the CGNS dependence). The biggest difference is in the <code>test_package/srx/example.cpp</code> file, which now tests the linear algebra solver library instead.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"#include \u0026lt;vector\u003e\n#include \u0026lt;string\u003e\n\n#include \u0022linearAlgebraLib/linearAlgebraLib.hpp\u0022\n\nint main() {\n  linearAlgebraLib::SparseMatrixCSR matrix(3, 3);\n  return 0;\n}\n","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;vector\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;string\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;linearAlgebraLib/linearAlgebraLib.hpp\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eint\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003emain\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003elinearAlgebraLib\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::SparseMatrixCSR \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ematrix\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":10,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>#include &lt;vector>
#include &lt;string>

#include "linearAlgebraLib/linearAlgebraLib.hpp"

int main() {
  linearAlgebraLib::SparseMatrixCSR matrix(3, 3);
  return 0;
}
</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;vector&gt;</span></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;string&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&quot;linearAlgebraLib/linearAlgebraLib.hpp&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">int</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">main</span><span style="color: #D4D4D4">() {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #4EC9B0">linearAlgebraLib</span><span style="color: #D4D4D4">::SparseMatrixCSR </span><span style="color: #DCDCAA">matrix</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">3</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> </span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Apart from that, you won't find any other differences and you can treat both libraries the same way when it comes to installing them into your local Conan cache.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-consuming-the-newly-conan-based-libraries-in-our-test-project">Consuming the newly Conan-based libraries in our test project</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>In our <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/complete-walkthrough-adding-cmake-to-an-existing-library#aioseo-testing-our-newly-created-cmake-based-libraries" target="_blank" rel="noopener" title="">previous article</a>, we looked at how we can use our now CMake-based mesh reader and linear algebra solver library within another project. The whole motivation for the current article was to replace the competing dependency management, where we had to tell CMake where to find our own libraries, while Conan was handling the external dependencies on the CGNS and GTest libraries (as well as Doxygen ...).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Since everything lives now in the Conan ecosystem, we do no longer need to tell CMake where to find dependencies manually, and Conan will resolve all of that for us through the toolchain file it generates. Let's see how we can achieve that next.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-changes-to">Changes to the test project</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>As a brief reminder, the project structure we developed for the test project is given below:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"root\n├── build/\n├── mesh/\n│   └── structured2D.cgns\n├── CMakeLists.txt\n├── conanfile.txt\n└── main.cpp","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eroot\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── build/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── mesh/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── structured2D.cgns\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── CMakeLists.txt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── conanfile.txt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e└── main.cpp\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"plaintext","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":7,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>root
├── build/
├── mesh/
│   └── structured2D.cgns
├── CMakeLists.txt
├── conanfile.txt
└── main.cpp</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">root</span></span>
<span class="line"><span style="color: #D4D4D4">├── build/</span></span>
<span class="line"><span style="color: #D4D4D4">├── mesh/</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── structured2D.cgns</span></span>
<span class="line"><span style="color: #D4D4D4">├── CMakeLists.txt</span></span>
<span class="line"><span style="color: #D4D4D4">├── conanfile.txt</span></span>
<span class="line"><span style="color: #D4D4D4">└── main.cpp</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>While there are no changes to the structure itself, we have to change the <code>conanfile.txt</code> file. In the previous article, I showed you that this file had the following content:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"[requires]\ncgns/4.3.0\n\n[generators]\nCMakeDeps\nCMakeToolchain","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[requires]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003ecgns/4.3.0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[generators]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eCMakeDeps\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eCMakeToolchain\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"plaintext","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":6,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>[requires]
cgns/4.3.0

[generators]
CMakeDeps
CMakeToolchain</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">[requires]</span></span>
<span class="line"><span style="color: #D4D4D4">cgns/4.3.0</span></span>
<span class="line"><span style="color: #D4D4D4"></span></span>
<span class="line"><span style="color: #D4D4D4">[generators]</span></span>
<span class="line"><span style="color: #D4D4D4">CMakeDeps</span></span>
<span class="line"><span style="color: #D4D4D4">CMakeToolchain</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We explicitly required the CGNS library to be available, even though our project only depended on the mesh reader and linear algebra solver library. It is somewhat frustrating (but unavoidable!) to have to handle the dependencies of our dependencies, so we used Conan to make the CGNS library available so that our mesh reader library could function properly.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>With our mesh reader library now available within the Conan cache, it can find dependencies automatically, which means that our <code>conanfile.txt</code> now becomes:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"[requires]\nmeshreaderlib/1.0\nlinearalgebralib/1.0\n\n[generators]\nCMakeDeps\nCMakeToolchain","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[requires]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003emeshreaderlib/1.0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003elinearalgebralib/1.0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[generators]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eCMakeDeps\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eCMakeToolchain\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"plaintext","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":7,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>[requires]
meshreaderlib/1.0
linearalgebralib/1.0

[generators]
CMakeDeps
CMakeToolchain</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">[requires]</span></span>
<span class="line"><span style="color: #D4D4D4">meshreaderlib/1.0</span></span>
<span class="line"><span style="color: #D4D4D4">linearalgebralib/1.0</span></span>
<span class="line"><span style="color: #D4D4D4"></span></span>
<span class="line"><span style="color: #D4D4D4">[generators]</span></span>
<span class="line"><span style="color: #D4D4D4">CMakeDeps</span></span>
<span class="line"><span style="color: #D4D4D4">CMakeToolchain</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>How beautiful is that? We only list requirements that we actually have for our project, and all the dependencies that are required for these libraries are resolved in the background. No need for us to get involved. Yes, all the changes we have made thus far in this article are to change the <code>conanfile.txt</code> as shown above. But of course, we now are all Conan wizards and can use this skillset to develop and share our own libraries with the world!</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-command-line-instructions">Command line instructions</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Let's have a look at the beautified command line instructions. They are given below for configuring and building the project:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE=\u0022conan_toolchain.cmake\u0022 -G Ninja ..\ncmake \u002d\u002dbuild . \u002d\u002dconfig Release","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DCMAKE_BUILD_TYPE=Release\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DCMAKE_TOOLCHAIN_FILE=\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;conan_toolchain.cmake\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-G\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eNinja\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e..\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u002d\u002dbuild\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u002d\u002dconfig\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eRelease\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":2,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE="conan_toolchain.cmake" -G Ninja ..
cmake --build . --config Release</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DCMAKE_BUILD_TYPE=Release</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DCMAKE_TOOLCHAIN_FILE=</span><span style="color: #CE9178">&quot;conan_toolchain.cmake&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-G</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">Ninja</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">..</span></span>
<span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">--build</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">.</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">--config</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">Release</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>No more <code>-DCMAKE_PREFIX_PATH</code>, just a build type, generator, and a toolchain, which will resolve all dependencies for us. If you have worked with CMake for a while, this feels a bit like magic!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We can test that the libraries were correctly found and linked against our executables using</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":".\\testLibs.exe","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\\testLibs.exe\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>.\testLibs.exe</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">.</span><span style="color: #D4D4D4">\testLibs.exe</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>on Windows or</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"./testLibs","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e./testLibs\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"seeMoreCollapse":false,"seeMoreCollapseString":"","highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","copyButtonUseTextarea":true,"useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><textarea class="code-block-pro-copy-button-textarea" aria-hidden="true" readonly>./testLibs</textarea><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">./testLibs</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>on UNIX (Linux, macOS). But of course, we are already expecting our test program to compile and execute, as we have already tested that with the <code>test_package</code>s provided in both libraries. Congratulations, you have reached the end, not just of this article, but also of this series!</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-summary">Summary</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>This concludes our series on build automation with CMake. In this article, we finalised our skillset by looking at how we can make our own libraries available through Conan. While we did not go through uploading our package to <a href="https://conan.io/center" target="_blank" rel="noopener" title="">Conan central</a>, we saw that this is just a few steps away and we could achieve this with <code>conan upload</code> relatively easily.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Dependency management is a difficult topic, and it is entirely possible that despite testing the code developed in this article on two separate machines and 3 different operating systems, you still will run into issues. I could probably talk about this issue alone for an entire article (or series on containerisation, e.g. <a href="https://www.docker.com/" target="_blank" rel="noopener" title="">Docker </a>or <a href="https://kubernetes.io/" target="_blank" rel="noopener" title="">Kubernetes</a>). You will find that most of the time in this series, we have been looking at how to resolve external dependencies, and it is such an important topic that receives little attention (in the CFD community) that I think it is worth writing about.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Of course, automatisation is only one aspect, but we are CFD engineers, and we are interested in applying this to real CFD problems. We have re-used our mesh reader and linear algebra solver library to showcase how we can use Conan with our CFD libraries. I hope you are starting to see a picture here: Developing the library is one thing, but if we have ambitions for anyone using our work (or, indeed, getting paid to work on a CFD solver), then we need to know how to isolate our work, put it into a library and share it with colleagues and users.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>CMake and Conan provide us with tools that put our CFD development on steroids, and we should use these tools to make our lives as developers easier. The educated user will thank you for it and this means that compiling, installing, and using your work will be easy, and perhaps even an enjoyable exercise, especially if you are used to installing software like OpenFOAM, which requires a good amount of nerves!</p>
<!-- /wp:paragraph -->