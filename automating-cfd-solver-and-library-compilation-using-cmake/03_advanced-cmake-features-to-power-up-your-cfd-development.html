<!-- Advanced CMake features to power up your CFD development -->
<!-- https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/advanced-cmake-features-to-power-up-your-cfd-development/ -->

<!-- wp:paragraph -->
<p>In this article, we look at some more advanced concepts in CMake that will help you automate your build process from start to end. We first look at programming with variables, conditional statements, and loops, and then look at functions and macros, configure files, generator expressions, and finally policies.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you master these concepts, you will know most of what you need in your day-to-day CMake usage, with some additional advanced concepts covered in the next articles within this series. The previous and current article, though, will form the basis for you to explore some of the other, more advanced concepts. So then, let's have a look at what advanced features CMake offers that you should be aware of.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading">In this series</h2>
<!-- /wp:heading -->

<!-- wp:shortcode -->
[custom_category_posts_list category_slug="automating-cfd-solver-and-library-compilation-using-cmake"]
<!-- /wp:shortcode -->

<!-- wp:heading -->
<h2 class="wp-block-heading">In this article</h2>
<!-- /wp:heading -->

<!-- wp:aioseo/table-of-contents {"headings":[{"id":6,"blockClientId":"9692ffbf-bfd0-441a-9c03-30f2e38486a3","content":"Introduction","level":2,"anchor":"aioseo-recap-and","order":0,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":12,"blockClientId":"b4fb66ed-7279-4553-8ed7-74ac3c2cb2bd","content":"Advanced features to make you look like a CMake wizard","level":2,"anchor":"aioseo-advanced-features-to-make-you-look-like-a-cmae-wizard","order":1,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":20,"blockClientId":"b4026978-ee73-4f5c-9bba-ff465981dc74","content":"Basic programming with CMake","level":3,"anchor":"aioseo-basic-programming-with-cmake","order":2,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":22,"blockClientId":"c483b65c-9868-45fd-b707-7520b623f290","content":"Variables and the CMake Cache","level":4,"anchor":"aioseo-variables-and-the-cmake-cache","order":3,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":46,"blockClientId":"17ce403a-549f-49aa-be09-15e90b1c2996","content":"Conditional statements","level":4,"anchor":"aioseo-conditional-statements","order":4,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":55,"blockClientId":"674ff500-418c-48ca-95b1-62a7fde0b216","content":"Looping","level":4,"anchor":"aioseo-looping","order":5,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":61,"blockClientId":"c310a7dd-96a4-4be2-8e55-feb164774140","content":"Working with project-specific options","level":3,"anchor":"aioseo-working-with","order":6,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":76,"blockClientId":"82422426-162b-4937-89c1-c03f94299d2f","content":"Function, Macros, and including additional files","level":3,"anchor":"aioseo-including-additional-files","order":7,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":113,"blockClientId":"14d56e87-a40a-43a3-a624-9cc56a9ebc8d","content":"Variable substitution in templates and config files","level":3,"anchor":"aioseo-variable-substitution-in-templates-and-config-files","order":8,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":123,"blockClientId":"117771cc-06d5-41e1-b577-661ce0502cfe","content":"Generator expressions","level":3,"anchor":"aioseo-generator-expressions","order":9,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":133,"blockClientId":"d2009714-73a8-4223-bd2f-f00cffb5b420","content":"Conditional variable evaluations","level":4,"anchor":"aioseo-conditional-variable-evaluations","order":10,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":143,"blockClientId":"7b03ee7f-4d96-4465-96c7-5bb63b1b4f24","content":"Stage-specific include directories","level":4,"anchor":"aioseo-stage-specific","order":11,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":151,"blockClientId":"d7ed049f-5afc-4613-af94-2ae0650210e3","content":"Policies","level":3,"anchor":"aioseo-policies","order":12,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":166,"blockClientId":"eaee1805-785d-4186-8977-23d98c088213","content":"Summary","level":2,"anchor":"aioseo-summary","order":13,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]} -->
<div class="wp-block-aioseo-table-of-contents"><ul><li><a href="#aioseo-recap-and">Introduction</a></li><li><a href="#aioseo-advanced-features-to-make-you-look-like-a-cmae-wizard">Advanced features to make you look like a CMake wizard</a><ul><li><a href="#aioseo-basic-programming-with-cmake">Basic programming with CMake</a><ul><li><a href="#aioseo-variables-and-the-cmake-cache">Variables and the CMake Cache</a></li><li><a href="#aioseo-conditional-statements">Conditional statements</a></li><li><a href="#aioseo-looping">Looping</a></li></ul></li><li><a href="#aioseo-working-with">Working with project-specific options</a></li><li><a href="#aioseo-including-additional-files">Function, Macros, and including additional files</a></li><li><a href="#aioseo-variable-substitution-in-templates-and-config-files">Variable substitution in templates and config files</a></li><li><a href="#aioseo-generator-expressions">Generator expressions</a><ul><li><a href="#aioseo-conditional-variable-evaluations">Conditional variable evaluations</a></li><li><a href="#aioseo-stage-specific">Stage-specific include directories</a></li></ul></li><li><a href="#aioseo-policies">Policies</a></li></ul></li><li><a href="#aioseo-summary">Summary</a></li></ul></div>
<!-- /wp:aioseo/table-of-contents -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-recap-and">Introduction</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Let's do a little recap before we move on. In our <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/how-to-use-makefiles-to-automate-cfd-solver-compilations" target="_blank" rel="noopener" title="">opening article</a>, we looked at the necessity of having some form of automation tool in place to look after our compilation and linking of source files into an executable. Of course, we can do that manually, but once our project reaches a state where we have tens, hundreds, if not thousands of source files, it becomes impractical.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The first automation system we looked at was Make. Make is one of the oldest build tools, and it works really well, but cross-platform support is difficult, and it does not offer any support for more advanced software build needs. Thus, a more dedicated build system is required, and I made my case for why we should use CMake both in the opening article and then subsequently in the <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/introduction-to-cmake-for-cfd-practitioners" target="_blank" rel="noopener" title="">second article</a>, where we looked at the basic syntax of CMake and how to use it to compile both executables and libraries.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>At the end of the second article, when we looked at installing custom libraries into a central location on our hard disk so that other projects can use our library, I mentioned that we have to modify the install step so that other projects can indeed use our library. But before we can look at this, we first need to introduce some more advanced concepts of CMake, which will help us modify the installation step.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This is the purpose of this article. I want to explore some of the more common features you'll find when looking through CMake files. Even if you have no intention of using any of these more advanced features, you should at least be able to identify them when you look through a <code>CMakeLists.txt</code> file. This article in combination with <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/introduction-to-cmake-for-cfd-practitioners" target="_blank" rel="noopener" title="">previous one</a> will give you a real solid foundation and you'll find that you will be able to achieve most tasks with the tools discussed in these articles alone.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>So, let's get straight to the point and write some CMake code!</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-advanced-features-to-make-you-look-like-a-cmae-wizard">Advanced features to make you look like a CMake wizard</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>As alluded to above, the following presents a list of features I think are so important that you should make an effort to learn them (and, of course, use them in your own projects). You won't need to use all of them all the time, but knowing what they do will allow you to decide when to use what feature. I should note here that there are some more advanced features available that we won't cover in this article. These features require a bit more explanation, and so they will all receive their own dedicated article.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you want to follow along with any of the examples, create a minimal <code>CMakeLists.txt</code> file, which looks like the following:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake_minimum_required(VERSION 3.23)\nproject(AdvancedCMakeExample)\n\n### put your commands below for testing","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003ecmake_minimum_required\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(VERSION 3.23)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eproject\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(AdvancedCMakeExample)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e### put your commands below for testing\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":4,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake_minimum_required(VERSION 3.23)
project(AdvancedCMakeExample)

### put your commands below for testing" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">cmake_minimum_required</span><span style="color: #D4D4D4">(VERSION 3.23)</span></span>
<span class="line"><span style="color: #569CD6">project</span><span style="color: #D4D4D4">(AdvancedCMakeExample)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">### put your commands below for testing</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Then, just copy the code you want to test below line 4. To execute CMake and to see its output, we just have to run the configuration step, i.e., we first create a new <code>build/</code> directory with the command</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"mkdir build","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003emkdir\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003ebuild\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="mkdir build" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">mkdir</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">build</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>and then we run CMake from within the build directory (after changing into the directory with the <code>cd build</code> command):</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake ..","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e..\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake .." style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">..</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-basic-programming-with-cmake">Basic programming with CMake</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>CMake allows you to to basic programming tasks such as setting and modifying variables, looping through lists, insert conditional if/else statements and printing information to the console. We will have a look at all of them in this section.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-variables-and-the-cmake-cache">Variables and the CMake Cache</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Variables are a bit funny in CMake and work a bit differently from what you may expect. The basic syntax to set variables is to use the <code>set()</code> command:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"set(MY_INT 2)\nset(MY_STRING \u0022cfd.university\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(MY_INT 2)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(MY_STRING \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cfd.university\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":2,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="set(MY_INT 2)
set(MY_STRING &quot;cfd.university&quot;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(MY_INT 2)</span></span>
<span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(MY_STRING </span><span style="color: #CE9178">&quot;cfd.university&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>The convention is to use capitalised letters for variable names, which I am following here. CMake only differentiates between strings and booleans as their variable type. We can set the type explicitly, including a description of what the variable is doing using the following syntax:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"set(WEBSITE \u0022cfd.university\u0022 CACHE STRING \u0022Name of website\u0022)\nset(VERSION_MAJOR 1 CACHE STRING \u0022Major version\u0022)\nset(VERSION_MINOR 2 CACHE STRING \u0022Minor version\u0022)\nset(NEEDS_UPDATE ON CACHE BOOL \u0022Need to update website?\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(WEBSITE \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cfd.university\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCACHE\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eSTRING\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Name of website\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(VERSION_MAJOR 1 \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCACHE\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eSTRING\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Major version\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(VERSION_MINOR 2 \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCACHE\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eSTRING\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Minor version\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(NEEDS_UPDATE \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eON\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCACHE\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eBOOL\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Need to update website?\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":4,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="set(WEBSITE &quot;cfd.university&quot; CACHE STRING &quot;Name of website&quot;)
set(VERSION_MAJOR 1 CACHE STRING &quot;Major version&quot;)
set(VERSION_MINOR 2 CACHE STRING &quot;Minor version&quot;)
set(NEEDS_UPDATE ON CACHE BOOL &quot;Need to update website?&quot;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(WEBSITE </span><span style="color: #CE9178">&quot;cfd.university&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">CACHE</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">STRING</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;Name of website&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(VERSION_MAJOR 1 </span><span style="color: #569CD6">CACHE</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">STRING</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;Major version&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(VERSION_MINOR 2 </span><span style="color: #569CD6">CACHE</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">STRING</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;Minor version&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(NEEDS_UPDATE </span><span style="color: #569CD6">ON</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">CACHE</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">BOOL</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;Need to update website?&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>There is an additional keyword <code>CACHE</code>, which we will be looking at shortly. We have already seen before that we can access these variables by enclosing it with the <code>${}</code> syntax. To test this, we may want to print them to the screen using the following syntax:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"message(STATUS \u0022Website:         ${WEBSITE}\u0022)\nmessage(STATUS \u0022Current version: ${VERSION_MAJOR}.${VERSION_MINOR}\u0022)\nmessage(STATUS \u0022Needs update?:   ${NEEDS_UPDATE}\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emessage\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Website:         ${WEBSITE}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emessage\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Current version: ${VERSION_MAJOR}.${VERSION_MINOR}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emessage\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Needs update?:   ${NEEDS_UPDATE}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":3,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="message(STATUS &quot;Website:         ${WEBSITE}&quot;)
message(STATUS &quot;Current version: ${VERSION_MAJOR}.${VERSION_MINOR}&quot;)
message(STATUS &quot;Needs update?:   ${NEEDS_UPDATE}&quot;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Website:         ${WEBSITE}&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Current version: ${VERSION_MAJOR}.${VERSION_MINOR}&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Needs update?:   ${NEEDS_UPDATE}&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>The <code>message()</code> function facilitates the printing capabilities here, and the first argument to this function (here <code>STATUS</code>) will influence the appearance of the message. We use <code>STATUS</code> for by default, but there are quite a few more options available, such as <code>WARNING</code> and <code>FATAL_ERROR</code>, which will print a warning (or error) message before printing the actual content. If you use <code>FATAL_ERROR</code> in your message, CMake will abort the configuration step. For a list of all all message types, have a look at the <a href="https://cmake.org/cmake/help/latest/command/message.html" target="_blank" rel="noopener" title="">message documentation page</a>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Besides basic variables, we can also specify lists, which follow exactly the same syntax, with the only difference that we can pass several values to the variable, either as individual ones or as semi-colon-separated items, i.e. the following two lists are identical</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"set(KEYWORDS \u0022cfd\u0022 \u0022programming\u0022 \u0022c++\u0022)\nset(KEYWORDS \u0022cfd;programming;c++\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(KEYWORDS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cfd\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;programming\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;c++\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(KEYWORDS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cfd;programming;c++\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":2,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="set(KEYWORDS &quot;cfd&quot; &quot;programming&quot; &quot;c++&quot;)
set(KEYWORDS &quot;cfd;programming;c++&quot;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(KEYWORDS </span><span style="color: #CE9178">&quot;cfd&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;programming&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;c++&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(KEYWORDS </span><span style="color: #CE9178">&quot;cfd;programming;c++&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We can now work with this list; for example, to get the number of elements, we use the list() command with the argument LENGTH. The arguments are the list of which we want to get the number of arguments and the variable in which we want to store the answer. In the keywords example above, this turns into:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"list(LENGTH KEYWORDS NUM_KEYWORDS)\nmessage(STATUS \u0022Number of keywords: ${NUM_KEYWORDS}\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003elist\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(LENGTH KEYWORDS NUM_KEYWORDS)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emessage\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Number of keywords: ${NUM_KEYWORDS}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":2,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="list(LENGTH KEYWORDS NUM_KEYWORDS)
message(STATUS &quot;Number of keywords: ${NUM_KEYWORDS}&quot;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">list</span><span style="color: #D4D4D4">(LENGTH KEYWORDS NUM_KEYWORDS)</span></span>
<span class="line"><span style="color: #569CD6">message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Number of keywords: ${NUM_KEYWORDS}&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>This will print the number <code>Number of keywords: 3</code> to the console. There are a few more arguments that the <code>list()</code> command accepts, which you can find in the <a href="https://cmake.org/cmake/help/latest/command/list.html#list" target="_blank" rel="noopener" title="">list documentation</a>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you want, you can also perform basic mathematical operations in CMake, this we have to use the <code>math()</code> environment. It only supports integers, no floating points, so in that respect it is not that powerful, but may get the job done if you need to do simple tasks such as incrementing the version number.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"set(VERSION_MAJOR 1)\nset(VERSION_MINOR 2)\nmath(EXPR VERSION_MINOR_OUT \u0022${VERSION_MINOR} + 1\u0022)\nmessage(STATUS \u0022Version ${VERSION_MAJOR}.${VERSION_MINOR_OUT}\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(VERSION_MAJOR 1)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(VERSION_MINOR 2)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emath\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(EXPR VERSION_MINOR_OUT \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;${VERSION_MINOR} + 1\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emessage\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Version ${VERSION_MAJOR}.${VERSION_MINOR_OUT}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":4,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="set(VERSION_MAJOR 1)
set(VERSION_MINOR 2)
math(EXPR VERSION_MINOR_OUT &quot;${VERSION_MINOR} + 1&quot;)
message(STATUS &quot;Version ${VERSION_MAJOR}.${VERSION_MINOR_OUT}&quot;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(VERSION_MAJOR 1)</span></span>
<span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(VERSION_MINOR 2)</span></span>
<span class="line"><span style="color: #569CD6">math</span><span style="color: #D4D4D4">(EXPR VERSION_MINOR_OUT </span><span style="color: #CE9178">&quot;${VERSION_MINOR} + 1&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Version ${VERSION_MAJOR}.${VERSION_MINOR_OUT}&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>This will print <code>Version: 1.3</code> to the screen. We will see later that we can automate certain aspect of the build process like running git and committing files to a remote repository, in which case this may be very handy.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Let's now turn to the Cache. CMake has a file called <code>CMakeCache.txt</code> which is located in the <code>build/</code> directory after we run CMake for the first time. It contains a bunch of default variables (usually starting with the prefix <code>CMAKE_</code>) but it will also contain all user-defined variables. For example, when we run CMake on the command line with the following syntax:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake -DNAME=\u0022cfd.university\u0022 ..","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003ecmake -DNAME=\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cfd.university\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e ..\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake -DNAME=&quot;cfd.university&quot; .." style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">cmake -DNAME=</span><span style="color: #CE9178">&quot;cfd.university&quot;</span><span style="color: #D4D4D4"> ..</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>there will be an additional <code>NAME</code> entry in the <code>CMakeCache.txt</code> file. Similarly, we saw above that we can set variables with the syntax</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"set(WEBSITE \u0022cfd.university\u0022 CACHE STRING \u0022Name of website\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(WEBSITE \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cfd.university\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCACHE\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eSTRING\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Name of website\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="set(WEBSITE &quot;cfd.university&quot; CACHE STRING &quot;Name of website&quot;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(WEBSITE </span><span style="color: #CE9178">&quot;cfd.university&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">CACHE</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">STRING</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;Name of website&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>The keyword <code>CACHE</code> here signals to CMake that this variable should also be put in the <code>CMakeCache.txt</code> file. The advantage of keeping this file is that CMake remembers values specified once, this is a curse and a blessing, if you don't know exactly how this command works. If we execute CMake once, then we have the <code>WEBSITE</code> variable within the <code>CMakeCahce.txt</code> file. If you changed the content to, say, <code>cfd.exchange</code>, and run CMake again; the value won't have changed. That is because once a variable is in the cache, you can't simply change it.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you want to override the existing value, then you have to use the <code>FORCE</code> option, i.e.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"set(WEBSITE \u0022cfd.exchange\u0022 CACHE STRING \u0022Name of website\u0022 FORCE)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(WEBSITE \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cfd.exchange\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCACHE\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eSTRING\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Name of website\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e FORCE)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="set(WEBSITE &quot;cfd.exchange&quot; CACHE STRING &quot;Name of website&quot; FORCE)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(WEBSITE </span><span style="color: #CE9178">&quot;cfd.exchange&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">CACHE</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">STRING</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;Name of website&quot;</span><span style="color: #D4D4D4"> FORCE)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Sometimes, it becomes necessary for CMake to regenerate the <code>CMakeCache.txt</code> file, which is typically the case when you change the generator of the project, e.g. switch from Make to Ninja. If that is the case, CMake is usually kind enough to let you know that this is indeed what you need to do.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-conditional-statements">Conditional statements</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Conditional statements, flow control, or, simply put, if/else statements are other features that are supported by CMake. This is great in conjunction with Boolean variables, as we can now set options on either the command line or within the <code>CMakeLists.txt</code> file, which will then steer the build process. The basic syntax is:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"if(${BOOLEAN_VARIABLE})\n  # do something if true\nelse()\n  # do something else if false\nendif()","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${BOOLEAN_VARIABLE}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# do something if true\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eelse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# do something else if false\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":5,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="if(${BOOLEAN_VARIABLE})
  # do something if true
else()
  # do something else if false
endif()" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">if</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${BOOLEAN_VARIABLE}</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #6A9955"># do something if true</span></span>
<span class="line"><span style="color: #569CD6">else</span><span style="color: #D4D4D4">()</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #6A9955"># do something else if false</span></span>
<span class="line"><span style="color: #569CD6">endif</span><span style="color: #D4D4D4">()</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>A typical example would be to check if the build system should build the tests that may come with a project as well, e.g.,</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"set(ENABLE_TESTS OFF CACHE BOOL \u0022Should tests be build as part of the project?\u0022 FORCE)\n\nif(${ENABLE_TESTS})\n  message(STATUS \u0022Building tests ...\u0022)\n  # perform test builds here ...\nendif()","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ENABLE_TESTS \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eOFF\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCACHE\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eBOOL\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Should tests be build as part of the project?\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e FORCE)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${ENABLE_TESTS}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  message\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Building tests ...\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# perform test builds here ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":6,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="set(ENABLE_TESTS OFF CACHE BOOL &quot;Should tests be build as part of the project?&quot; FORCE)

if(${ENABLE_TESTS})
  message(STATUS &quot;Building tests ...&quot;)
  # perform test builds here ...
endif()" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(ENABLE_TESTS </span><span style="color: #569CD6">OFF</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">CACHE</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">BOOL</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;Should tests be build as part of the project?&quot;</span><span style="color: #D4D4D4"> FORCE)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">if</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${ENABLE_TESTS}</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">  message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Building tests ...&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #6A9955"># perform test builds here ...</span></span>
<span class="line"><span style="color: #569CD6">endif</span><span style="color: #D4D4D4">()</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>By default, tests are typically turned off, so <code>OFF</code> would be the default behaviour here. Typically, only developers would need to turn the tests <code>ON</code>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>There is quite a bit more complexity to if/else statements; we can do more than simply checking if a variable evaluates to true or false, e.g. check if a variable is <code>DEFINED</code>, check if a file <code>EXISTS</code>, check if a <code>TARGET</code> exists, using <code>AND</code> as well as <code>OR</code> to check multiple statements, and so on. There is some wealth of information here in the <a href="https://cmake.org/cmake/help/latest/command/if.html#if" target="_blank" rel="noopener" title="">if documentation</a>. For example, we can do the following:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"set(LIB_TYPE DYNAMIC CACHE STRING \u0022Type of library, either STATIC or DYNAMIC\u0022 FORCE)\n\nif(${LIB_TYPE} STREQUAL \u0022STATIC\u0022)\n  add_library(cfdLib STATIC \u0022\u0022)\nelseif(${LIB_TYPE} STREQUAL \u0022DYNAMIC\u0022)\n  add_library(cfdLib SHARED \u0022\u0022)\nendif()\n\nif(TARGET cfdLib)\n  message(STATUS \u0022Library type: ${LIB_TYPE}\u0022)\n  # add relevant files, include directories, etc. here\n  target_sources(cfdLib PRIVATE \u0022\u0022)\n  target_include_directories(cfdLib PRIVATE \u0022\u0022)\n  target_link_libraries(cfdLib PRIVATE \u0022\u0022)\nelse()\n  message(FATAL_ERROR \u0022Failed to create target cfdLib\u0022)\nendif()","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(LIB_TYPE DYNAMIC \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCACHE\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eSTRING\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Type of library, either STATIC or DYNAMIC\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e FORCE)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${LIB_TYPE}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eSTREQUAL\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;STATIC\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  add_library\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(cfdLib STATIC \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eelseif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${LIB_TYPE}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eSTREQUAL\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;DYNAMIC\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  add_library\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(cfdLib SHARED \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTARGET\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e cfdLib)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  message\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Library type: ${LIB_TYPE}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# add relevant files, include directories, etc. here\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  target_sources\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(cfdLib PRIVATE \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  target_include_directories\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(cfdLib PRIVATE \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  target_link_libraries\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(cfdLib PRIVATE \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eelse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  message\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(FATAL_ERROR \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Failed to create target cfdLib\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":17,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="set(LIB_TYPE DYNAMIC CACHE STRING &quot;Type of library, either STATIC or DYNAMIC&quot; FORCE)

if(${LIB_TYPE} STREQUAL &quot;STATIC&quot;)
  add_library(cfdLib STATIC &quot;&quot;)
elseif(${LIB_TYPE} STREQUAL &quot;DYNAMIC&quot;)
  add_library(cfdLib SHARED &quot;&quot;)
endif()

if(TARGET cfdLib)
  message(STATUS &quot;Library type: ${LIB_TYPE}&quot;)
  # add relevant files, include directories, etc. here
  target_sources(cfdLib PRIVATE &quot;&quot;)
  target_include_directories(cfdLib PRIVATE &quot;&quot;)
  target_link_libraries(cfdLib PRIVATE &quot;&quot;)
else()
  message(FATAL_ERROR &quot;Failed to create target cfdLib&quot;)
endif()" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(LIB_TYPE DYNAMIC </span><span style="color: #569CD6">CACHE</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">STRING</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;Type of library, either STATIC or DYNAMIC&quot;</span><span style="color: #D4D4D4"> FORCE)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">if</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${LIB_TYPE}</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">STREQUAL</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;STATIC&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">  add_library</span><span style="color: #D4D4D4">(cfdLib STATIC </span><span style="color: #CE9178">&quot;&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">elseif</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${LIB_TYPE}</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">STREQUAL</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;DYNAMIC&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">  add_library</span><span style="color: #D4D4D4">(cfdLib SHARED </span><span style="color: #CE9178">&quot;&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">endif</span><span style="color: #D4D4D4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">if</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">TARGET</span><span style="color: #D4D4D4"> cfdLib)</span></span>
<span class="line"><span style="color: #569CD6">  message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Library type: ${LIB_TYPE}&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #6A9955"># add relevant files, include directories, etc. here</span></span>
<span class="line"><span style="color: #569CD6">  target_sources</span><span style="color: #D4D4D4">(cfdLib PRIVATE </span><span style="color: #CE9178">&quot;&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">  target_include_directories</span><span style="color: #D4D4D4">(cfdLib PRIVATE </span><span style="color: #CE9178">&quot;&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">  target_link_libraries</span><span style="color: #D4D4D4">(cfdLib PRIVATE </span><span style="color: #CE9178">&quot;&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">else</span><span style="color: #D4D4D4">()</span></span>
<span class="line"><span style="color: #569CD6">  message</span><span style="color: #D4D4D4">(FATAL_ERROR </span><span style="color: #CE9178">&quot;Failed to create target cfdLib&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">endif</span><span style="color: #D4D4D4">()</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We first define a string <code>LIB_TYPE</code> which can be either <code>STATIC</code> or <code>DYNAMIC</code>, and then on lines 3-7, we check which type was specified and create a library through the add_library() command accordingly. Since LIB_TYPE is a string (we see that we are using here <code>STREQUAL</code> to check the equality of two strings), it is prone to typos, so we check on line 9 that the <code>TARGET cfdLib</code> was previously defined. If it was, we add our source files, include directories, and anything else we may need for the library, but if the target doesn't exist, then we abort with a <code>FATAL_ERROR</code> message.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-looping">Looping</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Perhaps not as frequently used as any of the above features, but CMake supports looping through lists as well. Remember our <code>KEYWORDS</code> list, i.e.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"set(KEYWORDS \u0022cfd\u0022 \u0022programming\u0022 \u0022c++\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(KEYWORDS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;cfd\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;programming\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;c++\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="set(KEYWORDS &quot;cfd&quot; &quot;programming&quot; &quot;c++&quot;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(KEYWORDS </span><span style="color: #CE9178">&quot;cfd&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;programming&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;c++&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>With this list defined, we can now loop over all of these keywords and print them one by one, e.g.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"foreach(KEYWORD ${KEYWORDS})\n  message(STATUS \u0022Keyword: ${KEYWORD}\u0022)\nendforeach()","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eforeach\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(KEYWORD \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${KEYWORDS}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  message\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Keyword: ${KEYWORD}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendforeach\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":3,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="foreach(KEYWORD ${KEYWORDS})
  message(STATUS &quot;Keyword: ${KEYWORD}&quot;)
endforeach()" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">foreach</span><span style="color: #D4D4D4">(KEYWORD </span><span style="color: #569CD6">${KEYWORDS}</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">  message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Keyword: ${KEYWORD}&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">endforeach</span><span style="color: #D4D4D4">()</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>This will print all keywords, one after another, to the console, as you would expect. There isn't really a great example where loops may become important, as typically, we would pass lists (like a collection of all source files) to a CMake function, which would then internally process that list. For completeness, though, you can look up the foreach documentation, which you'll find is considerably shorter compared to other documentation I have linked to above.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-working-with">Working with project-specific options</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Once your project grows, you will find that you have to set a lot of user-specific variables, and sometimes they need to be set in accordance with your operating system (where we can check with the if/else statement syntax explored above which operating system we are on). This will result in a messy <code>CMakeLists.txt</code> file, which really should only contain high-level build instruction, and then delegate the nitty-gritty details to additional <code>CMakeLists.txt</code> files, which are then included in the top-level CMake file.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>When it comes to variables, we could do that as well, but there is a convention to put all of your user-defined variables that can be set over the command line within a file called <code>CMakeOptions.txt</code>, which is located together with the <code>CMakeLists.txt</code> file in the root directory of the project. To make use of this additional file, we first have to include it somewhere before using it, i.e. we could modify the starter template <code>CMakeLists.txt</code> file to</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake_minimum_required(VERSION 3.23)\nproject(AdvancedCMakeExample)\ninclude(CMakeOptions.txt)\n\n### put your commands below for testing","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003ecmake_minimum_required\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(VERSION 3.23)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eproject\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(AdvancedCMakeExample)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003einclude\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(CMakeOptions.txt)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e### put your commands below for testing\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":5,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake_minimum_required(VERSION 3.23)
project(AdvancedCMakeExample)
include(CMakeOptions.txt)

### put your commands below for testing" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">cmake_minimum_required</span><span style="color: #D4D4D4">(VERSION 3.23)</span></span>
<span class="line"><span style="color: #569CD6">project</span><span style="color: #D4D4D4">(AdvancedCMakeExample)</span></span>
<span class="line"><span style="color: #569CD6">include</span><span style="color: #D4D4D4">(CMakeOptions.txt)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">### put your commands below for testing</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Now, we can put our additional variables into the <code>CMakeOptions.txt</code> file. Using variables defined before, we could have, for example:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"option(ENABLE_TESTS \u0022Should tests be build as part of the project?\u0022 ON)\nset(LIB_TYPE DYNAMIC CACHE STRING \u0022Type of library, either STATIC or DYNAMIC\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eoption\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ENABLE_TESTS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Should tests be build as part of the project?\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eON\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(LIB_TYPE DYNAMIC \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCACHE\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eSTRING\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Type of library, either STATIC or DYNAMIC\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":2,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="option(ENABLE_TESTS &quot;Should tests be build as part of the project?&quot; ON)
set(LIB_TYPE DYNAMIC CACHE STRING &quot;Type of library, either STATIC or DYNAMIC&quot;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">option</span><span style="color: #D4D4D4">(ENABLE_TESTS </span><span style="color: #CE9178">&quot;Should tests be build as part of the project?&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">ON</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(LIB_TYPE DYNAMIC </span><span style="color: #569CD6">CACHE</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">STRING</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;Type of library, either STATIC or DYNAMIC&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>It is a convention to use <code>option()</code> for Boolean values and <code>set()</code> for strings. Typically, in the example above, we would probably use and <code>option()</code> for the library build type as well and define a default, such as building the static version by default, which would then change the variable to</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"option(ENABLE_SHARED \u0022If enabled, a shared (dynamic) library will be built, otherwise it defaults static\u0022 OFF)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eoption\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ENABLE_SHARED \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;If enabled, a shared (dynamic) library will be built, otherwise it defaults static\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eOFF\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="option(ENABLE_SHARED &quot;If enabled, a shared (dynamic) library will be built, otherwise it defaults static&quot; OFF)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">option</span><span style="color: #D4D4D4">(ENABLE_SHARED </span><span style="color: #CE9178">&quot;If enabled, a shared (dynamic) library will be built, otherwise it defaults static&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">OFF</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>This is a safer option (due to string comparison issues), and you will find that most projects configure their build using almost exclusively the <code>option()</code> command. But I mention the <code>set()</code> command here for completeness.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you want to go through all options that are defined for a specific project and you are within the build folder, you can pass the additional -LAH flags to CMake, which will print all options to the console. So, if we type</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake -LAH ..","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-LAH\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e..\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake -LAH .." style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-LAH</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">..</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>we get a whole bunch of predefined variables printed to the screen, but also the ones we have defined, which conventionally are put at the bottom of the output so we can easily find them scrolling up the terminal:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"// If enabled, a shared (dynamic) library will be built, otherwise it defaults static\nENABLE_SHARED:BOOL=OFF\n\n// Should tests be build as part of the project?\nENABLE_TESTS:BOOL=ON\n\n// Type of library, either STATIC or DYNAMIC\nLIB_TYPE:STRING=DYNAMIC","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e// If enabled, a shared (dynamic) library will be built, otherwise it defaults static\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eENABLE_SHARED:BOOL=OFF\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e// Should tests be build as part of the project?\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eENABLE_TESTS:BOOL=ON\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e// Type of library, either STATIC or DYNAMIC\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eLIB_TYPE:STRING=DYNAMIC\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"plaintext","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":8,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="// If enabled, a shared (dynamic) library will be built, otherwise it defaults static
ENABLE_SHARED:BOOL=OFF

// Should tests be build as part of the project?
ENABLE_TESTS:BOOL=ON

// Type of library, either STATIC or DYNAMIC
LIB_TYPE:STRING=DYNAMIC" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">// If enabled, a shared (dynamic) library will be built, otherwise it defaults static</span></span>
<span class="line"><span style="color: #D4D4D4">ENABLE_SHARED:BOOL=OFF</span></span>
<span class="line"><span style="color: #D4D4D4"></span></span>
<span class="line"><span style="color: #D4D4D4">// Should tests be build as part of the project?</span></span>
<span class="line"><span style="color: #D4D4D4">ENABLE_TESTS:BOOL=ON</span></span>
<span class="line"><span style="color: #D4D4D4"></span></span>
<span class="line"><span style="color: #D4D4D4">// Type of library, either STATIC or DYNAMIC</span></span>
<span class="line"><span style="color: #D4D4D4">LIB_TYPE:STRING=DYNAMIC</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>To change any of these values on the command line, proceed as with any variable, i.e. to enable testing and the build of a dynamic library, you would specify</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake -DENABLE_SHARED=ON -DENABLE_TESTS=ON ..","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DENABLE_SHARED=ON\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DENABLE_TESTS=ON\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e..\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake -DENABLE_SHARED=ON -DENABLE_TESTS=ON .." style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DENABLE_SHARED=ON</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DENABLE_TESTS=ON</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">..</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-including-additional-files">Function, Macros, and including additional files</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Similar to how we dealt with variables (well, strings and Booleans), we can also add functions and macros, which behave like functions and macros in C/C++, but they have subtle differences in how they work and how they have to be used. If you aren't familiar with these subtle differences, you can lose quite some time with debugging and trying to understand why your code won't work. I always enjoy challenging ChatGPT and the like to see if they can understand these subtle differences, but they can't.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Anyways, I think functions probably don't require much of an introduction, they do exactly what you'd expect them to do, i.e. you can define some piece of code that you can then execute later when you need it, potentially several times. Here is a basic example:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"function(hello NAME)\n  message(STATUS \u0022Hello ${NAME}\u0022)\nendfunction()\n\nset(MY_NAME \u0022Tom\u0022)\nhello(${MY_NAME})","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003efunction\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(hello \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eNAME\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  message\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Hello ${NAME}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendfunction\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(MY_NAME \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Tom\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003ehello(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${MY_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":6,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="function(hello NAME)
  message(STATUS &quot;Hello ${NAME}&quot;)
endfunction()

set(MY_NAME &quot;Tom&quot;)
hello(${MY_NAME})" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">function</span><span style="color: #D4D4D4">(hello </span><span style="color: #569CD6">NAME</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">  message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Hello ${NAME}&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">endfunction</span><span style="color: #D4D4D4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(MY_NAME </span><span style="color: #CE9178">&quot;Tom&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">hello(</span><span style="color: #569CD6">${MY_NAME}</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>The function <code>hello</code> is defined on lines 1-3, which takes one argument <code>NAME</code>. It doesn't do anything interesting other than printing the name back to the console with the word hello prepended. On line 5, we set a name to the variable <code>MY_NAME</code> and then call the function with this variable.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>So far, so good; let's do the same with a macro; the code would change to</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"macro(hello NAME)\n  message(STATUS \u0022Hello ${NAME}\u0022)\nendmacro()\n\nset(MY_NAME \u0022Tom\u0022)\nhello(${MY_NAME})","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emacro\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(hello \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eNAME\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  message\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Hello ${NAME}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendmacro\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(MY_NAME \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Tom\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003ehello(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${MY_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":6,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="macro(hello NAME)
  message(STATUS &quot;Hello ${NAME}&quot;)
endmacro()

set(MY_NAME &quot;Tom&quot;)
hello(${MY_NAME})" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">macro</span><span style="color: #D4D4D4">(hello </span><span style="color: #569CD6">NAME</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">  message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Hello ${NAME}&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">endmacro</span><span style="color: #D4D4D4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(MY_NAME </span><span style="color: #CE9178">&quot;Tom&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">hello(</span><span style="color: #569CD6">${MY_NAME}</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p> Looks pretty similar, doesn't it? Well, yes, it is, only the keyword <code>function</code> has changed to <code>macro</code> (and <code>endfunction</code> to <code>endmacro</code>). It works in the same way, so why do we need two separate features doing the same thing? It all comes down to the <a href="https://en.wikipedia.org/wiki/Scope_(computer_science)" target="_blank" rel="noopener" title="">scope</a>, which is an important concept in programming general.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The scope defines what is visible to the compiler, interpreter, or, well, here, CMake. In a function, all variables that are defined within the function will remain local to that function. Once we leave the function (or the current scope, if we want to sound fancy), these variables will go out-of-scope (another fancy term, we can also say the variables will get deleted).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Macros, on the other hand, are just substitutions. So, in our example above, this is what CMake really sees:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"macro(hello NAME)\n  message(STATUS \u0022Hello ${NAME}\u0022)\nendmacro()\n\nset(MY_NAME \u0022Tom\u0022)\nmessage(STATUS \u0022Hello Tom\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emacro\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(hello \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eNAME\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  message\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Hello ${NAME}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendmacro\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(MY_NAME \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Tom\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emessage\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Hello Tom\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":6,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="macro(hello NAME)
  message(STATUS &quot;Hello ${NAME}&quot;)
endmacro()

set(MY_NAME &quot;Tom&quot;)
message(STATUS &quot;Hello Tom&quot;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">macro</span><span style="color: #D4D4D4">(hello </span><span style="color: #569CD6">NAME</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">  message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Hello ${NAME}&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">endmacro</span><span style="color: #D4D4D4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(MY_NAME </span><span style="color: #CE9178">&quot;Tom&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Hello Tom&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>CMake has taken the code within the macro and substituted it on line 6, where the macro call occurred. Macros are, therefore, convenient ways of substituting code. As a result, macros don't have their own local scope and thus if you pass variables to a macro and change them, they will also change the variables in the parent scope (where they were called from). Thus, macros may be useful if you want to return a value from a function, while functions should always be used where no return value is required.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Now, here comes the funny business; let's look at the following code:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"macro(hello NAME)\n  message(STATUS \u0022Hello ${NAME}\u0022)\nendmacro()\n\nset(MY_NAME \u0022Tom\u0022)\n\nhello(${MY_NAME})\nhello(MY_NAME)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emacro\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(hello \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eNAME\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  message\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Hello ${NAME}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendmacro\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(MY_NAME \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Tom\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003ehello(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${MY_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003ehello(MY_NAME)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":8,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="macro(hello NAME)
  message(STATUS &quot;Hello ${NAME}&quot;)
endmacro()

set(MY_NAME &quot;Tom&quot;)

hello(${MY_NAME})
hello(MY_NAME)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">macro</span><span style="color: #D4D4D4">(hello </span><span style="color: #569CD6">NAME</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">  message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Hello ${NAME}&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">endmacro</span><span style="color: #D4D4D4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(MY_NAME </span><span style="color: #CE9178">&quot;Tom&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">hello(</span><span style="color: #569CD6">${MY_NAME}</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">hello(MY_NAME)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Looking at lines 7 and 8, which are both legal syntax, what will they produce? Well, this is the output:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"Hello Tom\nHello MY_NAME","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eHello Tom\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eHello MY_NAME\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":2,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="Hello Tom
Hello MY_NAME" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">Hello Tom</span></span>
<span class="line"><span style="color: #D4D4D4">Hello MY_NAME</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>On line 7, we have passed the value that is stored within the <code>MY_NAME</code> variable, which evaluates to <code>Tom</code>. But on line 8, we have passed only the name of the variable, not the value of it, to the macro. Notice that the variable name in the macro on line 1 is defined as <code>NAME</code>, not <code>MY_NAME</code>, they have different names on purpose, as you can see in the output provided above, <code>NAME</code> is now changed to <code>MY_NAME</code>. Again, we need to think about macros as simply text substitution.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>When we call <code>hello(MY_NAME)</code> on line 8, the macro will evaluate <code>${NAME}</code> to what was passed to the macro itself, which is <code>MY_NAME</code>. Thus, the macro would look in the end</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"message(STATUS \u0022Hello MY_NAME\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emessage\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Hello MY_NAME\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="message(STATUS &quot;Hello MY_NAME&quot;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Hello MY_NAME&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>and this is exactly what is printed to the console. But what if we wanted to get the actual value of this variable? Well, we have already learned that this requires to put the variable within the <code>${}</code> syntax, so why not do that? Let's change the macro to</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"macro(hello NAME)\n  message(STATUS \u0022Hello ${${NAME}}\u0022)\nendmacro()","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emacro\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(hello \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eNAME\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  message\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Hello ${${NAME}}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendmacro\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":3,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="macro(hello NAME)
  message(STATUS &quot;Hello ${${NAME}}&quot;)
endmacro()" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">macro</span><span style="color: #D4D4D4">(hello </span><span style="color: #569CD6">NAME</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">  message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Hello ${${NAME}}&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">endmacro</span><span style="color: #D4D4D4">()</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Notice how we are accessing the content of the <code>NAME</code> variable now twice. First, to substitute the <code>NAME</code> variable itself to whatever was passed to the macro, and a second time, to get the value of what this variable holds. Doing that and calling the macro again with the following syntax:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"set(MY_NAME \u0022Tom\u0022)\n\nhello(${MY_NAME})\nhello(MY_NAME)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(MY_NAME \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Tom\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003ehello(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${MY_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003ehello(MY_NAME)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":4,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="set(MY_NAME &quot;Tom&quot;)

hello(${MY_NAME})
hello(MY_NAME)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(MY_NAME </span><span style="color: #CE9178">&quot;Tom&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">hello(</span><span style="color: #569CD6">${MY_NAME}</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">hello(MY_NAME)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>will produce the following output:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"Hello \nHello Tom","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eHello \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eHello Tom\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":2,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="Hello 
Hello Tom" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">Hello </span></span>
<span class="line"><span style="color: #D4D4D4">Hello Tom</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Did you get why? The second line we understand, i.e. the <code>NAME</code> variable is first expanded to <code>MY_NAME</code> and then this, in turn is expanded to <code>Tom</code>. But why is the call to <code>hello(${MY_NAME})</code> now returning simply <code>Hello</code>? Well, for the same reason. We are already expanding the variable <code>MY_NAME</code> within the macro call, i.e. on line 3. The macro gets the value <code>Tom</code> passed to it, and then it tries to access the value that is stored in the variable <code>Tom</code> (which isn't defined anywhere). An undefined variable will silently evaluate to an empty string, and this is what we are seeing.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Let's put this into a more realistic use case and get back to the version bumping example we saw earlier. This is the code for both the function and the macro:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"function(bumpVersionNumberFunction VERSION_MAJOR VERSION_MINOR)\n  math(EXPR VERSION_MINOR \u0022${VERSION_MINOR} + 1\u0022)\n  message(STATUS \u0022Version in function:    ${VERSION_MAJOR}.${VERSION_MINOR}\u0022)\nendfunction()\n\nmacro(bumpVersionNumberMacro VERSION_MAJOR VERSION_MINOR)\n  math(EXPR VERSION_MINOR \u0022${${VERSION_MINOR}} + 1\u0022)\n  message(STATUS \u0022Version in macro:       ${${VERSION_MAJOR}}.${${VERSION_MINOR}}\u0022)\nendmacro()","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003efunction\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(bumpVersionNumberFunction VERSION_MAJOR VERSION_MINOR)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  math\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(EXPR VERSION_MINOR \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;${VERSION_MINOR} + 1\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  message\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Version in function:    ${VERSION_MAJOR}.${VERSION_MINOR}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendfunction\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emacro\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(bumpVersionNumberMacro VERSION_MAJOR VERSION_MINOR)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  math\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(EXPR VERSION_MINOR \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;${${VERSION_MINOR}} + 1\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  message\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Version in macro:       ${${VERSION_MAJOR}}.${${VERSION_MINOR}}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendmacro\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":9,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="function(bumpVersionNumberFunction VERSION_MAJOR VERSION_MINOR)
  math(EXPR VERSION_MINOR &quot;${VERSION_MINOR} + 1&quot;)
  message(STATUS &quot;Version in function:    ${VERSION_MAJOR}.${VERSION_MINOR}&quot;)
endfunction()

macro(bumpVersionNumberMacro VERSION_MAJOR VERSION_MINOR)
  math(EXPR VERSION_MINOR &quot;${${VERSION_MINOR}} + 1&quot;)
  message(STATUS &quot;Version in macro:       ${${VERSION_MAJOR}}.${${VERSION_MINOR}}&quot;)
endmacro()" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">function</span><span style="color: #D4D4D4">(bumpVersionNumberFunction VERSION_MAJOR VERSION_MINOR)</span></span>
<span class="line"><span style="color: #569CD6">  math</span><span style="color: #D4D4D4">(EXPR VERSION_MINOR </span><span style="color: #CE9178">&quot;${VERSION_MINOR} + 1&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">  message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Version in function:    ${VERSION_MAJOR}.${VERSION_MINOR}&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">endfunction</span><span style="color: #D4D4D4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">macro</span><span style="color: #D4D4D4">(bumpVersionNumberMacro VERSION_MAJOR VERSION_MINOR)</span></span>
<span class="line"><span style="color: #569CD6">  math</span><span style="color: #D4D4D4">(EXPR VERSION_MINOR </span><span style="color: #CE9178">&quot;${${VERSION_MINOR}} + 1&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">  message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Version in macro:       ${${VERSION_MAJOR}}.${${VERSION_MINOR}}&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">endmacro</span><span style="color: #D4D4D4">()</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We have simply reused here the example from before where we are now incrementing the minor version of our project. We print the version after each increment, i.e. both in the function and in the macro. We can test this code with the following syntax:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"bumpVersionNumberFunction(${VERSION_MAJOR} ${VERSION_MINOR})\nmessage(STATUS \u0022Version after function: ${VERSION_MAJOR}.${VERSION_MINOR}\u0022)\n\nbumpVersionNumberMacro(VERSION_MAJOR VERSION_MINOR)\nmessage(STATUS \u0022Version after macro:    ${VERSION_MAJOR}.${VERSION_MINOR}\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003ebumpVersionNumberFunction(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${VERSION_MAJOR}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${VERSION_MINOR}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emessage\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Version after function: ${VERSION_MAJOR}.${VERSION_MINOR}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003ebumpVersionNumberMacro(VERSION_MAJOR VERSION_MINOR)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003emessage\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(STATUS \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Version after macro:    ${VERSION_MAJOR}.${VERSION_MINOR}\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":5,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="bumpVersionNumberFunction(${VERSION_MAJOR} ${VERSION_MINOR})
message(STATUS &quot;Version after function: ${VERSION_MAJOR}.${VERSION_MINOR}&quot;)

bumpVersionNumberMacro(VERSION_MAJOR VERSION_MINOR)
message(STATUS &quot;Version after macro:    ${VERSION_MAJOR}.${VERSION_MINOR}&quot;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">bumpVersionNumberFunction(</span><span style="color: #569CD6">${VERSION_MAJOR}</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">${VERSION_MINOR}</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Version after function: ${VERSION_MAJOR}.${VERSION_MINOR}&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">bumpVersionNumberMacro(VERSION_MAJOR VERSION_MINOR)</span></span>
<span class="line"><span style="color: #569CD6">message</span><span style="color: #D4D4D4">(STATUS </span><span style="color: #CE9178">&quot;Version after macro:    ${VERSION_MAJOR}.${VERSION_MINOR}&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>This will print the following output:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"Version in function:    1.3\nVersion after function: 1.2\nVersion in macro:       1.3\nVersion after macro:    1.3","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eVersion in function:    1.3\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eVersion after function: 1.2\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eVersion in macro:       1.3\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eVersion after macro:    1.3\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":4,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="Version in function:    1.3
Version after function: 1.2
Version in macro:       1.3
Version after macro:    1.3" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">Version in function:    1.3</span></span>
<span class="line"><span style="color: #D4D4D4">Version after function: 1.2</span></span>
<span class="line"><span style="color: #D4D4D4">Version in macro:       1.3</span></span>
<span class="line"><span style="color: #D4D4D4">Version after macro:    1.3</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Within the function, we are increasing the minor version, and this is printed correctly to the screen, but because changes within functions are made to local (scope) variables after we leave the function, those changes are lost, and the variables from the parent scope retain their values. This is in contrast to what is happening in a macro, where changes that are made to local variables will overwrite variables in the parent scope if they have the same name, as we can see here.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Typically, we use functions to do one specific part of the build stage, e.g. deal with setting up tests, finding dependencies/libraries (or even downloading, compiling, and installing them for the current project if we so wish), and it may make sense to keep them in their own separate CMake file. As we have seen with the CMakeOptions.txt file, we can simply include additional files with the include() statement and the convention is that additional CMake files have the extension <code>cmake</code>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>So let's do that. Create a file called <code>functions.cmake</code> that is in the same directory as the <code>CMakeLists.txt</code> file. Then, simply include that code with</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"include(functions.cmake)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003einclude\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(functions.cmake)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="include(functions.cmake)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">include</span><span style="color: #D4D4D4">(functions.cmake)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>This is similar to a macro in that the code is essentially copied to where the <code>include()</code> statement is being called. If you are working on a larger project, you would typically create an additional folder called <code>cmake</code> where you want to store all additional CMake files. In that case, you would have to provide the path as well to the <code>include()</code> statement, e.g. <code>include(cmake/functions.cmake)</code>.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-variable-substitution-in-templates-and-config-files">Variable substitution in templates and config files</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>This is a rather nice feature in CMake. When you are working on a project, and you want this to be used by anyone, chances are you will end up generating a library with some form of header file, including all required header files for your library. This is quite handy but also means that every time you update the library (add a new header), you'll have to update this single header to include the file as well. This can be error-prone, so CMake allows us to generate a new header file based on a template automatically.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>These template files (or configure files, as they are more commonly known, though that can be misleading in my view), typically have a file ending of <code>*.in</code>. These files will have CMake-specific syntax in them, which would not compile if we used the *.in file itself. During the configuration, CMake will look into this file (if we tell it to) and replace any variables from the CMake scope within this file. CMake will then store a new file, typically using the same name and dropping the *.in extension, though we can change that if we want to.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>So let's look at a simple example, again (ab)using our version numbers we have specified in our CMake file. Let's say that we want to display the current version in the header file that we want users to use if they are using our library. Then, we can create a file called <code>libHeader.hpp.in</code> (in the root folder, though for larger projects, I would recommend putting these files within a <code>config/</code> folder) with the following content:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"#pragma once\n\n#define VERSION_MAJOR @VERSION_MAJOR@\n#define VERSION_MINOR @VERSION_MINOR@\n\n// any additional code goes here","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#pragma\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eonce\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#define\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e VERSION_MAJOR @VERSION_MAJOR@\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#define\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e VERSION_MINOR @VERSION_MINOR@\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e// any additional code goes here\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":6,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="#pragma once

#define VERSION_MAJOR @VERSION_MAJOR@
#define VERSION_MINOR @VERSION_MINOR@

// any additional code goes here" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">#pragma</span><span style="color: #569CD6"> </span><span style="color: #9CDCFE">once</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C586C0">#define</span><span style="color: #569CD6"> VERSION_MAJOR @VERSION_MAJOR@</span></span>
<span class="line"><span style="color: #C586C0">#define</span><span style="color: #569CD6"> VERSION_MINOR @VERSION_MINOR@</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// any additional code goes here</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Here, we define the <code>VERSION_MAJOR</code> and <code>VERSION_MINOR</code> using the <code>@cmake-variable-name@</code> syntax. When CMake processes this file, it will look for variables that are named <code>VERSION_MAJOR</code> and <code>VERSION_MINOR</code>, respectively. So, let's put together a minimal example:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"set(VERSION_MAJOR 1 CACHE STRING \u0022Major version\u0022)\nset(VERSION_MINOR 2 CACHE STRING \u0022Minor version\u0022)\nconfigure_file(libHeader.hpp.in libHeader.hpp)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(VERSION_MAJOR 1 \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCACHE\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eSTRING\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Major version\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eset\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(VERSION_MINOR 2 \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCACHE\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eSTRING\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Minor version\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econfigure_file\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(libHeader.hpp.in libHeader.hpp)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":3,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="set(VERSION_MAJOR 1 CACHE STRING &quot;Major version&quot;)
set(VERSION_MINOR 2 CACHE STRING &quot;Minor version&quot;)
configure_file(libHeader.hpp.in libHeader.hpp)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(VERSION_MAJOR 1 </span><span style="color: #569CD6">CACHE</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">STRING</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;Major version&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">set</span><span style="color: #D4D4D4">(VERSION_MINOR 2 </span><span style="color: #569CD6">CACHE</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">STRING</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;Minor version&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">configure_file</span><span style="color: #D4D4D4">(libHeader.hpp.in libHeader.hpp)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>The call on line 3 to <code>configure_file()</code> expects two arguments, the first being the configure file we want to use and the second being the output file we want to generate. The output file will be placed within the <code>build/</code> directory. Executing CMake now again, we will see that the file <code>build/libHeader.hpp</code> was generated, and that we have the following content in there:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"#pragma once\n\n#define VERSION_MAJOR 1\n#define VERSION_MINOR 2\n\n// any additional code goes here\n","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#pragma\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eonce\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#define\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e VERSION_MAJOR 1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#define\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e VERSION_MINOR 2\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e// any additional code goes here\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":7,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="#pragma once

#define VERSION_MAJOR 1
#define VERSION_MINOR 2

// any additional code goes here
" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">#pragma</span><span style="color: #569CD6"> </span><span style="color: #9CDCFE">once</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C586C0">#define</span><span style="color: #569CD6"> VERSION_MAJOR 1</span></span>
<span class="line"><span style="color: #C586C0">#define</span><span style="color: #569CD6"> VERSION_MINOR 2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// any additional code goes here</span></span>
<span class="line"></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>You can see how this can quickly become a powerful tool, especially if you combine it with information that is automatically generated by CMake (like the version number). If you are working on your own library, chances are that you will use this feature. But even if you don't use a compiled language such as C/C++, you can still use this feature to automatically generate source files for any language where you want to replace lines of code automatically based on some input (of course, for the nerds, <a href="https://www.gnu.org/software/sed/" target="_blank" rel="noopener" title="">sed</a> is just as good).</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-generator-expressions">Generator expressions</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>We haven't quite yet looked into the control flow of CMake itself. But let's look at the simplest CMake file of them all, i.e. the one we have used thus far to test some CMake specifics and which we saw already at the beginning of this article. I'll repeat here for completeness:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake_minimum_required(VERSION 3.23)\nproject(AdvancedCMakeExample)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003ecmake_minimum_required\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(VERSION 3.23)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eproject\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(AdvancedCMakeExample)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":2,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake_minimum_required(VERSION 3.23)
project(AdvancedCMakeExample)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">cmake_minimum_required</span><span style="color: #D4D4D4">(VERSION 3.23)</span></span>
<span class="line"><span style="color: #569CD6">project</span><span style="color: #D4D4D4">(AdvancedCMakeExample)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Let's change our <code>CMakeLists.txt</code> file back to this (if you have followed along and you have some commands in your file). Now, let's run CMake on it from within the <code>build/</code> folder, e.g. calling <code>cmake ..</code> We will get the following output (I have removed all files within the <code>build/</code> folder, the output will vary if you already have some files present here):</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"\u002d\u002d Building for: Visual Studio 17 2022\n\u002d\u002d Selecting Windows SDK version 10.0.22621.0 to target Windows 10.0.22631.\n\u002d\u002d The CXX compiler identification is MSVC 19.37.32825.0\n\u002d\u002d Detecting CXX compiler ABI info\n\u002d\u002d Detecting CXX compiler ABI info - done\n\u002d\u002d Check for working CXX compiler: C:/Program Files/Microsoft Visual Studio/2022/Community/VC/Tools/MSVC/14.37.32822/bin/Hostx64/x64/cl.exe - skipped\n\u002d\u002d Detecting CXX compile features\n\u002d\u002d Detecting CXX compile features - done\n\u002d\u002d Configuring done (1.5s)\n\u002d\u002d Generating done (0.0s)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u002d\u002d Building for: Visual Studio 17 2022\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u002d\u002d Selecting Windows SDK version 10.0.22621.0 to target Windows 10.0.22631.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u002d\u002d The CXX compiler identification is MSVC 19.37.32825.0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u002d\u002d Detecting CXX compiler ABI info\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u002d\u002d Detecting CXX compiler ABI info - done\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u002d\u002d Check for working CXX compiler: C:/Program Files/Microsoft Visual Studio/2022/Community/VC/Tools/MSVC/14.37.32822/bin/Hostx64/x64/cl.exe - skipped\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u002d\u002d Detecting CXX compile features\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u002d\u002d Detecting CXX compile features - done\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u002d\u002d Configuring done (1.5s)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u002d\u002d Generating done (0.0s)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"plaintext","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":10,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="-- Building for: Visual Studio 17 2022
-- Selecting Windows SDK version 10.0.22621.0 to target Windows 10.0.22631.
-- The CXX compiler identification is MSVC 19.37.32825.0
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: C:/Program Files/Microsoft Visual Studio/2022/Community/VC/Tools/MSVC/14.37.32822/bin/Hostx64/x64/cl.exe - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (1.5s)
-- Generating done (0.0s)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">-- Building for: Visual Studio 17 2022</span></span>
<span class="line"><span style="color: #D4D4D4">-- Selecting Windows SDK version 10.0.22621.0 to target Windows 10.0.22631.</span></span>
<span class="line"><span style="color: #D4D4D4">-- The CXX compiler identification is MSVC 19.37.32825.0</span></span>
<span class="line"><span style="color: #D4D4D4">-- Detecting CXX compiler ABI info</span></span>
<span class="line"><span style="color: #D4D4D4">-- Detecting CXX compiler ABI info - done</span></span>
<span class="line"><span style="color: #D4D4D4">-- Check for working CXX compiler: C:/Program Files/Microsoft Visual Studio/2022/Community/VC/Tools/MSVC/14.37.32822/bin/Hostx64/x64/cl.exe - skipped</span></span>
<span class="line"><span style="color: #D4D4D4">-- Detecting CXX compile features</span></span>
<span class="line"><span style="color: #D4D4D4">-- Detecting CXX compile features - done</span></span>
<span class="line"><span style="color: #D4D4D4">-- Configuring done (1.5s)</span></span>
<span class="line"><span style="color: #D4D4D4">-- Generating done (0.0s)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We discussed before that there are different stages in CMake, and thus far, we have only really looked at the configuration and build step. But after taking a close look at the output, we see that there is a configuration step (finished on line 9), as well as a generation step (finished on line 10). The generation step is what we will look at next in this section.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>To understand why we need this, it is worthwhile looking at the configuration step. We already saw the variable <code>CMAKE_BUILD_TYPE</code> in the <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/introduction-to-cmake-for-cfd-practitioners" target="_blank" rel="noopener" title="">previous article</a>, which either evaluated to <code>Debug</code> or <code>Release</code>. This is a variable set at the configuration stage, i.e., before the build stage. But then we also saw the <code>--config Debug</code> and <code>--config Release</code> flag during our build stage, i.e. when we called <code>cmake --build . --config Debug</code> or <code>cmake --build . --config Release</code>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>I said that we only ever need to specify one of these configurations, i.e. either CMAKE_BUILD_TYPE or --config, and this would depend on the build system. The reason is that some build systems only know at the build stage which configuration should be used, and this can change, i.e. we can easily build either a Debug or Release binary. My convention was to specify both so that we didn't have to accidentally set it at the wrong time, but we didn't really go further into this.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The problem here is that once the configurations step is done, we can't change variables anymore, and so if the configuration changes during the build step, CMake has no way of reacting to this change (all its variables are already set). Imaging you want to change compiler flags based on your current configuration. If that is only available at the build stage, then CMake has no chance of capturing this. This is where generator expression comes, which allows you to evaluate variables at different stages of the CMake toolchain.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Generator expressions are a vast topic and probably could be discussed in their own article, given the richness of the feature. However, I think this is beside the point; there are two common use cases, and if you understand both, you'll have covered most use cases. Let's go through them in turn</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-conditional-variable-evaluations">Conditional variable evaluations</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The basic use case for generator expressions is to check whether a given condition is true or not. If it is true, then a given value will be used; if it is false, an empty string will be returned. The generator expressions can be identified by their $&lt;&gt; syntax, which is in contrast to the ${} the syntax we saw for expanding variables. In its most basic form, we could have the following expression:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"$\u0026lt;condition-to-check:value-if-condition-is-true\u003e","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e$\u0026lt;condition-to-check:value-if-condition-is-\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003etrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="$&lt;condition-to-check:value-if-condition-is-true&gt;" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">$&lt;condition-to-check:value-if-condition-is-</span><span style="color: #569CD6">true</span><span style="color: #D4D4D4">&gt;</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We can nest generator expressions as well, which makes them rather powerful. So, for example, we could use</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"$\u0026lt;$\u0026lt;check-if-true\u003e:if-true-set-value\u003e","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e$\u0026lt;$\u0026lt;check-if-\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003etrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026gt;:if-\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003etrue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e-set-value\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="$&lt;$&lt;check-if-true&gt;:if-true-set-value&gt;" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">$&lt;$&lt;check-if-</span><span style="color: #569CD6">true</span><span style="color: #D4D4D4">&gt;:if-</span><span style="color: #569CD6">true</span><span style="color: #D4D4D4">-set-value&gt;</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>A common use case here is to check if the current build target is set to <code>Debug</code>, if that is the case, we may want to enable <a href="https://cfd.university/learn/the-complete-guide-to-software-testing-for-cfd-applications/what-is-test-coverage-and-how-to-use-lcov-gcov-for-testing/" target="_blank" rel="noopener" title="">coverage</a> to test how much of our tests are covering our codebase. This could be achieved with the following generator expression:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"add_library(cfdLib)\n\nif (UNIX)\n  target_link_options(cfdLib\n    PRIVATE $\u0026lt;$\u0026lt;CONFIG:Debug\u003e:\u002d\u002dcoverage\u003e\n  )\nendif(UNIX)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eadd_library\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(cfdLib)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e (UNIX)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  target_link_options(cfdLib\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    PRIVATE $\u0026lt;$\u0026lt;CONFIG:Debug\u0026gt;:\u002d\u002dcoverage\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(UNIX)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":7,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="add_library(cfdLib)

if (UNIX)
  target_link_options(cfdLib
    PRIVATE $&lt;$&lt;CONFIG:Debug&gt;:--coverage&gt;
  )
endif(UNIX)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">add_library</span><span style="color: #D4D4D4">(cfdLib)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">if</span><span style="color: #D4D4D4"> (UNIX)</span></span>
<span class="line"><span style="color: #D4D4D4">  target_link_options(cfdLib</span></span>
<span class="line"><span style="color: #D4D4D4">    PRIVATE $&lt;$&lt;CONFIG:Debug&gt;:--coverage&gt;</span></span>
<span class="line"><span style="color: #D4D4D4">  )</span></span>
<span class="line"><span style="color: #569CD6">endif</span><span style="color: #D4D4D4">(UNIX)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Here, we are first defining a library called <code>cfdLib</code> which will get the <code>--coverage</code> linker flag added to its compiler flags via the <code>target_link_options()</code> function, if the build type (<code>CONFIG</code>) is set to <code>Debug</code>. If it is not, then it will evaluate to an empty string and nothing gets added to the compiler flags.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>One question you may ask yourself then is, how can I know what conditions I can check? (i.e. how do I know I have to use <code>CONFIG</code> to check for the build type)? Well, unfortunately, this requires a trip to the <a href="https://cmake.org/cmake/help/latest/manual/cmake-generator-expressions.7.html" target="_blank" rel="noopener" title="">generator expression documentation</a>, which contains quite a lot of information (and you'll understand why I say this could be discussed in its own article).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The good news is, though, that most of the time, generator expressions are used for very similar functionalities. If you have a particular CMake problem and search for a solution, you'll likely stumble across a solution that you can copy like-for-like into your own script. So, it is important to identify when generator expressions are used and why, but most solutions can likely be found online already as boilerplate code.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-stage-specific">Stage-specific include directories</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The second most common use case for generator expressions is to set include paths depending on the current stage. If you are building a project, you probably want to use the included paths within your project (and CMake works with absolute paths; even if you work with relative paths, CMake will expand them for you). This means that if you develop a library and install it after the build has finished, you may get a header that includes directories that point to your local development folder and not to where the library is installed.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This is another use case where generator expression can help us to set the correct path. Sticking with the <code>cfdLib</code> example shown above, this is what our code may look like</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"add_library(cfdLib)\ntarget_include_directories(cfdLib\n  PUBLIC\n    $\u0026lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}\u003e\n    $\u0026lt;INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}\u003e\n)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eadd_library\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(cfdLib)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003etarget_include_directories\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(cfdLib\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  PUBLIC\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    $\u0026lt;BUILD_INTERFACE:\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_CURRENT_SOURCE_DIR}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    $\u0026lt;INSTALL_INTERFACE:\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_INSTALL_INCLUDEDIR}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":6,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="add_library(cfdLib)
target_include_directories(cfdLib
  PUBLIC
    $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}&gt;
    $&lt;INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}&gt;
)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">add_library</span><span style="color: #D4D4D4">(cfdLib)</span></span>
<span class="line"><span style="color: #569CD6">target_include_directories</span><span style="color: #D4D4D4">(cfdLib</span></span>
<span class="line"><span style="color: #D4D4D4">  PUBLIC</span></span>
<span class="line"><span style="color: #D4D4D4">    $&lt;BUILD_INTERFACE:</span><span style="color: #569CD6">${CMAKE_CURRENT_SOURCE_DIR}</span><span style="color: #D4D4D4">&gt;</span></span>
<span class="line"><span style="color: #D4D4D4">    $&lt;INSTALL_INTERFACE:</span><span style="color: #569CD6">${CMAKE_INSTALL_INCLUDEDIR}</span><span style="color: #D4D4D4">&gt;</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Here, we define two different include directories for the <code>target_include_directories()</code> function. If we are building the project locally for testing, then we will include the current folder as an included directory (e.g. ${CMAKE_CURRENT_SOURCE_DIR}). If, however, we have built the library and then want to install it in some different location on our system, then we will replace the current root directory with the root directory of the installation directory (e.g. <code>${CMAKE_INSTALL_INCLUDEDIR}</code>)</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>I should point out that we have generator expressions in the first place due to CMake's poor design. If issues with the various build stages were foreseen at the inception of CMake, then using a CMakeCache.txt file that doesn't change after the configuration and where all variables are hardcoded (e.g. compiler options) would have been flagged as a bad idea. It would have made more sense to allow these variables to change but put some constraint on it so that the build process doesn't easily fail.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Using absolute paths also comes with its own set of issues, and we have seen how we can use generator expression to fix an ideologically broken design philosophy. It is what it is, there are times where I am not particularly pleased with CMake, but its popularity means that you can't avoid it (and probably just have to deal with its quirky way of doing things every now and then).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Speaking of a broken design philosophy, let's look at our final point in this article: Policies.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-policies">Policies</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Let's look at what CMake themselves are saying about policies:</p>
<!-- /wp:paragraph -->

<!-- wp:quote -->
<blockquote class="wp-block-quote"><!-- wp:paragraph -->
<p>Occasionally a new feature or change is made to CMake that is not fully backwards compatible with older versions. This can create problems when someone tries to use an old CMakeLists file with a new version of CMake. To help both end users and developers through such issues, we have introduced&nbsp;cmake-policies. Policies are a mechanism for helping improve backwards compatibility and tracking compatibility issues between different versions of CMake.</p>
<!-- /wp:paragraph --><cite><a href="https://cmake.org/cmake/help/book/mastering-cmake/chapter/Policies.html" target="_blank" rel="noopener" title="">CMake documentation</a></cite></blockquote>
<!-- /wp:quote -->

<!-- wp:paragraph -->
<p>On the surface, this sounds like a good idea, i.e. I applaud any developer that takes backward compatibility seriously. The problem is that most of the time, I have seen people use Policies to avoid CMake using newer features that were implemented to fix some of the old broken design philosophy.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>I mentioned previously that since version 3.0, we have entered the modern CMake era, where the workflow has substantially changed in CMake. Projects should not be encouraged to write build scripts that use the old CMake way of doing things. However, legacy projects still use CMake the way it was done prior to CMake 3.0, and they may want to update some parts of their build script to use new features introduced in version 3.x without having to rewrite the entire build script.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>In this case, CMake allows you to disable newer behaviour from CMake 3.x, so that you can still use your old CMake workflow. In other cases, CMake has introduced features that have then later shown to produce unwanted side-effects in some cases, but not all, and so to tackle these niche cases, policies can help to tune the behaviour of a newly introduced feature.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This is all disguised as backward compatibility, but I'd argue this is more of a dirty fix for a broken design. The good news is, if you are just learning CMake now, chances are you are not going to write your CMake files the way we did before version 3.x, and so you likely never have to use policies. But I wanted to cover that topic here as well so that you can identify them in other build scripts and know why they are there.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The basic syntax of the policy command is the following:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake_policy(SET \u0026lt;policy-name\u003e \u0026lt;NEW|OLD\u003e)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003ecmake_policy\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(SET \u0026lt;\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003epolicy\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e-\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003ename\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026gt; \u0026lt;NEW|OLD\u0026gt;)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake_policy(SET &lt;policy-name&gt; &lt;NEW|OLD&gt;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">cmake_policy</span><span style="color: #D4D4D4">(SET &lt;</span><span style="color: #569CD6">policy</span><span style="color: #D4D4D4">-</span><span style="color: #569CD6">name</span><span style="color: #D4D4D4">&gt; &lt;NEW|OLD&gt;)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>The <code>cmake_policy()</code> command will set a specific policy to either <code>NEW</code> or <code>OLD</code>. When a new feature is introduced that breaks backward compatibility, then we have to specify the policy name and the keyword <code>NEW</code>. If, however, we want to keep the old behaviour and don't use the latest feature, then we can set this to <code>OLD</code>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>To get an idea of all the policies available, you can check the <a href="https://cmake.org/cmake/help/latest/manual/cmake-policies.7.html#manual:cmake-policies(7)" target="_blank" rel="noopener" title="">list of policies</a>. Let's pick one and see how the syntax would look. I am looking at the list and have selected policy <a href="https://cmake.org/cmake/help/latest/policy/CMP0165.html" target="_blank" rel="noopener" title="">CMP0165</a>. From the description, we can see that we can call <code>enable_language()</code> before the call to <code>project()</code>. Doing so means that some properties of the language may not have been set correctly. Thus, this policy requires users to call <code>enable_language()</code> after a call to <code>project()</code> was made so that default values were set correctly.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If, for some reason, we really need to call <code>enable_language()</code> before the <code>project()</code> command, then we can deactivate this policy with a call to:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake_policy(SET CMP0165 OLD)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003ecmake_policy\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(SET CMP0165 OLD)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake_policy(SET CMP0165 OLD)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">cmake_policy</span><span style="color: #D4D4D4">(SET CMP0165 OLD)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>If, however, we want to explicitly use this policy, then we would simply change <code>OLD</code> to <code>NEW</code> here. The reason we may want to use <code>OLD</code> for a policy should mainly be used for testing, but in production code, we should never have old policies in our CMakeLists.txt file. We may want to use NEW on policies if we are getting a warning printed on the screen, and we want to silence that warning.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Generally, as long as you follow modern CMake rules, you probably won't have the need to use policies at all. You may end up with a specific use case where it may be important for you to turn off specific policies, though in this case, you should ask yourself if you can change the build script so that you don't have to mess with policies in the first place.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-summary">Summary</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>This article, together with our introduction to CMake in the <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/introduction-to-cmake-for-cfd-practitioners" target="_blank" rel="noopener" title="">previous article</a>, presents most of the use cases that you will encounter when dealing with CMake. If you understood both of these and followed the examples, you will have gained a solid understanding of CMake, and everything that follows in the remaining articles will be simply additional features to help you automate a specific part of the build toolchain. </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Try to make it a habit to use CMake from now on for any new project that you develop. You saw that even for non-compiled projects, CMake can provide some pretty useful tools such as variable substitution in configure files, that may be useful if you are developing code that does not need to be compiled. Once you get an intuition for CMake, writing your build files becomes second nature and you will see that CMake offers and endless pit of functionality and you will likely never reach the limit of this tool.</p>
<!-- /wp:paragraph -->