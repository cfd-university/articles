<!-- How to compile, install, and use custom libraries with CMake -->
<!-- https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/how-to-compile-install-and-use-custom-libraries-with-cmake/ -->

<!-- wp:paragraph -->
<p>In this article, we will look at how we can use CMake to compile and install a library we have developed, be it a static, dynamic, or header-only library. We look at all the steps we need to take to make the installation successful, which will contain steps to automatically generate files that other projects need to discover and find in our library. We will end this article by testing the library installation by creating a simple project that consumes our developed library.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>By the end of this article, you have all the tools at your disposal to develop a library that can be easily used by other projects, regardless of the operating system. So, let's get straight into it and see how you can become a cross-platform library developer kingpin.</p>
<!-- /wp:paragraph -->

<!-- wp:block {"ref":2490} /-->

<!-- wp:list -->
<ul><!-- wp:list-item -->
<li><strong>Download</strong>: <a href="https://cfd.university/download/build-systems-part-4/?tmstv=1718342674&amp;v=3789" title="">Build-Systems-Part-4</a></li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:heading -->
<h2 class="wp-block-heading">In this series</h2>
<!-- /wp:heading -->

<!-- wp:shortcode -->
[custom_category_posts_list category_slug="automating-cfd-solver-and-library-compilation-using-cmake"]
<!-- /wp:shortcode -->

<!-- wp:heading -->
<h2 class="wp-block-heading">In this article</h2>
<!-- /wp:heading -->

<!-- wp:aioseo/table-of-contents {"headings":[{"id":8,"blockClientId":"a4c7a776-ab53-4f4a-9a71-158f6c620aaf","content":"Introduction","level":2,"anchor":"aioseo-introduction","order":0,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":17,"blockClientId":"0fa6ccd2-fb37-4974-a093-2dfec9ca5e9b","content":"Compiling and installing static, dynamic, and header-only libraries with CMake","level":2,"anchor":"aioseo-compiling-static-dynamic","order":1,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":19,"blockClientId":"aa3f76b7-a261-4c9d-9c36-59e5a45b4008","content":"Static and dynamic libraries","level":3,"anchor":"aioseo-static-and-dynamic-libraries","order":2,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":21,"blockClientId":"375d7095-dfcb-4dbd-a8b2-6851a1be5160","content":"Project structure","level":4,"anchor":"aioseo-project-structure","order":3,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":28,"blockClientId":"8e63fb4e-d7c9-4bc0-b426-0adcc7a82715","content":"Source files","level":4,"anchor":"aioseo-source-files","order":4,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":37,"blockClientId":"53e93538-5c82-4a8b-9bf0-2845a3fb6b66","content":"CMake build scripts","level":4,"anchor":"aioseo-cmake-build-scripts","order":5,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":65,"blockClientId":"759072c6-d25d-4a9a-89a3-18e8a1a4607b","content":"Command line instructions","level":4,"anchor":"aioseo-command-line-instructions","order":6,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":85,"blockClientId":"551f36bb-33eb-4790-a475-7cd57f8e2744","content":"Header-only libraries","level":3,"anchor":"aioseo-header-only-libraries","order":7,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":90,"blockClientId":"779cd057-2eae-4f4c-a069-186d24288d93","content":"Project structure","level":4,"anchor":"aioseo-project-structure","order":8,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":94,"blockClientId":"972506e5-2217-45b9-a1f5-557114ee142a","content":"Source files","level":4,"anchor":"aioseo-source-files","order":9,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":97,"blockClientId":"893143d6-6a95-47f0-ad0a-bdd33ff5937d","content":"CMake build scripts","level":4,"anchor":"aioseo-cmake-build-scripts","order":10,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":106,"blockClientId":"8c9f4494-bc10-4009-9ce3-cb35382781b7","content":"Command line instructions","level":4,"anchor":"aioseo-command-line-instructions","order":11,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]}]},{"id":112,"blockClientId":"347606c5-ea40-4151-8306-1374a777c483","content":"Using the installed libraries in other projects","level":2,"anchor":"aioseo-using-the-installed-libraries-in-other-projects","order":12,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":114,"blockClientId":"6049834f-0055-4731-ab0f-c7fd83855812","content":"Project structure","level":3,"anchor":"aioseo-project-structure","order":13,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":117,"blockClientId":"053d6f5d-7370-4cdf-a1bb-7c6d18324fec","content":"Source file of a simple test program for complex numbers","level":3,"anchor":"aioseo-source","order":14,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":120,"blockClientId":"60a62e9d-6d04-4280-86d8-5fd6693df434","content":"CMake build scripts","level":3,"anchor":"aioseo-cmake-build-scripts","order":15,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":143,"blockClientId":"78eab732-8a05-435d-a9bb-c1a89badf300","content":"Command line instructions to build and execute the test program","level":3,"anchor":"aioseo-static-and-dynamic-libraries","order":16,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":158,"blockClientId":"aaf6c40d-7eed-4418-95dc-a9d0e0a7a385","content":"Summary","level":2,"anchor":"aioseo-summary","order":17,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]} -->
<div class="wp-block-aioseo-table-of-contents"><ul><li><a href="#aioseo-introduction">Introduction</a></li><li><a href="#aioseo-compiling-static-dynamic">Compiling and installing static, dynamic, and header-only libraries with CMake</a><ul><li><a href="#aioseo-static-and-dynamic-libraries">Static and dynamic libraries</a><ul><li><a href="#aioseo-project-structure">Project structure</a></li><li><a href="#aioseo-source-files">Source files</a></li><li><a href="#aioseo-cmake-build-scripts">CMake build scripts</a></li><li><a href="#aioseo-command-line-instructions">Command line instructions</a></li></ul></li><li><a href="#aioseo-header-only-libraries">Header-only libraries</a><ul><li><a href="#aioseo-project-structure">Project structure</a></li><li><a href="#aioseo-source-files">Source files</a></li><li><a href="#aioseo-cmake-build-scripts">CMake build scripts</a></li><li><a href="#aioseo-command-line-instructions">Command line instructions</a></li></ul></li></ul></li><li><a href="#aioseo-using-the-installed-libraries-in-other-projects">Using the installed libraries in other projects</a><ul><li><a href="#aioseo-project-structure">Project structure</a></li><li><a href="#aioseo-source">Source file of a simple test program for complex numbers</a></li><li><a href="#aioseo-cmake-build-scripts">CMake build scripts</a></li><li><a href="#aioseo-static-and-dynamic-libraries">Command line instructions to build and execute the test program</a></li></ul></li><li><a href="#aioseo-summary">Summary</a></li></ul></div>
<!-- /wp:aioseo/table-of-contents -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-introduction">Introduction</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>In this article, we look at the more complex aspect of CMake: dependency management. Working with dependencies/libraries in a compiled language is hard, and <a href="https://cfd.university/learn/how-to-compile-write-and-use-cfd-libraries-in-c/how-to-integrate-external-cfd-libraries-in-your-code/" target="_blank" rel="noopener" title="">we have explored this topic</a> numerous times on this website. First, we need to ensure that we have a matching interface, that is, class definitions that expose the functionality of our library to the end-user. Once we make a change, even just changing the name of one function, compilation errors are produced. In other words, breaking the <a href="https://en.wikipedia.org/wiki/API" target="_blank" rel="noopener" title="">application programming interface</a> (API) will break the compilation.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>But even if we keep the API consistent and are able to compile both the library and the code that depends on it, we may still get errors at runtime due to incompatible application binary interfaces (ABI). The ABI sets out how the compiled binaries (executable, library, operating system, etc.) communicate with each other. Different platforms have different communication (calling) patterns, and so we need to compile our executable or library for each operating system, build mode (debug/release), and architecture (32-bit/64-bit).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>You may not be familiar with the term ABI but I'm sure you have come across software download pages where you had to specify your operating system, or architecture (32-bit/64-bit), and this is to ensure that the software you are downloading can correctly communicate with its dependencies, in this case, the operating system.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If we pick an <a href="https://cfd.university/learn/what-every-cfd-developer-needs-to-know-about-c/choosing-the-right-programming-language-for-cfd-applications/#aioseo-interpreted-programming-languages" target="_blank" rel="noopener" title="">interpreted language</a>, for example, we have far fewer restrictions, as we only need to ensure a consistent API. We check at runtime if if the required functions are available, and then we simply execute them. Since all of these libraries use the same runtime (e.g. a Python/Matlab/Javascript/etc. interpreter), they automatically satisfy the ABI requirements, as it is the job of the interpreter to communicate with the operating system (and other potential dependencies). Of course, this means that we have to compile the interpreter for different platforms.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>With CMake, working with dependencies can be rather simple and straightforward, but there are a few things we need to do as library developers to make it painless and simple. If we only provide instructions for CMake to build our project, <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/introduction-to-cmake-for-cfd-practitioners" target="_blank" rel="noopener" title="">as we did when we first looked at CMake</a>, then the end-user will have a difficult time working with our library, and in this article, I want to look at the additional steps we need to take to make working with libraries a joyful experience.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We will return to our complex number library, as it is so simple that we don't have to concentrate on the source code but rather look at the build script and how to provide a clean installation. In order to do that, we will need some of the <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/advanced-cmake-features-to-power-up-your-cfd-development" target="_blank" rel="noopener" title="">advanced CMake features we looked at in the previous article</a>. We will explore how to compile and install static, dynamic, and header-only libraries, as well as how to use these libraries in an external project, so as to show how we can consume the library as an end-user.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Once you have gone through this article, you will add to your CMake expertise and be able to work with additional dependencies in your project. This requires, of course, that these dependencies are already available. You can, of course, download, compile, and install your external dependencies manually, such as the <a href="https://cfd.university/learn/how-to-compile-write-and-use-cfd-libraries-in-c/how-to-integrate-external-cfd-libraries-in-your-code/#aioseo-case-study-compiling-the-cgns-library" target="_blank" rel="noopener" title="">CGNS library</a> or <a href="https://cfd.university/learn/the-complete-guide-to-software-testing-for-cfd-applications/how-to-get-started-with-gtest-in-c-for-cfd-development/#aioseo-compiling-and-installing-google-test" target="_blank" rel="noopener" title="">GTest</a>, but since these projects (and pretty much any other C++ library) already provide a CMake file for their build stage, there are better ways to integrate them directly with our own projects.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Furthermore, we can also use external package managers, such as <a href="https://cfd.university/learn/how-to-compile-write-and-use-cfd-libraries-in-c/how-to-handle-c-libraries-with-a-package-manager/#aioseo-conan" target="_blank" rel="noopener" title="">Conan</a> (yes, please) and <a href="https://cfd.university/learn/how-to-compile-write-and-use-cfd-libraries-in-c/how-to-handle-c-libraries-with-a-package-manager/#aioseo-vckpg" target="_blank" rel="noopener" title="">vckpg</a> (no, thank you), to manage our dependencies. They will download, compile (if necessary) and install all our dependencies and expose them to CMake automatically. All we have to do is include some files generated by Conan (I'm not even considering vckpg anymore) within our CMake file. We magically have access to all required dependencies. Life couldn't be easier. In the next article, we will look at both Conan and CMake's internal options for working with libraries.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-compiling-static-dynamic">Compiling and installing static, dynamic, and header-only libraries with CMake</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Let us turn our attention to the complex number library again that we saw in the <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/introduction-to-cmake-for-cfd-practitioners#aioseo-working-with-our-complex-number-library" target="_blank" rel="noopener" title="">opening article on CMake</a> and see how we can compile, install, and use it using either a static, dynamic, or header-only library. For the header-only library, we will need to make some changes to the source files, so we will treat it separately (as its own project). We will see later, that it doesn't matter how our library is provided to the end user, they will include our library in the same way regardless of the way it was provided (i.e. as either a static, dynamic, or header-only library).</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-static-and-dynamic-libraries">Static and dynamic libraries</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Let us quickly refresh our memory on how the static and dynamic library was structured. We only looked at how to compile a static library with CMake when we first looked at it in conjunction with the complex number example, but getting a dynamic library to work is just as simple and requires only changing one keyword. If you sat through the pain of getting a <a href="https://cfd.university/learn/how-to-compile-write-and-use-cfd-libraries-in-c/how-to-write-a-cfd-library-compiling-and-testing/#aioseo-dynamic-library-build-script" target="_blank" rel="noopener" title="">dynamic library to work on Windows</a>, you will feel relieved and realise that things can be simple, and CMake is working hard for us in the background so that we don't have to.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-project-structure">Project structure</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The project structure has slightly changed now, where we retain our <code>build/</code> folder for all compiled source files, but we have gained a new folder called <code>cmake/</code>. It is a convention to use a folder called <code>cmake/</code> is you want to include additional CMake files in your project (e.g. functions or configuration files). In our case, we use a file called <code>&lt;library-name&gt;Config.cmake.in</code>, where <code>&lt;library-name&gt;</code> is the name of our library (here <code>complexNumber</code>).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We need to provide this file, which will be used by CMake to generate a <code>&lt;library-name&gt;Config.cmake</code> file. This file is used by other projects that want to use our library. If these projects also use CMake, then this file will provide instructions to CMake for these other projects on where to find our library exactly. You may have also noticed the file ending <code>*.in</code>, which indicates that this is a configuration file and will be populated with information later by CMake. If you are new to configuration files, I have written about configuration files in the <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/advanced-cmake-features-to-power-up-your-cfd-development#aioseo-variable-substitution-in-templates-and-config-files" target="_blank" rel="noopener" title="">previous article</a>.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"root\n├── build/\n├── cmake/\n│   └── complexNumbersConfig.cmake.in\n├── complexNumberLib/\n│   ├── CMakeLists.txt\n│   ├── complexNumbers.hpp\n│   └── complexNumbers.cpp\n├── CMakeLists.txt\n└── CMakeOptions.txt","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eroot\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── build/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── cmake/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── complexNumbersConfig.cmake.in\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── complexNumberLib/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   ├── CMakeLists.txt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   ├── complexNumbers.hpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── complexNumbers.cpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── CMakeLists.txt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e└── CMakeOptions.txt\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"plaintext","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":10,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="root
├── build/
├── cmake/
│   └── complexNumbersConfig.cmake.in
├── complexNumberLib/
│   ├── CMakeLists.txt
│   ├── complexNumbers.hpp
│   └── complexNumbers.cpp
├── CMakeLists.txt
└── CMakeOptions.txt" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">root</span></span>
<span class="line"><span style="color: #D4D4D4">├── build/</span></span>
<span class="line"><span style="color: #D4D4D4">├── cmake/</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── complexNumbersConfig.cmake.in</span></span>
<span class="line"><span style="color: #D4D4D4">├── complexNumberLib/</span></span>
<span class="line"><span style="color: #D4D4D4">│   ├── CMakeLists.txt</span></span>
<span class="line"><span style="color: #D4D4D4">│   ├── complexNumbers.hpp</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── complexNumbers.cpp</span></span>
<span class="line"><span style="color: #D4D4D4">├── CMakeLists.txt</span></span>
<span class="line"><span style="color: #D4D4D4">└── CMakeOptions.txt</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Then, we have replaced the name of the <code>src/</code> folder to <code>complexNumberLib</code>. This is, perhaps, a somewhat <a href="https://peps.python.org/pep-0423/#use-a-single-name" target="_blank" rel="noopener" title="">Pythonic</a> way of doing things, where the source folder is typically named after the library itself (single name principle), which offers here the advantage that when we later install our header files, which are located in <code>complexNumberLib/*.hpp</code>, we will retain this structure in our installation directory, i.e. header files will be installed to <code>&lt;cmake-install-prefix&gt;/include/complexNumberLib/*.hpp</code>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Sure, we could leave the folder name to <code>src/</code> in our project, which would then result in an installation path of <code>&lt;cmake-install-prefix&gt;/include/src/*.hpp</code>, which isn't ideal. We could then do some CMake <em>magic </em>to replace the folder name <code>src/</code> but only for the installation path. But why force something in CMake if we can just provide a clean folder structure? Just because <code>src/</code> is conventional, it doesn't always mean it is the best choice. Let's be brave and break conventions when they suck!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Finally, we have our <code>CMakeLists.txt</code> and <code>CMakeOptions.txt</code> files, which will be used to steer the compilation and install the library on our system. First, I want to have a quick look at the source file and changes that we have to do here compared to previous articles, and then we will go through the specific CMake files in the subsequent section.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-source-files">Source files</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Within the <code>complexNumberLib/</code> folder, we have both a header and a source file. These are similar to what we have looked at before, but I want to reproduce here the header file to show what difference we have to make, relating to dealing with dynamic libraries on Windows. If you are a long-time reader of this website, you'll know what I am about to show you, yes, it is time for preprocessor-hell!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you have no idea what I am talking about, I already <a href="https://cfd.university/learn/how-to-compile-write-and-use-cfd-libraries-in-c/how-to-write-a-cfd-library-compiling-and-testing/#aioseo-dynamic-library-build-script" target="_blank" rel="noopener" title="">vented my frustration with Windows in a previous article</a>, looking at this issue in great depth, only to realise later that <a href="https://cfd.university/learn/the-complete-guide-to-software-testing-for-cfd-applications/how-to-test-a-linear-algebra-solver-library-using-gtest/#aioseo-fixing-windows-broken-c" target="_blank" rel="noopener" title="">this is a volatile (but required) hack</a>. You won't need these articles to understand the rest of the discussion but feel free to go through them if cross-compilation of dynamic libraries is important to you (I'd argue it should be, but I seem to be one of the only people in the CFD community who sees it that way ...). Don't worry; you will still be able to follow the rest of this article, even if you haven't read the linked articles.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The header file in all its glory is reproduced below:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"#pragma once\n\n#if defined(WIN32) || defined(_WIN32) || defined(__WIN32__) || defined(__NT__)\n  #if defined(COMPILEDLL)\n    #define EXPORT __declspec(dllexport)\n  #elif defined(COMPILELIB)\n    #define EXPORT\n  #else\n    #define EXPORT __declspec(dllimport)\n  #endif\n#else\n  #define EXPORT\n#endif\n\n#include \u0026lt;iostream\u003e\n#include \u0026lt;cmath\u003e\n#include \u0026lt;stdexcept\u003e\n#include \u0026lt;limits\u003e\n\nclass ComplexNumber {\npublic:\n\tEXPORT ComplexNumber(double real, double imaginary);\n\tEXPORT ~ComplexNumber();\n\n\tEXPORT double Re() const;\n\tEXPORT double Im() const;\n  EXPORT void setRe(double real);\n  EXPORT void setIm(double imaginary);\n\n  EXPORT void conjugate();\n  EXPORT double magnitude() const;\n\t\n\tEXPORT ComplexNumber operator+(const ComplexNumber \u0026amp;other);\n  EXPORT ComplexNumber operator-(const ComplexNumber \u0026amp;other);\n  EXPORT ComplexNumber operator*(const ComplexNumber \u0026amp;other);\n  EXPORT ComplexNumber operator/(const ComplexNumber \u0026amp;other);\n\n  EXPORT friend std::ostream \u0026amp;operator\u0026lt;\u0026lt;(std::ostream \u0026amp;os, const ComplexNumber \u0026amp;c);\n\nprivate:\n  void isNan(double real, double imaginary) const;\n\t\nprivate:\n\tdouble _real;\n\tdouble _imaginary;\n};","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#pragma\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eonce\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#if\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003edefined\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e(WIN32) \u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e||\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003edefined\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e(_WIN32) \u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e||\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003edefined\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e(__WIN32__) \u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e||\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003edefined\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e(__NT__)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#if\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003edefined\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e(COMPILEDLL)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#define\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e EXPORT __declspec(dllexport)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e  #elif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003edefined\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(COMPILELIB)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#define\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e EXPORT\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e  #else\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#define\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e EXPORT __declspec(dllimport)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e  #endif\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#else\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#define\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e EXPORT\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#endif\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;cmath\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;stdexcept\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;limits\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eclass\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003epublic:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eEXPORT\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ereal\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eimaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\tEXPORT ~\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\tEXPORT \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\tEXPORT \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eIm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  EXPORT \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003evoid\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003esetRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e real);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  EXPORT \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003evoid\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003esetIm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e imaginary);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  EXPORT \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003evoid\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003econjugate\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  EXPORT \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003emagnitude\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\tEXPORT \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator+\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  EXPORT \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator-\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  EXPORT \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator*\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  EXPORT \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator/\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  EXPORT \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003efriend\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eostream\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator\u0026lt;\u0026lt;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eostream\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eos\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eprivate:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003evoid\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ereal\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eimaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eprivate:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e _real;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e _imaginary;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e};\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":46,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="#pragma once

#if defined(WIN32) || defined(_WIN32) || defined(__WIN32__) || defined(__NT__)
  #if defined(COMPILEDLL)
    #define EXPORT __declspec(dllexport)
  #elif defined(COMPILELIB)
    #define EXPORT
  #else
    #define EXPORT __declspec(dllimport)
  #endif
#else
  #define EXPORT
#endif

#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;

class ComplexNumber {
public:
	EXPORT ComplexNumber(double real, double imaginary);
	EXPORT ~ComplexNumber();

	EXPORT double Re() const;
	EXPORT double Im() const;
  EXPORT void setRe(double real);
  EXPORT void setIm(double imaginary);

  EXPORT void conjugate();
  EXPORT double magnitude() const;
	
	EXPORT ComplexNumber operator+(const ComplexNumber &amp;other);
  EXPORT ComplexNumber operator-(const ComplexNumber &amp;other);
  EXPORT ComplexNumber operator*(const ComplexNumber &amp;other);
  EXPORT ComplexNumber operator/(const ComplexNumber &amp;other);

  EXPORT friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, const ComplexNumber &amp;c);

private:
  void isNan(double real, double imaginary) const;
	
private:
	double _real;
	double _imaginary;
};" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">#pragma</span><span style="color: #569CD6"> </span><span style="color: #9CDCFE">once</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C586C0">#if</span><span style="color: #569CD6"> </span><span style="color: #C586C0">defined</span><span style="color: #569CD6">(WIN32) </span><span style="color: #D4D4D4">||</span><span style="color: #569CD6"> </span><span style="color: #C586C0">defined</span><span style="color: #569CD6">(_WIN32) </span><span style="color: #D4D4D4">||</span><span style="color: #569CD6"> </span><span style="color: #C586C0">defined</span><span style="color: #569CD6">(__WIN32__) </span><span style="color: #D4D4D4">||</span><span style="color: #569CD6"> </span><span style="color: #C586C0">defined</span><span style="color: #569CD6">(__NT__)</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">#if</span><span style="color: #569CD6"> </span><span style="color: #C586C0">defined</span><span style="color: #569CD6">(COMPILEDLL)</span></span>
<span class="line"><span style="color: #569CD6">    </span><span style="color: #C586C0">#define</span><span style="color: #569CD6"> EXPORT __declspec(dllexport)</span></span>
<span class="line"><span style="color: #C586C0">  #elif</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">defined</span><span style="color: #D4D4D4">(COMPILELIB)</span></span>
<span class="line"><span style="color: #569CD6">    </span><span style="color: #C586C0">#define</span><span style="color: #569CD6"> EXPORT</span></span>
<span class="line"><span style="color: #C586C0">  #else</span></span>
<span class="line"><span style="color: #569CD6">    </span><span style="color: #C586C0">#define</span><span style="color: #569CD6"> EXPORT __declspec(dllimport)</span></span>
<span class="line"><span style="color: #C586C0">  #endif</span></span>
<span class="line"><span style="color: #C586C0">#else</span></span>
<span class="line"><span style="color: #569CD6">  </span><span style="color: #C586C0">#define</span><span style="color: #569CD6"> EXPORT</span></span>
<span class="line"><span style="color: #C586C0">#endif</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;iostream&gt;</span></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;cmath&gt;</span></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;stdexcept&gt;</span></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;limits&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">class</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #569CD6">public:</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #4EC9B0">EXPORT</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">ComplexNumber</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">real</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">imaginary</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">	EXPORT ~</span><span style="color: #DCDCAA">ComplexNumber</span><span style="color: #D4D4D4">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">	EXPORT </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">Re</span><span style="color: #D4D4D4">() </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">	EXPORT </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">Im</span><span style="color: #D4D4D4">() </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  EXPORT </span><span style="color: #569CD6">void</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">setRe</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> real);</span></span>
<span class="line"><span style="color: #D4D4D4">  EXPORT </span><span style="color: #569CD6">void</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">setIm</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> imaginary);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  EXPORT </span><span style="color: #569CD6">void</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">conjugate</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">  EXPORT </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">magnitude</span><span style="color: #D4D4D4">() </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">	</span></span>
<span class="line"><span style="color: #D4D4D4">	EXPORT </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">operator+</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  EXPORT </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">operator-</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  EXPORT </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">operator*</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  EXPORT </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">operator/</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  EXPORT </span><span style="color: #569CD6">friend</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #4EC9B0">ostream</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #C586C0">operator&lt;&lt;</span><span style="color: #D4D4D4">(</span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #4EC9B0">ostream</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">os</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">private:</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">void</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">real</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">imaginary</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">	</span></span>
<span class="line"><span style="color: #569CD6">private:</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> _real;</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> _imaginary;</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Now look at the beauty that is lines 3-13. Truly magnificent, windows-only, gobbledygook. In a nutshell, if this is new to you, what we have to do is add <code>__declspec(dllexport)</code> in-front of function calls to mark a function for export (this will then go into your dynamic library, i.e. into your <code>*.dll</code> (dynamic linked library, dll). If you forget to do this and you are trying to compile a dynamic library on Windows, you won't get the <code>*.dll</code> file, which is a good indicator that you forgot to export function calls.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Later, when you want to use your <code>*.dll</code> library, then you have to use the lines <code>__declspec(dllimport)</code> instead. Since we now have a situation of having two competing function signatures, we could either write two header files where we only change the <code>__declspec</code> definition (but this includes copy and pasting, and we want to follow the <a href="https://en.wikipedia.org/wiki/Don't_repeat_yourself" target="_blank" rel="noopener" title="">DRY</a> principle, so this isn't a great idea), or hack our logic into the header file using pre-processor directives and then let the compiler insert the correct <code>__declspec</code> definition. We have opted for the latter, and that is common practice (unfortunately).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>So, when we want to build a dynamic library on Windows, we see that we need to define the pre-processor variable <code>COMPILEDLL</code>. This requires us to also define the pre-processor directive <code>COMPILELIB</code> (which doesn't set anything for the <code>EXPORT</code> variable) if we just want to use a static library. Otherwise, the default is to use the <code>__declspec(dllimport)</code>, which is what we want when using this library later.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Incidentally, if you are on UNIX and enjoy the magic of Linux or macOS for developing code, you don't have to worry about exporting function names. It is done automatically for you. We are in the 21st century, and Microsoft still hasn't figured out how to do this automatically. But I remain hopeful that this is on the agenda for the 22<sup>nd</sup> century!</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-cmake-build-scripts">CMake build scripts</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The <code>CMakeLists.txt</code> file in the root folder is given below. Look through it and then come back for a discussion underneath the file.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"# Select the minimum cmake version required. If in doubt, use the same version you are using\n# To find out your cmake version, run 'cmake \u002d\u002dversion' in the console\ncmake_minimum_required(VERSION 3.23)\n\n# Set the project name/description and project settings like the C++ standard required\nproject(\n  complexNumbers\n  LANGUAGES CXX\n  VERSION 1.0.0\n  DESCRIPTION \u0022A simple C++ library for complex numbers\u0022\n)\n\n# include custom options\ninclude(CMakeOptions.txt)\n\n# Add a postfix for debug library builds to avoid name clashes with release builds\nif(WIN32)\n  set(CMAKE_DEBUG_POSTFIX d)\nendif()\n\nif(${ENABLE_SHARED})\n  # Create a shared (dynamic) library for the complex number class\n  add_library(${CMAKE_PROJECT_NAME} SHARED)\n  \n  # add correct compiler flags so that we can correctly import/export symbols\n  if (MSVC)\n    target_compile_definitions(${CMAKE_PROJECT_NAME} PRIVATE COMPILEDLL)\n  endif()\nelse()\n  # Create a static library for the complex number class\n  add_library(${CMAKE_PROJECT_NAME} STATIC)\n\n  # add correct compiler flags so that we can correctly import/export symbols\n  if (MSVC)\n    target_compile_definitions(${CMAKE_PROJECT_NAME} PRIVATE COMPILELIB)\n  endif()\nendif()\n\ntarget_include_directories(${CMAKE_PROJECT_NAME}\n  PUBLIC\n    $\u0026lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}\u003e\n    $\u0026lt;INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}\u003e\n)\n\n# go through the complexNumberLib/ subdirectory and add any files to the library\nadd_subdirectory(complexNumberLib)\n\n### INSTALLING ###\n\n# install the headers that we specified with FILE_SET (header files for the user to include in their projects)\ninstall(TARGETS ${CMAKE_PROJECT_NAME}\n  EXPORT complexNumbersTargets\n  FILE_SET HEADERS\n)\n\n# provide some basic meta data about the library to generate the library's config file \ninstall(\n  EXPORT complexNumbersTargets\n  FILE complexNumbersTargets.cmake\n  DESTINATION \u0022lib/cmake/complexNumbers\u0022\n  NAMESPACE complexNumbers::\n)\n\n# generate the library's config file\ninclude(CMakePackageConfigHelpers)\nconfigure_package_config_file(\n  cmake/complexNumbersConfig.cmake.in\n  \u0022${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake\u0022\n  INSTALL_DESTINATION \u0022lib/cmake/complexNumbers\u0022\n)\n\n# install the config file\ninstall(\n  FILES \u0022${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake\u0022\n  DESTINATION \u0022lib/cmake/complexNumbers\u0022\n)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Select the minimum cmake version required. If in doubt, use the same version you are using\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# To find out your cmake version, run \u0026#39;cmake \u002d\u002dversion\u0026#39; in the console\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003ecmake_minimum_required\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(VERSION 3.23)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Set the project name/description and project settings like the C++ standard required\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eproject\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  complexNumbers\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  LANGUAGES CXX\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  VERSION 1.0.0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  DESCRIPTION \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;A simple C++ library for complex numbers\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# include custom options\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003einclude\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(CMakeOptions.txt)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Add a postfix for debug library builds to avoid name clashes with release builds\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(WIN32)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  set\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eCMAKE_DEBUG_POSTFIX\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e d)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${ENABLE_SHARED}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Create a shared (dynamic) library for the complex number class\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  add_library\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e SHARED)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# add correct compiler flags so that we can correctly import/export symbols\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  if\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e (MSVC)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e    target_compile_definitions\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e PRIVATE COMPILEDLL)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  endif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eelse\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Create a static library for the complex number class\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  add_library\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e STATIC)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# add correct compiler flags so that we can correctly import/export symbols\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  if\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e (MSVC)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e    target_compile_definitions\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e PRIVATE COMPILELIB)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  endif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003etarget_include_directories\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  PUBLIC\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    $\u0026lt;BUILD_INTERFACE:\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_CURRENT_SOURCE_DIR}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    $\u0026lt;INSTALL_INTERFACE:\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_INSTALL_INCLUDEDIR}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# go through the complexNumberLib/ subdirectory and add any files to the library\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eadd_subdirectory\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(complexNumberLib)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e### INSTALLING ###\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# install the headers that we specified with FILE_SET (header files for the user to include in their projects)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003einstall\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(TARGETS \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  EXPORT\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e complexNumbersTargets\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  FILE_SET HEADERS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# provide some basic meta data about the library to generate the library\u0026#39;s config file \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003einstall\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  EXPORT\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e complexNumbersTargets\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  FILE\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e complexNumbersTargets.cmake\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  DESTINATION \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;lib/cmake/complexNumbers\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  NAMESPACE complexNumbers::\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# generate the library\u0026#39;s config file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003einclude\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(CMakePackageConfigHelpers)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003econfigure_package_config_file(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  cmake/complexNumbersConfig.cmake.in\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  INSTALL_DESTINATION \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;lib/cmake/complexNumbers\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# install the config file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003einstall\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  FILES \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  DESTINATION \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;lib/cmake/complexNumbers\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":76,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="# Select the minimum cmake version required. If in doubt, use the same version you are using
# To find out your cmake version, run 'cmake --version' in the console
cmake_minimum_required(VERSION 3.23)

# Set the project name/description and project settings like the C++ standard required
project(
  complexNumbers
  LANGUAGES CXX
  VERSION 1.0.0
  DESCRIPTION &quot;A simple C++ library for complex numbers&quot;
)

# include custom options
include(CMakeOptions.txt)

# Add a postfix for debug library builds to avoid name clashes with release builds
if(WIN32)
  set(CMAKE_DEBUG_POSTFIX d)
endif()

if(${ENABLE_SHARED})
  # Create a shared (dynamic) library for the complex number class
  add_library(${CMAKE_PROJECT_NAME} SHARED)
  
  # add correct compiler flags so that we can correctly import/export symbols
  if (MSVC)
    target_compile_definitions(${CMAKE_PROJECT_NAME} PRIVATE COMPILEDLL)
  endif()
else()
  # Create a static library for the complex number class
  add_library(${CMAKE_PROJECT_NAME} STATIC)

  # add correct compiler flags so that we can correctly import/export symbols
  if (MSVC)
    target_compile_definitions(${CMAKE_PROJECT_NAME} PRIVATE COMPILELIB)
  endif()
endif()

target_include_directories(${CMAKE_PROJECT_NAME}
  PUBLIC
    $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}&gt;
    $&lt;INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}&gt;
)

# go through the complexNumberLib/ subdirectory and add any files to the library
add_subdirectory(complexNumberLib)

### INSTALLING ###

# install the headers that we specified with FILE_SET (header files for the user to include in their projects)
install(TARGETS ${CMAKE_PROJECT_NAME}
  EXPORT complexNumbersTargets
  FILE_SET HEADERS
)

# provide some basic meta data about the library to generate the library's config file 
install(
  EXPORT complexNumbersTargets
  FILE complexNumbersTargets.cmake
  DESTINATION &quot;lib/cmake/complexNumbers&quot;
  NAMESPACE complexNumbers::
)

# generate the library's config file
include(CMakePackageConfigHelpers)
configure_package_config_file(
  cmake/complexNumbersConfig.cmake.in
  &quot;${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake&quot;
  INSTALL_DESTINATION &quot;lib/cmake/complexNumbers&quot;
)

# install the config file
install(
  FILES &quot;${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake&quot;
  DESTINATION &quot;lib/cmake/complexNumbers&quot;
)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #6A9955"># Select the minimum cmake version required. If in doubt, use the same version you are using</span></span>
<span class="line"><span style="color: #6A9955"># To find out your cmake version, run &#39;cmake --version&#39; in the console</span></span>
<span class="line"><span style="color: #569CD6">cmake_minimum_required</span><span style="color: #D4D4D4">(VERSION 3.23)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># Set the project name/description and project settings like the C++ standard required</span></span>
<span class="line"><span style="color: #569CD6">project</span><span style="color: #D4D4D4">(</span></span>
<span class="line"><span style="color: #D4D4D4">  complexNumbers</span></span>
<span class="line"><span style="color: #D4D4D4">  LANGUAGES CXX</span></span>
<span class="line"><span style="color: #D4D4D4">  VERSION 1.0.0</span></span>
<span class="line"><span style="color: #D4D4D4">  DESCRIPTION </span><span style="color: #CE9178">&quot;A simple C++ library for complex numbers&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># include custom options</span></span>
<span class="line"><span style="color: #569CD6">include</span><span style="color: #D4D4D4">(CMakeOptions.txt)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># Add a postfix for debug library builds to avoid name clashes with release builds</span></span>
<span class="line"><span style="color: #569CD6">if</span><span style="color: #D4D4D4">(WIN32)</span></span>
<span class="line"><span style="color: #569CD6">  set</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">CMAKE_DEBUG_POSTFIX</span><span style="color: #D4D4D4"> d)</span></span>
<span class="line"><span style="color: #569CD6">endif</span><span style="color: #D4D4D4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">if</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${ENABLE_SHARED}</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #6A9955"># Create a shared (dynamic) library for the complex number class</span></span>
<span class="line"><span style="color: #569CD6">  add_library</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span><span style="color: #D4D4D4"> SHARED)</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #6A9955"># add correct compiler flags so that we can correctly import/export symbols</span></span>
<span class="line"><span style="color: #569CD6">  if</span><span style="color: #D4D4D4"> (MSVC)</span></span>
<span class="line"><span style="color: #569CD6">    target_compile_definitions</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span><span style="color: #D4D4D4"> PRIVATE COMPILEDLL)</span></span>
<span class="line"><span style="color: #569CD6">  endif</span><span style="color: #D4D4D4">()</span></span>
<span class="line"><span style="color: #569CD6">else</span><span style="color: #D4D4D4">()</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #6A9955"># Create a static library for the complex number class</span></span>
<span class="line"><span style="color: #569CD6">  add_library</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span><span style="color: #D4D4D4"> STATIC)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #6A9955"># add correct compiler flags so that we can correctly import/export symbols</span></span>
<span class="line"><span style="color: #569CD6">  if</span><span style="color: #D4D4D4"> (MSVC)</span></span>
<span class="line"><span style="color: #569CD6">    target_compile_definitions</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span><span style="color: #D4D4D4"> PRIVATE COMPILELIB)</span></span>
<span class="line"><span style="color: #569CD6">  endif</span><span style="color: #D4D4D4">()</span></span>
<span class="line"><span style="color: #569CD6">endif</span><span style="color: #D4D4D4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">target_include_directories</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span></span>
<span class="line"><span style="color: #D4D4D4">  PUBLIC</span></span>
<span class="line"><span style="color: #D4D4D4">    $&lt;BUILD_INTERFACE:</span><span style="color: #569CD6">${CMAKE_CURRENT_SOURCE_DIR}</span><span style="color: #D4D4D4">&gt;</span></span>
<span class="line"><span style="color: #D4D4D4">    $&lt;INSTALL_INTERFACE:</span><span style="color: #569CD6">${CMAKE_INSTALL_INCLUDEDIR}</span><span style="color: #D4D4D4">&gt;</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># go through the complexNumberLib/ subdirectory and add any files to the library</span></span>
<span class="line"><span style="color: #569CD6">add_subdirectory</span><span style="color: #D4D4D4">(complexNumberLib)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">### INSTALLING ###</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># install the headers that we specified with FILE_SET (header files for the user to include in their projects)</span></span>
<span class="line"><span style="color: #569CD6">install</span><span style="color: #D4D4D4">(TARGETS </span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span></span>
<span class="line"><span style="color: #569CD6">  EXPORT</span><span style="color: #D4D4D4"> complexNumbersTargets</span></span>
<span class="line"><span style="color: #D4D4D4">  FILE_SET HEADERS</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># provide some basic meta data about the library to generate the library&#39;s config file </span></span>
<span class="line"><span style="color: #569CD6">install</span><span style="color: #D4D4D4">(</span></span>
<span class="line"><span style="color: #569CD6">  EXPORT</span><span style="color: #D4D4D4"> complexNumbersTargets</span></span>
<span class="line"><span style="color: #569CD6">  FILE</span><span style="color: #D4D4D4"> complexNumbersTargets.cmake</span></span>
<span class="line"><span style="color: #D4D4D4">  DESTINATION </span><span style="color: #CE9178">&quot;lib/cmake/complexNumbers&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">  NAMESPACE complexNumbers::</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># generate the library&#39;s config file</span></span>
<span class="line"><span style="color: #569CD6">include</span><span style="color: #D4D4D4">(CMakePackageConfigHelpers)</span></span>
<span class="line"><span style="color: #D4D4D4">configure_package_config_file(</span></span>
<span class="line"><span style="color: #D4D4D4">  cmake/complexNumbersConfig.cmake.in</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">&quot;${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">  INSTALL_DESTINATION </span><span style="color: #CE9178">&quot;lib/cmake/complexNumbers&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># install the config file</span></span>
<span class="line"><span style="color: #569CD6">install</span><span style="color: #D4D4D4">(</span></span>
<span class="line"><span style="color: #D4D4D4">  FILES </span><span style="color: #CE9178">&quot;${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">  DESTINATION </span><span style="color: #CE9178">&quot;lib/cmake/complexNumbers&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>The first part of the <code>CMakeLists.txt</code> file is hopefully not a surprise anymore. We set the minimum CMake version here to version 3.23 as we want to use the <code>FILE_SET</code> command, which was introduced in 3.23 (and the newest feature we use in this CMake file). We also set some project-specific metadata and, then, on line 14, proceed to include the <code>CMakeOptions.txt</code> file to make library-specific options available.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The content of the <code>CMakeOptions.txt</code> file is shown below:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"option(ENABLE_SHARED \u0022Build shared (dynamic) library? If set to off, a static library will be built\u0022 OFF)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eoption\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ENABLE_SHARED \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Build shared (dynamic) library? If set to off, a static library will be built\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eOFF\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="option(ENABLE_SHARED &quot;Build shared (dynamic) library? If set to off, a static library will be built&quot; OFF)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">option</span><span style="color: #D4D4D4">(ENABLE_SHARED </span><span style="color: #CE9178">&quot;Build shared (dynamic) library? If set to off, a static library will be built&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">OFF</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>It contains a single option labelled <code>ENABLE_SHARED</code>, which allows us to set whether we want to build the library as a static or dynamic library. By default, the library will be built as a static library.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>On line 17-19, we ask CMake to add the letter <code>d</code> to the name of our library if we are on Windows and if we are building a debug version of our library. This is a Windows convention and is required to allow for debug and release libraries to sit in the same folder. We need that as Windows strongly discriminates between debug and release builds, and we must pick the correct one, something which is rather relaxed on UNIX systems. We'll see that later in action where it will become clearer.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Returning to the <code>CMakeLists.txt</code> file, we see that we use this <code>ENABLE_SHARED</code> option on lines 21-37 to either create a new library through the <code>add_library()</code> command, where we either use the <code>STATIC</code> or <code>SHARED</code> keyword to indicate whether we want to build a static or dynamic library. The name of the library is derived from the project name we set on line 7, which is available to us through the <code>${CMAKE_PROJECT_NAME}</code> variable.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We also set the pre-processor to either <code>COMPILEDLL</code> or <code>COMPILELIB</code>, which will pass that information in a platform-independent manner to the compiler, i.e. on Windows using the <code>cl.exe</code> compiler, we either get the <code>/DCOMPILEDLL</code> or <code>/DCOMPILELIB</code> compiler flag added to the compilation, and on UNIX, using either the GNU or clang compiler, we, nothing. The pre-processor directives are only defined for Windows (see line 3 in the header file), but if we wanted something to be added to our UNIX compilers, we would get <code>-D</code> instead of <code>/D</code> as a compiler flag.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>On lines 39-43, we include the root folder using a generator expression, something that we did discuss in the <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/advanced-cmake-features-to-power-up-your-cfd-development#aioseo-generator-expressions" target="_blank" rel="noopener" title="">previous article</a> as well. Let's explore that in more detail. If we are building the library, then we are including <code>${CMAKE_CURRENT_SOURCE_DIR}</code> during the compilation. This is nothing else than specifying during the compilation that we want to include the project's root folder using the include flag <code>-I.</code> or <code>/I.</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This allows us to make relative imports from the root folder in our source files, such as <code>complexNumberLib/complexNumbers.hpp</code>. This is what we do in the <code>complexNumberLib/complexNumbers.cpp</code> file at the top. If we do not include <code>${CMAKE_CURRENT_SOURCE_DIR}</code>, then we would have to rewrite this to include as simply <code>complexNumbers.hpp</code>, i.e. look for the header file in the current directory. For a simple project like this, it would be fine to leave it, but for more complex projects it makes navigating your library a lot easier, if all includes are relative to the root.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>During the installation, though, we do not want to have the same include path. The reason is that CMake works with absolute paths in the background, and having an absolute path point to your project folder will make no sense. You want to point to the installation directory instead, and using the generator expression to distinguish between the build and install phase allows us to conditionally set the include path here for our library. The good news is that lines 39-43 are pretty much boilerplate instructions, i.e. you can copy and paste it into your own project, and it will work.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>On line 46, we are using the <code>add_subdirectory()</code> command to instruct CMake to look for an additional <code>CMakeLists.txt</code> file within the <code>complexNumberLib/</code> folder. This file has the following content:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"target_sources(${CMAKE_PROJECT_NAME}\n  PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/complexNumbers.cpp\n  PUBLIC FILE_SET HEADERS\n  BASE_DIRS ${PROJECT_SOURCE_DIR}\n  FILES ${CMAKE_CURRENT_SOURCE_DIR}/complexNumbers.hpp\n)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003etarget_sources\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  PRIVATE \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_CURRENT_SOURCE_DIR}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e/complexNumbers.cpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  PUBLIC FILE_SET HEADERS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  BASE_DIRS \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${PROJECT_SOURCE_DIR}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  FILES \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_CURRENT_SOURCE_DIR}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e/complexNumbers.hpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":6,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="target_sources(${CMAKE_PROJECT_NAME}
  PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/complexNumbers.cpp
  PUBLIC FILE_SET HEADERS
  BASE_DIRS ${PROJECT_SOURCE_DIR}
  FILES ${CMAKE_CURRENT_SOURCE_DIR}/complexNumbers.hpp
)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">target_sources</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span></span>
<span class="line"><span style="color: #D4D4D4">  PRIVATE </span><span style="color: #569CD6">${CMAKE_CURRENT_SOURCE_DIR}</span><span style="color: #D4D4D4">/complexNumbers.cpp</span></span>
<span class="line"><span style="color: #D4D4D4">  PUBLIC FILE_SET HEADERS</span></span>
<span class="line"><span style="color: #D4D4D4">  BASE_DIRS </span><span style="color: #569CD6">${PROJECT_SOURCE_DIR}</span></span>
<span class="line"><span style="color: #D4D4D4">  FILES </span><span style="color: #569CD6">${CMAKE_CURRENT_SOURCE_DIR}</span><span style="color: #D4D4D4">/complexNumbers.hpp</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We simply add the source file (e.g. <code>complexNumbers.cpp</code>) to our library target. It is set as <code>PRIVATE</code>, as only our library will need to know about this file. Then, we are using the <code>PUBLIC FILE_SET HEADERS</code> instruction to let CMake know that we want to include some header files as well in our target, which will not be used during compilation but rather be made available later when we install the project. All header files marked under the <code>FILE_SET</code> command will get exported and land in the <code>&lt;cmake-install-prefix&gt;/include</code> folder.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>And now, we get to the juice bit, the part that we did not cover in detail in our <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/introduction-to-cmake-for-cfd-practitioners" target="_blank" rel="noopener" title="">first article about CMake</a>, and looking through it, you can understand why (we needed a few more advanced concepts which we covered in the <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/advanced-cmake-features-to-power-up-your-cfd-development" target="_blank" rel="noopener" title="">previous article</a>). To make things simple, I have copied lines 50-76 below again, so we don't have to scroll up and down. I'll be referring to the line numbers shown below to make things simple but keep in mind that these are different to the line numbers in the <code>CMakeLists.txt</code> file shown above.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"# install the headers that we specified with FILE_SET (header files for the user to include in their projects)\ninstall(TARGETS ${CMAKE_PROJECT_NAME}\n  EXPORT complexNumbersTargets\n  FILE_SET HEADERS\n)\n\n# provide some basic meta data about the library to generate the library's config file \ninstall(\n  EXPORT complexNumbersTargets\n  FILE complexNumbersTargets.cmake\n  DESTINATION \u0022lib/cmake/complexNumbers\u0022\n  NAMESPACE complexNumbers::\n)\n\n# generate the library's config file\ninclude(CMakePackageConfigHelpers)\nconfigure_package_config_file(\n  cmake/complexNumbersConfig.cmake.in\n  \u0022${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake\u0022\n  INSTALL_DESTINATION \u0022lib/cmake/complexNumbers\u0022\n)\n\n# install the config file\ninstall(\n  FILES \u0022${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake\u0022\n  DESTINATION \u0022lib/cmake/complexNumbers\u0022\n)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# install the headers that we specified with FILE_SET (header files for the user to include in their projects)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003einstall\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(TARGETS \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  EXPORT\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e complexNumbersTargets\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  FILE_SET HEADERS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# provide some basic meta data about the library to generate the library\u0026#39;s config file \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003einstall\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  EXPORT\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e complexNumbersTargets\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  FILE\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e complexNumbersTargets.cmake\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  DESTINATION \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;lib/cmake/complexNumbers\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  NAMESPACE complexNumbers::\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# generate the library\u0026#39;s config file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003einclude\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(CMakePackageConfigHelpers)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003econfigure_package_config_file(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  cmake/complexNumbersConfig.cmake.in\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  INSTALL_DESTINATION \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;lib/cmake/complexNumbers\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# install the config file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003einstall\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  FILES \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  DESTINATION \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;lib/cmake/complexNumbers\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":27,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="# install the headers that we specified with FILE_SET (header files for the user to include in their projects)
install(TARGETS ${CMAKE_PROJECT_NAME}
  EXPORT complexNumbersTargets
  FILE_SET HEADERS
)

# provide some basic meta data about the library to generate the library's config file 
install(
  EXPORT complexNumbersTargets
  FILE complexNumbersTargets.cmake
  DESTINATION &quot;lib/cmake/complexNumbers&quot;
  NAMESPACE complexNumbers::
)

# generate the library's config file
include(CMakePackageConfigHelpers)
configure_package_config_file(
  cmake/complexNumbersConfig.cmake.in
  &quot;${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake&quot;
  INSTALL_DESTINATION &quot;lib/cmake/complexNumbers&quot;
)

# install the config file
install(
  FILES &quot;${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake&quot;
  DESTINATION &quot;lib/cmake/complexNumbers&quot;
)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #6A9955"># install the headers that we specified with FILE_SET (header files for the user to include in their projects)</span></span>
<span class="line"><span style="color: #569CD6">install</span><span style="color: #D4D4D4">(TARGETS </span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span></span>
<span class="line"><span style="color: #569CD6">  EXPORT</span><span style="color: #D4D4D4"> complexNumbersTargets</span></span>
<span class="line"><span style="color: #D4D4D4">  FILE_SET HEADERS</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># provide some basic meta data about the library to generate the library&#39;s config file </span></span>
<span class="line"><span style="color: #569CD6">install</span><span style="color: #D4D4D4">(</span></span>
<span class="line"><span style="color: #569CD6">  EXPORT</span><span style="color: #D4D4D4"> complexNumbersTargets</span></span>
<span class="line"><span style="color: #569CD6">  FILE</span><span style="color: #D4D4D4"> complexNumbersTargets.cmake</span></span>
<span class="line"><span style="color: #D4D4D4">  DESTINATION </span><span style="color: #CE9178">&quot;lib/cmake/complexNumbers&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">  NAMESPACE complexNumbers::</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># generate the library&#39;s config file</span></span>
<span class="line"><span style="color: #569CD6">include</span><span style="color: #D4D4D4">(CMakePackageConfigHelpers)</span></span>
<span class="line"><span style="color: #D4D4D4">configure_package_config_file(</span></span>
<span class="line"><span style="color: #D4D4D4">  cmake/complexNumbersConfig.cmake.in</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">&quot;${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">  INSTALL_DESTINATION </span><span style="color: #CE9178">&quot;lib/cmake/complexNumbers&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># install the config file</span></span>
<span class="line"><span style="color: #569CD6">install</span><span style="color: #D4D4D4">(</span></span>
<span class="line"><span style="color: #D4D4D4">  FILES </span><span style="color: #CE9178">&quot;${CMAKE_CURRENT_BINARY_DIR}/complexNumbersConfig.cmake&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">  DESTINATION </span><span style="color: #CE9178">&quot;lib/cmake/complexNumbers&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>On lines 2-5, we set some basic information about the library. In particular, we use the <code>EXPORT</code> command to define an installation target. It is a bit like the <code>add_library()</code> or <code>add_executable()</code> command, where we define a name for the library or executable, which we can use to add files and include directories to this target specifically. In a similar manner, the <code>EXPORT</code> command allows us to associate any installation information with this target name, such as install directories and files that should get installed (copied into the installation folder).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The <code>FILE_SET</code> command on line 4 makes sure that all header files marked under the <code>FILE_SET</code> command (i.e. see the <code>complexNumberLib/CMakeLists.txt</code> file) will get installed into the installation directory. We now bind this <code>FILE_SET</code> instruction with the exported install target.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Lines 8-13 define some additional meta-information, which, again, are associated with the <code>EXPORT</code> target. We specify that we want to create a <code>&lt;library-name&gt;Targets.cmake</code> file, which will be automatically generated by CMake based on the information provided within all the <code>install()</code> commands as seen above. This file name is conventional, and you should use the same wording.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The <code>DESTINATION</code> specifies where this <code>&lt;library-name&gt;Targets.cmake</code> file should be located, and again, by convention, we use <code>lib/cmake/&lt;library-name&gt;</code>. I have seen permutations of that in the wild, e.g. <code>cmake/lib/&lt;library-name&gt;</code>, which probably should work just as well, but the former makes sure that all <code>*.cmake</code> files from all libraries will be located in the same folder.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Then, we have the <code>NAMESPACE complexNumber::</code> instruction. A namespace is similar to a <a href="https://www.learncpp.com/cpp-tutorial/naming-collisions-and-an-introduction-to-namespaces/" target="_blank" rel="noopener" title="">C++ namespace</a> in that we can provide a dedicated namespace for all of our libraries. Sometimes, you may want to provide a set of libraries under a common library name. <a href="https://www.boost.org/" target="_blank" rel="noopener" title="">Boost</a> may be one such example, which probably most C++ programmers will have at least heard about. Then, you would identify your libraries later as <code>&lt;namespace&gt;::libraryName</code>. By convention, we use a namespace even for single libraries, where the library and namespace are the same.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Lines 16-21 take the configuration file <code>cmake/complexNumberConfig.cmake.in</code> and produce the corresponding <code>complexNumbersConfig.cmake</code> file. It will be located in the <code>${CMAKE_CURRENT_BINARY_DIR}</code>, i.e. the <code>build/</code> folder, but then installed into the same <code>lib/cmake/complexNumbers</code> folder, just like the <code>complexNumbersTargets.cmake</code> file. Let's have a look at the configuration file; the content is given below:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"@PACKAGE_INIT@\n\ninclude(CMakeFindDependencyMacro)\n\n# any additional libraries we depend on should go here, e.g.\n# find_dependency(Gtest::Gtest)\n# notice that we use find_dependency(), not find_package() here\n\ninclude(\u0022${CMAKE_CURRENT_LIST_DIR}/complexNumbersTargets.cmake\u0022)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e@PACKAGE_INIT@\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003einclude\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(CMakeFindDependencyMacro)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# any additional libraries we depend on should go here, e.g.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# find_dependency(Gtest::Gtest)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# notice that we use find_dependency(), not find_package() here\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003einclude\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;${CMAKE_CURRENT_LIST_DIR}/complexNumbersTargets.cmake\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":9,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="@PACKAGE_INIT@

include(CMakeFindDependencyMacro)

# any additional libraries we depend on should go here, e.g.
# find_dependency(Gtest::Gtest)
# notice that we use find_dependency(), not find_package() here

include(&quot;${CMAKE_CURRENT_LIST_DIR}/complexNumbersTargets.cmake&quot;)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">@PACKAGE_INIT@</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">include</span><span style="color: #D4D4D4">(CMakeFindDependencyMacro)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># any additional libraries we depend on should go here, e.g.</span></span>
<span class="line"><span style="color: #6A9955"># find_dependency(Gtest::Gtest)</span></span>
<span class="line"><span style="color: #6A9955"># notice that we use find_dependency(), not find_package() here</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">include</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&quot;${CMAKE_CURRENT_LIST_DIR}/complexNumbersTargets.cmake&quot;</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We can see the <code>@PACKAGE_INIT@</code> variable at the beginning of the file, which will be replaced by CMake during the installation. I.e. if you later look into the file <code>&lt;cmake-install-prefix&gt;/lib/cmake/complexNumbers/complexNumbersConfig.cmake</code>, you will see this variable replaced by some CMake content. The <code>include()</code> directives on lines 3 and 9 are the only other requirement that we have to put here and are mostly boilerplate as well, we would just have to change the library name on line 9 if we wanted to use this file in another project.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Essentially, what this file offers us is the opportunity to look for additional dependencies, i.e., libraries, on which our project depends. In our case, we have none. We can see in the comments that we use the <code>find_dependency()</code> syntax to look for a library. Notice that in the example, we use Google Test (<code>GTest</code>), which is provided by its own namespace. So to find <code>GTest</code>, we would have to write <code>find_dependency(GTest::Gtest)</code>. Later, we will see that this command simply wraps around another command called <code>find_package()</code>, that we will use to find libraries.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Returning back to the <code>CMakeLists.txt</code> excerpt above, on lines 24-27 we simply provide additional instructions to install the generated configuration file, and this is all the information required to get a clean installation. So, with all of our CMake files now ready and prepared, let us go ahead and compile and install the library next.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-command-line-instructions">Command line instructions</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The command line instructions for compiling the library are provided next. Make sure that you have a clean build/ folder available, which does not contain any files and that you have changed into the build/ folder on the command line. Then, you can go ahead and build a static library first using the following command (I am using Ninja here as my preferred build generator, but you can omit this and use the system's default if you prefer or don't have <code>Ninja</code> installed):</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake -DCMAKE_BUILD_TYPE=Release -DENABLE_SHARED=OFF -G Ninja ..","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DCMAKE_BUILD_TYPE=Release\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DENABLE_SHARED=OFF\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-G\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eNinja\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e..\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake -DCMAKE_BUILD_TYPE=Release -DENABLE_SHARED=OFF -G Ninja .." style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DCMAKE_BUILD_TYPE=Release</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DENABLE_SHARED=OFF</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-G</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">Ninja</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">..</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>With the build file generated, proceed to generate the library using the following command:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake \u002d\u002dbuild . \u002d\u002dconfig Release","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u002d\u002dbuild\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u002d\u002dconfig\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eRelease\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake --build . --config Release" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">--build</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">.</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">--config</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">Release</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>And finally, once the library is available and compiled, we want to install it into a specific directory. I am on Windows here and will use <code>C:\temp</code> as my installation prefix. This is to show that even if we build in a non-standard path (i.e. one that is not in the environmental variables), we can still discover these libraries later, thanks to the <code>C:\temp\lib\cmake\complexNumbers\*.cmake</code> files that we have generated. The install command becomes:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake \u002d\u002dinstall . \u002d\u002dprefix \u0022C:\\temp\u0022 \u002d\u002dconfig Release","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u002d\u002dinstall\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u002d\u002dprefix\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;C:\\temp\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u002d\u002dconfig\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eRelease\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake --install . --prefix &quot;C:\temp&quot; --config Release" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">--install</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">.</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">--prefix</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;C:\temp&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">--config</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">Release</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>These three steps have generated a release build of the static library. If you are on UNIX, hooray, go ahead and use the library. If you are on Windows, hold on; we need to talk. Remember ABI compatibility we mentioned in the introduction? Remember that I said that this includes communication with the operating system? It turns out, on Windows, you can't mix and match debug and release builds, this breaks the ABI (but not on UNIX, testing it on Ubuntu shows that you can use library compiled in release mode within a project that is compiled in debug mode).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you tried to use a library on Windows that was compiled in release mode, but then your project is compiled in debug mode, you will likely see an error message like the following:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"complexNumbers.lib(complexNumbers.cpp.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' do\nesn't match value '2' in main.obj [C:\\Users\\tom\\code\\buildSystems\\Build-Systems-Part-4-static-shared-Testing\\build\\\ncomplexNumberTest.vcxproj]\n\ncomplexNumbers.lib(complexNumbers.cpp.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRe\nlease' doesn't match value 'MDd_DynamicDebug' in main.obj [C:\\Users\\tom\\code\\buildSystems\\Build-Systems-Part-4-stat\nic-shared-Testing\\build\\complexNumberTest.vcxproj]","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecomplexNumbers.lib(complexNumbers.cpp.obj\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e:\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e error LNK2038: mismatch detected \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003efor\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026#39;_ITERATOR_DEBUG_LEVEL\u0026#39;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e: value \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026#39;0\u0026#39;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003edo\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eesn\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e\u0026#39;t match value \u0026#39;\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e2\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e\u0026#39; in main.obj [C:\\Users\\tom\\code\\buildSystems\\Build-Systems-Part-4-static-shared-Testing\\build\\\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecomplexNumberTest.vcxproj]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecomplexNumbers.lib(complexNumbers.cpp.obj) : error LNK2038: mismatch detected for \u0026#39;\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eRuntimeLibrary\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e\u0026#39;: value \u0026#39;\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eMD_DynamicRe\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003elease\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e\u0026#39; doesn\u0026#39;\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003et\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003ematch\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003evalue\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026#39;MDd_DynamicDebug\u0026#39;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003ein\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003emain.obj\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e [C:\u003c/span\u003e\u003cspan style=\u0022color: #D7BA7D\u0022\u003e\\U\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003esers\u003c/span\u003e\u003cspan style=\u0022color: #D7BA7D\u0022\u003e\\t\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eom\u003c/span\u003e\u003cspan style=\u0022color: #D7BA7D\u0022\u003e\\c\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eode\u003c/span\u003e\u003cspan style=\u0022color: #D7BA7D\u0022\u003e\\b\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003euildSystems\u003c/span\u003e\u003cspan style=\u0022color: #D7BA7D\u0022\u003e\\B\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003euild-Systems-Part-4-stat\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eic-shared-Testing\\build\\complexNumberTest.vcxproj]\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":7,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="complexNumbers.lib(complexNumbers.cpp.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' do
esn't match value '2' in main.obj [C:\Users\tom\code\buildSystems\Build-Systems-Part-4-static-shared-Testing\build\
complexNumberTest.vcxproj]

complexNumbers.lib(complexNumbers.cpp.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRe
lease' doesn't match value 'MDd_DynamicDebug' in main.obj [C:\Users\tom\code\buildSystems\Build-Systems-Part-4-stat
ic-shared-Testing\build\complexNumberTest.vcxproj]" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">complexNumbers.lib(complexNumbers.cpp.obj</span><span style="color: #D4D4D4">) </span><span style="color: #DCDCAA">:</span><span style="color: #D4D4D4"> error LNK2038: mismatch detected </span><span style="color: #C586C0">for</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&#39;_ITERATOR_DEBUG_LEVEL&#39;</span><span style="color: #D4D4D4">: value </span><span style="color: #CE9178">&#39;0&#39;</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">do</span></span>
<span class="line"><span style="color: #DCDCAA">esn</span><span style="color: #DCDCAA">&#39;t match value &#39;</span><span style="color: #DCDCAA">2</span><span style="color: #DCDCAA">&#39; in main.obj [C:\Users\tom\code\buildSystems\Build-Systems-Part-4-static-shared-Testing\build\</span></span>
<span class="line"><span style="color: #DCDCAA">complexNumberTest.vcxproj]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #DCDCAA">complexNumbers.lib(complexNumbers.cpp.obj) : error LNK2038: mismatch detected for &#39;</span><span style="color: #DCDCAA">RuntimeLibrary</span><span style="color: #DCDCAA">&#39;: value &#39;</span><span style="color: #DCDCAA">MD_DynamicRe</span></span>
<span class="line"><span style="color: #DCDCAA">lease</span><span style="color: #DCDCAA">&#39; doesn&#39;</span><span style="color: #DCDCAA">t</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">match</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">value</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&#39;MDd_DynamicDebug&#39;</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">in</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">main.obj</span><span style="color: #D4D4D4"> [C:</span><span style="color: #D7BA7D">\U</span><span style="color: #D4D4D4">sers</span><span style="color: #D7BA7D">\t</span><span style="color: #D4D4D4">om</span><span style="color: #D7BA7D">\c</span><span style="color: #D4D4D4">ode</span><span style="color: #D7BA7D">\b</span><span style="color: #D4D4D4">uildSystems</span><span style="color: #D7BA7D">\B</span><span style="color: #D4D4D4">uild-Systems-Part-4-stat</span></span>
<span class="line"><span style="color: #DCDCAA">ic-shared-Testing\build\complexNumberTest.vcxproj]</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Both <code>_ITERATOR_DEBUG_LEVEL</code> and <code>MD_DynamicRelease</code> are variables set by the linker, and it checks that all dependencies have the same entry (i.e. either debug or release). So, if you want to use your library on Windows, make sure that you either provide both a debug and release build, or be consistent in the use of either a debug/release compilation.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Since both release and debug libraries have the same name, we can only provide one or the other. Thus, on Windows, the convention is that we provide two versions of a library with the name <code>&lt;lib-name&gt;.lib|dll</code> for a release build of a static|dynamic library and <code>&lt;lib-name&gt;d.lib|dll</code> for a debug build. Notice the additional <code>d</code> after <code>&lt;lib-name&gt;</code>. In this way, we can have both libraries compiled and sitting next to each other in the same folder.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This is why we included line 17-19 within the <code>CMakeLists.txt</code> file, i.e. we had:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"if(WIN32)\n  set(CMAKE_DEBUG_POSTFIX d)\nendif()","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(WIN32)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  set\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eCMAKE_DEBUG_POSTFIX\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e d)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":3,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="if(WIN32)
  set(CMAKE_DEBUG_POSTFIX d)
endif()" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">if</span><span style="color: #D4D4D4">(WIN32)</span></span>
<span class="line"><span style="color: #569CD6">  set</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">CMAKE_DEBUG_POSTFIX</span><span style="color: #D4D4D4"> d)</span></span>
<span class="line"><span style="color: #569CD6">endif</span><span style="color: #D4D4D4">()</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Since this is a common convention (I would label it as a hack or workaround, though!), CMake has support out of the box for this, and we don't have to write messy CMake generator expressions to check if we have a release or debug build. Instead, CMake does that for us automatically. By the way, if you are wondering why we use <code>WIN32</code> (aren't we firmly established in the 64-bit era?), well, CMake has been around for some time, and it is just showing its age. But again, I remain hopeful for changes to be made by the 22<code>nd</code> century!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you wanted to build the dynamic library, then you would simply have to change the first command in this section. i.e. we then have</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake -DCMAKE_BUILD_TYPE=Release -DENABLE_SHARED=ON -G Ninja ..","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DCMAKE_BUILD_TYPE=Release\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DENABLE_SHARED=ON\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-G\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eNinja\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e..\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake -DCMAKE_BUILD_TYPE=Release -DENABLE_SHARED=ON -G Ninja .." style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DCMAKE_BUILD_TYPE=Release</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DENABLE_SHARED=ON</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-G</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">Ninja</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">..</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>The rest of the commands remain the same. You will notice, though, that the dynamic library will be installed into the <code>&lt;cmake-install-prefix&gt;/bin</code> directory for Windows, with the wrapper library still located in the <code>&lt;cmake-install-prefix&gt;/lib</code> folder (on UNIX, you get everything in the <code>lib/</code> folder as expected). The location doesn't matter, though, as CMake will expose the file locations through the <code>&lt;cmake-install-prefix&gt;/lib/cmake/complexNumber/*.cmake</code> files to any other project that wants to use this complex number library.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>However, as you may remember as well from previous articles, if we are working with Windows and dynamic libraries, we'll need to copy any <code>*.dll</code> file into the same folder as our executable. This may sound trivial, but now we have potentially different library names (thanks to the <code>d</code> suffix), as well as different locations of executables depending on the build script used (some will be in the <code>build/</code> folder, others will be in <code>build/Debug</code> or <code>build/Release</code>). There is no uniform handling of this, and we'll need to hack that into our CMake scripts later when we test the library.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>At this point, though, we are done with compiling and installing, and we can use our library within another project. Before we do, though, let us quickly look at the changes we would have to make if we wanted to provide a header-only library.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-header-only-libraries">Header-only libraries</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Header-only libraries are a weird niche topic for me in the context of C++. The fact that header-only libraries work at all is somewhat surprising (not from a technical point but from a design philosophy point of view). C++ requires a compiler to translate code into machine instructions, but nothing gets compiled within a header-only library, so you don't need a compiler (technically) to write your own header-only library.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Of course, you may want to provide some tests to ensure your code is working, and you probably want others to use your code. A header-only library will eventually get compiled, but not by you as the library developer, but rather by the end-user when they include it in their project and then compile it.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Having said that, apart from perhaps compiling test executables, a build script is just as important for a header-only library, as it can keep track of all header files that need to be copied during the installation, as well as generate all required <code>*.cmake</code> files that other projects can use to find this header-only library in a non-standard path.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Compared to our static and dynamic library example above, there are very few differences between the two projects, but they are important enough to highlight so that you can see what needs to be changed should you wish to do so. I'll concentrate on the differences, rather than going through all steps again, so we can wrap up this section fairly quickly.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-project-structure">Project structure</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The project itself remains largely unchanged in terms of its structure, and the only change here is that we have lost the <code>complexNumberLib/complexNumbers.cpp</code> source file. All of that content has now migrated into the <code>complexNumberLib/complexNumbers.hpp</code> header file. All pre-processor directives are gone now, as these are only relevant for dynamic libraries, which we can't compile now and so we don't need these directives anymore.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>As a consequence, we don't have any options anymore, and so we can remove the <code>CMakeOptions.txt</code> file. A real header-only library, though, likely would still have some configuration options, such as enabling testing as part of the build process, so you would likely still require the support of some options to be set during the configuration.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"root\n├── build/\n├── cmake/\n│   └── complexNumbersConfig.cmake.in\n├── complexNumberLib/\n│   ├── CMakeLists.txt\n│   └── complexNumbers.hpp\n└── CMakeLists.txt","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eroot\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── build/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── cmake/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── complexNumbersConfig.cmake.in\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── complexNumberLib/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   ├── CMakeLists.txt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── complexNumbers.hpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e└── CMakeLists.txt\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"plaintext","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":8,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="root
├── build/
├── cmake/
│   └── complexNumbersConfig.cmake.in
├── complexNumberLib/
│   ├── CMakeLists.txt
│   └── complexNumbers.hpp
└── CMakeLists.txt" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">root</span></span>
<span class="line"><span style="color: #D4D4D4">├── build/</span></span>
<span class="line"><span style="color: #D4D4D4">├── cmake/</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── complexNumbersConfig.cmake.in</span></span>
<span class="line"><span style="color: #D4D4D4">├── complexNumberLib/</span></span>
<span class="line"><span style="color: #D4D4D4">│   ├── CMakeLists.txt</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── complexNumbers.hpp</span></span>
<span class="line"><span style="color: #D4D4D4">└── CMakeLists.txt</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-source-files">Source files</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>For completeness, I have decided to reproduce the entire header file here so you can directly see the differences to the previous header file. As alluded to above, the pre-processor directives are gone, and all implementation of the functions is now within the header file itself.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"#pragma once\n\n#include \u0026lt;iostream\u003e\n#include \u0026lt;cmath\u003e\n#include \u0026lt;stdexcept\u003e\n#include \u0026lt;limits\u003e\n\nclass ComplexNumber {\npublic:\n\tComplexNumber(double real, double imaginary) : _real(real), _imaginary(imaginary) {\n    isNan(real, imaginary);\n  }\n\n\t~ComplexNumber() = default;\n\n\tdouble Re() const { return _real; }\n\tdouble Im() const { return _imaginary; }\n  void setRe(double real) { _real = real; }\n  void setIm(double imaginary) { _imaginary = imaginary; }\n\n  void conjugate() { _imaginary *= -1.0; }\n  double magnitude() const { return std::sqrt(std::pow(_real, 2) + std::pow(_imaginary, 2)); }\n\t\n\tComplexNumber operator+(const ComplexNumber \u0026amp;other) {\n    isNan(_real, _imaginary);\n    isNan(other._real, other._imaginary);\n\t\t\n    ComplexNumber c(0, 0);\n\t\tc._real = _real + other._real;\n\t\tc._imaginary = _imaginary + other._imaginary;\n\t\treturn c;\n\t}\n\n  ComplexNumber operator-(const ComplexNumber \u0026amp;other) {\n    isNan(_real, _imaginary);\n    isNan(other._real, other._imaginary);\n\t\t\n    ComplexNumber c(0, 0);\n    c._real = _real - other._real;\n    c._imaginary = _imaginary - other._imaginary;\n    return c;\n  }\n\n  ComplexNumber operator*(const ComplexNumber \u0026amp;other) {\n    isNan(_real, _imaginary);\n    isNan(other._real, other._imaginary);\n    \n    ComplexNumber c(0, 0);\n    c._real = _real * other._real - _imaginary * other._imaginary;\n    c._imaginary = _real * other._imaginary + _imaginary * other._real;\n    return c;\n  }\n\n  ComplexNumber operator/(const ComplexNumber \u0026amp;other) {\n    isNan(_real, _imaginary);\n    isNan(other._real, other._imaginary);\n\n    double denominator = other._real * other._real + other._imaginary * other._imaginary;\n    if (std::abs(denominator) \u0026lt; std::numeric_limits\u0026lt;double\u003e::epsilon())\n      throw std::runtime_error(\u0022Complex number division by zero\u0022);\n    \n    ComplexNumber c(0, 0);\n    c._real = (_real * other._real + _imaginary * other._imaginary) / denominator;\n    c._imaginary = (_imaginary * other._real - _real * other._imaginary) / denominator;\n    return c;\n  }\n\n  friend std::ostream \u0026amp;operator\u0026lt;\u0026lt;(std::ostream \u0026amp;os, const ComplexNumber \u0026amp;c) {\n    os \u0026lt;\u0026lt; \u0022(\u0022 \u0026lt;\u0026lt; c._real \u0026lt;\u0026lt; \u0022, \u0022 \u0026lt;\u0026lt; c._imaginary \u0026lt;\u0026lt; \u0022)\u0022;\n    return os;\n  }\n\nprivate:\n  void isNan(double real, double imaginary) const {\n  if (std::isnan(real) || std::isnan(imaginary))\n    throw std::runtime_error(\u0022Complex number is NaN\u0022);\n}\n\t\nprivate:\n\tdouble _real;\n\tdouble _imaginary;\n};","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#pragma\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eonce\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;cmath\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;stdexcept\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;limits\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eclass\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003epublic:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ereal\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eimaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) : \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(real), \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(imaginary) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(real, imaginary);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e~ComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() = \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edefault\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e { \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e _real; }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eIm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e { \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e _imaginary; }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003evoid\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003esetRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ereal\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) { _real = real; }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003evoid\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003esetIm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eimaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) { _imaginary = imaginary; }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003evoid\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003econjugate\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() { _imaginary *= -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e; }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003emagnitude\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e { \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003esqrt\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003epow\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(_real, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) + \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003epow\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(_imaginary, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)); }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator+\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(_real, _imaginary);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\t\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\t\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = _real + \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\t\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = _imaginary + \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\t\u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e c;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator-\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(_real, _imaginary);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\t\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = _real - \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = _imaginary - \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e c;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator*\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(_real, _imaginary);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = _real * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e - _imaginary * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = _real * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e + _imaginary * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e c;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator/\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(_real, _imaginary);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e denominator = \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e + \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e (\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eabs\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(denominator) \u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003enumeric_limits\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026gt;::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eepsilon\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e      \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ethrow\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eruntime_error\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Complex number division by zero\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = (_real * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e + _imaginary * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) / denominator;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = (_imaginary * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e - _real * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) / denominator;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e c;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003efriend\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eostream\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator\u0026lt;\u0026lt;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eostream\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eos\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    os \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;(\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;, \u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;)\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e os;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eprivate:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003evoid\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ereal\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eimaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e (\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisnan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(real) || \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisnan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(imaginary))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ethrow\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eruntime_error\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Complex number is NaN\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eprivate:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e _real;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e _imaginary;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e};\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":82,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="#pragma once

#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;

class ComplexNumber {
public:
	ComplexNumber(double real, double imaginary) : _real(real), _imaginary(imaginary) {
    isNan(real, imaginary);
  }

	~ComplexNumber() = default;

	double Re() const { return _real; }
	double Im() const { return _imaginary; }
  void setRe(double real) { _real = real; }
  void setIm(double imaginary) { _imaginary = imaginary; }

  void conjugate() { _imaginary *= -1.0; }
  double magnitude() const { return std::sqrt(std::pow(_real, 2) + std::pow(_imaginary, 2)); }
	
	ComplexNumber operator+(const ComplexNumber &amp;other) {
    isNan(_real, _imaginary);
    isNan(other._real, other._imaginary);
		
    ComplexNumber c(0, 0);
		c._real = _real + other._real;
		c._imaginary = _imaginary + other._imaginary;
		return c;
	}

  ComplexNumber operator-(const ComplexNumber &amp;other) {
    isNan(_real, _imaginary);
    isNan(other._real, other._imaginary);
		
    ComplexNumber c(0, 0);
    c._real = _real - other._real;
    c._imaginary = _imaginary - other._imaginary;
    return c;
  }

  ComplexNumber operator*(const ComplexNumber &amp;other) {
    isNan(_real, _imaginary);
    isNan(other._real, other._imaginary);
    
    ComplexNumber c(0, 0);
    c._real = _real * other._real - _imaginary * other._imaginary;
    c._imaginary = _real * other._imaginary + _imaginary * other._real;
    return c;
  }

  ComplexNumber operator/(const ComplexNumber &amp;other) {
    isNan(_real, _imaginary);
    isNan(other._real, other._imaginary);

    double denominator = other._real * other._real + other._imaginary * other._imaginary;
    if (std::abs(denominator) &lt; std::numeric_limits&lt;double&gt;::epsilon())
      throw std::runtime_error(&quot;Complex number division by zero&quot;);
    
    ComplexNumber c(0, 0);
    c._real = (_real * other._real + _imaginary * other._imaginary) / denominator;
    c._imaginary = (_imaginary * other._real - _real * other._imaginary) / denominator;
    return c;
  }

  friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, const ComplexNumber &amp;c) {
    os &lt;&lt; &quot;(&quot; &lt;&lt; c._real &lt;&lt; &quot;, &quot; &lt;&lt; c._imaginary &lt;&lt; &quot;)&quot;;
    return os;
  }

private:
  void isNan(double real, double imaginary) const {
  if (std::isnan(real) || std::isnan(imaginary))
    throw std::runtime_error(&quot;Complex number is NaN&quot;);
}
	
private:
	double _real;
	double _imaginary;
};" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">#pragma</span><span style="color: #569CD6"> </span><span style="color: #9CDCFE">once</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;iostream&gt;</span></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;cmath&gt;</span></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;stdexcept&gt;</span></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;limits&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">class</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #569CD6">public:</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #DCDCAA">ComplexNumber</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">real</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">imaginary</span><span style="color: #D4D4D4">) : </span><span style="color: #DCDCAA">_real</span><span style="color: #D4D4D4">(real), </span><span style="color: #DCDCAA">_imaginary</span><span style="color: #D4D4D4">(imaginary) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(real, imaginary);</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #DCDCAA">~ComplexNumber</span><span style="color: #D4D4D4">() = </span><span style="color: #569CD6">default</span><span style="color: #D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">Re</span><span style="color: #D4D4D4">() </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> { </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> _real; }</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">Im</span><span style="color: #D4D4D4">() </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> { </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> _imaginary; }</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">void</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">setRe</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">real</span><span style="color: #D4D4D4">) { _real = real; }</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">void</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">setIm</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">imaginary</span><span style="color: #D4D4D4">) { _imaginary = imaginary; }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">void</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">conjugate</span><span style="color: #D4D4D4">() { _imaginary *= -</span><span style="color: #B5CEA8">1.0</span><span style="color: #D4D4D4">; }</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">magnitude</span><span style="color: #D4D4D4">() </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> { </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">sqrt</span><span style="color: #D4D4D4">(</span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">pow</span><span style="color: #D4D4D4">(_real, </span><span style="color: #B5CEA8">2</span><span style="color: #D4D4D4">) + </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">pow</span><span style="color: #D4D4D4">(_imaginary, </span><span style="color: #B5CEA8">2</span><span style="color: #D4D4D4">)); }</span></span>
<span class="line"><span style="color: #D4D4D4">	</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">operator+</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(_real, _imaginary);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">		</span></span>
<span class="line"><span style="color: #D4D4D4">    ComplexNumber </span><span style="color: #DCDCAA">c</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">		</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> = _real + </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">		</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4"> = _imaginary + </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">		</span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> c;</span></span>
<span class="line"><span style="color: #D4D4D4">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">operator-</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(_real, _imaginary);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">		</span></span>
<span class="line"><span style="color: #D4D4D4">    ComplexNumber </span><span style="color: #DCDCAA">c</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> = _real - </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4"> = _imaginary - </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> c;</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">operator*</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(_real, _imaginary);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span></span>
<span class="line"><span style="color: #D4D4D4">    ComplexNumber </span><span style="color: #DCDCAA">c</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> = _real * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> - _imaginary * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4"> = _real * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4"> + _imaginary * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> c;</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">operator/</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(_real, _imaginary);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> denominator = </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> + </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4"> * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (</span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">abs</span><span style="color: #D4D4D4">(denominator) &lt; </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #4EC9B0">numeric_limits</span><span style="color: #D4D4D4">&lt;</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4">&gt;::</span><span style="color: #DCDCAA">epsilon</span><span style="color: #D4D4D4">())</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #C586C0">throw</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">runtime_error</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&quot;Complex number division by zero&quot;</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span></span>
<span class="line"><span style="color: #D4D4D4">    ComplexNumber </span><span style="color: #DCDCAA">c</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> = (_real * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> + _imaginary * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">) / denominator;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4"> = (_imaginary * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> - _real * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">) / denominator;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> c;</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">friend</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #4EC9B0">ostream</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #C586C0">operator&lt;&lt;</span><span style="color: #D4D4D4">(</span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #4EC9B0">ostream</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">os</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">    os &lt;&lt; </span><span style="color: #CE9178">&quot;(&quot;</span><span style="color: #D4D4D4"> &lt;&lt; </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> &lt;&lt; </span><span style="color: #CE9178">&quot;, &quot;</span><span style="color: #D4D4D4"> &lt;&lt; </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4"> &lt;&lt; </span><span style="color: #CE9178">&quot;)&quot;</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> os;</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">private:</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">void</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">real</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">imaginary</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (</span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">isnan</span><span style="color: #D4D4D4">(real) || </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">isnan</span><span style="color: #D4D4D4">(imaginary))</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">throw</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">runtime_error</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&quot;Complex number is NaN&quot;</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"><span style="color: #D4D4D4">	</span></span>
<span class="line"><span style="color: #569CD6">private:</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> _real;</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> _imaginary;</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-cmake-build-scripts">CMake build scripts</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The root-level <code>CMakeLists.txt</code> file also changes slightly. Most of the file remains unchanged, especially the part around the installation, but then we have to change the type of the library from either <code>STATIC</code> or <code>SHARED</code> to <code>INTERFACE</code>. In CMake, if we are working with a header-only library, it is identified as <code>INTERFACE</code> internally.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The <code>target_include_directories()</code> call also lost its <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/advanced-cmake-features-to-power-up-your-cfd-development#aioseo-generator-expressions" target="_blank" rel="noopener" title="">generator expression</a>, we no longer need to differentiate between the build and install target, as we no longer have a build target. Since we only have the install target left, we can use that to simplify our build instructions.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Both these changes are shown in the file excerpt below:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"# Create a header-only library for the complex number class\nadd_library(${CMAKE_PROJECT_NAME} INTERFACE)\n\ntarget_include_directories(${CMAKE_PROJECT_NAME}\n  INTERFACE\n    ${CMAKE_INSTALL_INCLUDEDIR}\n)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Create a header-only library for the complex number class\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eadd_library\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e INTERFACE)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003etarget_include_directories\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  INTERFACE\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_INSTALL_INCLUDEDIR}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":7,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="# Create a header-only library for the complex number class
add_library(${CMAKE_PROJECT_NAME} INTERFACE)

target_include_directories(${CMAKE_PROJECT_NAME}
  INTERFACE
    ${CMAKE_INSTALL_INCLUDEDIR}
)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #6A9955"># Create a header-only library for the complex number class</span></span>
<span class="line"><span style="color: #569CD6">add_library</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span><span style="color: #D4D4D4"> INTERFACE)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">target_include_directories</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span></span>
<span class="line"><span style="color: #D4D4D4">  INTERFACE</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">${CMAKE_INSTALL_INCLUDEDIR}</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Notice also that we can remove calls to <code>set(CMAKE_DEBUG_POSTFIX d)</code> and <code>target_compile_definitions(${CMAKE_PROJECT_NAME} PRIVATE COMPILEDLL)</code>, as we are no longer building a library. Thus, there is no need for a <code>d</code> library name suffix or pre-processor directive that is applicable to dynamic libraries only.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The <code>complexNumberLib/CMakeLists.txt</code> file also has to change since we no longer have a source file to compile. Though, we still want to associate the header file with the library (target), so that it gets installed as part of the installation step. This is shown below as well:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"target_sources(${CMAKE_PROJECT_NAME}\n  PUBLIC FILE_SET HEADERS\n  BASE_DIRS ${PROJECT_SOURCE_DIR}\n  FILES ${CMAKE_CURRENT_SOURCE_DIR}/complexNumbers.hpp\n)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003etarget_sources\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  PUBLIC FILE_SET HEADERS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  BASE_DIRS \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${PROJECT_SOURCE_DIR}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  FILES \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_CURRENT_SOURCE_DIR}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e/complexNumbers.hpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":5,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="target_sources(${CMAKE_PROJECT_NAME}
  PUBLIC FILE_SET HEADERS
  BASE_DIRS ${PROJECT_SOURCE_DIR}
  FILES ${CMAKE_CURRENT_SOURCE_DIR}/complexNumbers.hpp
)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">target_sources</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span></span>
<span class="line"><span style="color: #D4D4D4">  PUBLIC FILE_SET HEADERS</span></span>
<span class="line"><span style="color: #D4D4D4">  BASE_DIRS </span><span style="color: #569CD6">${PROJECT_SOURCE_DIR}</span></span>
<span class="line"><span style="color: #D4D4D4">  FILES </span><span style="color: #569CD6">${CMAKE_CURRENT_SOURCE_DIR}</span><span style="color: #D4D4D4">/complexNumbers.hpp</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>And these were all changes required to CMake! We simply change the library target, remove the project directory for the build stage (though technically we could have left it in, the generator expression would have always evaluated to the install step, never the build step), and removed the source file from the sources as well. Now, let's look at the changes on the command line to get this library installed.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-command-line-instructions">Command line instructions</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>While we do not have to build this library, we still need to perform the configuration step. Since we are not building anything, we do not need a generator like <code>Ninja</code>, and we don't have to specify a build type such as debug or release (that is up to decide for the project that uses our library). Since we also removed the <code>CMakeOptions.txt</code> file, and there are no further variables for us to set for the configuration, we can simply run CMake with the following command:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake ..","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e..\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake .." style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">..</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>As already mentioned, we skip the build stage, and this is pretty much the only difference on the command line. The next step is the install step, which still requires a <code>prefix</code> (i.e. install location) to be specified. I am using <code>C:\temp</code> in this example again (though I have also tested <code>~/temp</code> on UNIX, which is working fine for the header-only and static/dynamic library compilation). The command is:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake \u002d\u002dinstall . \u002d\u002dprefix \u0022C:\\temp\u0022","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u002d\u002dinstall\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u002d\u002dprefix\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;C:\\temp\u0026quot;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake --install . --prefix &quot;C:\temp&quot;" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">--install</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">.</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">--prefix</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;C:\temp&quot;</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>This will have installed the header-only library on your system. With that done, let us have a look how to use all three types of libraries within another project.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-using-the-installed-libraries-in-other-projects">Using the installed libraries in other projects</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Up until this point, we haven't actually achieved anything more than what we did when <a href="https://cfd.university/learn/automating-cfd-solver-and-library-compilation-using-cmake/introduction-to-cmake-for-cfd-practitioners#aioseo-working-with-our-complex-number-library" target="_blank" rel="noopener" title="">introducing CMake</a> for the first time, where we looked at the complex number library as well. We did compile and install it (though we didn't look at the differences between header-only and compiled libraries). What I want to do in this section is to emulate what another project would have to do to use our library. For that, we will develop a very simple project that simply tests the arithmetic overloaded operators within the complex number class.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-project-structure">Project structure</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>This is the simplest project you can have; it consists of our <code>build/</code> folder, a <code>main.cpp</code> source file that tests some of the features of the complex number class, as well as the <code>CMakeLists.txt</code> file, which is where all the magic is happening. In addition, we retain a <code>CMakeOptions.txt</code> file, which could have, however, been integrated into the main <code>CMakeLists.txt</code> file. It keeps the options separated, though, from the main build logic, and this is retained here. The structure is given below as well.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"root\n├── build/\n├── main.cpp\n├── CMakeLists.txt\n└── CMakeOptions.txt","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eroot\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── build/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── main.cpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── CMakeLists.txt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e└── CMakeOptions.txt\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"plaintext","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":5,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="root
├── build/
├── main.cpp
├── CMakeLists.txt
└── CMakeOptions.txt" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">root</span></span>
<span class="line"><span style="color: #D4D4D4">├── build/</span></span>
<span class="line"><span style="color: #D4D4D4">├── main.cpp</span></span>
<span class="line"><span style="color: #D4D4D4">├── CMakeLists.txt</span></span>
<span class="line"><span style="color: #D4D4D4">└── CMakeOptions.txt</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-source">Source file of a simple test program for complex numbers</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Let's start by looking at the content of the <code>main.cpp</code> file. This simple test program includes the header file of our library and then defines two complex numbers that are combined through the various arithmetic operators, e.g. addition, subtraction, multiplication, and division. These are stored in different complex numbers, and the result is then printed to the console for verification. There is no assertion going on, this is not a replacement of a unit test, it is just to show that we can fidn the library and work with it. The code is given below: </p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"#include \u0026lt;iostream\u003e\n#include \u0022complexNumberLib/complexNumbers.hpp\u0022\n\nint main() {\n  ComplexNumber a(2, 3);\n  ComplexNumber b(4, 5);\n\n  ComplexNumber c = a + b;\n  ComplexNumber d = a - b;\n  ComplexNumber e = a * b;\n  ComplexNumber f = a / b;\n\n  std::cout \u0026lt;\u0026lt; c \u0026lt;\u0026lt; std::endl;\n  std::cout \u0026lt;\u0026lt; d \u0026lt;\u0026lt; std::endl;\n  std::cout \u0026lt;\u0026lt; e \u0026lt;\u0026lt; std::endl;\n  std::cout \u0026lt;\u0026lt; f \u0026lt;\u0026lt; std::endl;\n\n  return 0;\n}","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;complexNumberLib/complexNumbers.hpp\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eint\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003emain\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eb\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e4\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber c = a + b;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber d = a - b;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber e = a * b;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber f = a / b;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::cout \u0026lt;\u0026lt; c \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::endl;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::cout \u0026lt;\u0026lt; d \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::endl;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::cout \u0026lt;\u0026lt; e \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::endl;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::cout \u0026lt;\u0026lt; f \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::endl;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":19,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="#include &lt;iostream&gt;
#include &quot;complexNumberLib/complexNumbers.hpp&quot;

int main() {
  ComplexNumber a(2, 3);
  ComplexNumber b(4, 5);

  ComplexNumber c = a + b;
  ComplexNumber d = a - b;
  ComplexNumber e = a * b;
  ComplexNumber f = a / b;

  std::cout &lt;&lt; c &lt;&lt; std::endl;
  std::cout &lt;&lt; d &lt;&lt; std::endl;
  std::cout &lt;&lt; e &lt;&lt; std::endl;
  std::cout &lt;&lt; f &lt;&lt; std::endl;

  return 0;
}" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;iostream&gt;</span></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&quot;complexNumberLib/complexNumbers.hpp&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">int</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">main</span><span style="color: #D4D4D4">() {</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">2</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">b</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">4</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">5</span><span style="color: #D4D4D4">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber c = a + b;</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber d = a - b;</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber e = a * b;</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber f = a / b;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::cout &lt;&lt; c &lt;&lt; </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::endl;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::cout &lt;&lt; d &lt;&lt; </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::endl;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::cout &lt;&lt; e &lt;&lt; </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::endl;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::cout &lt;&lt; f &lt;&lt; </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::endl;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> </span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-cmake-build-scripts">CMake build scripts</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>If you don't care about dynamic libraries, or you do but only for UNIX systems, you can reduce your <code>CMakeLists.txt</code> file down to only 5 commands. However, we are good CFD developers, and we take cross-platform development seriously. So, our CMake file will now contain 48 lines instead of 5. The excess in lines required is not just a Windows fault; there are still rather hacky commands we need from CMake, which are cross-platform but just not very precise.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Be that as it may, working with libraries in CMake is actually rather straight forward, and there is excellent support for finding libraries, mainly thanks to the generated <code>*.cmake</code> files that we generated and installed as part of our complex number library generation step. Let's look at the <code>CMaekLists.txt</code> file, and then discuss it below.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake_minimum_required(VERSION 3.23)\n\nproject(\n  complexNumberTest\n  VERSION 1.0\n  LANGUAGES CXX\n)\n\n# include custom options\ninclude(CMakeOptions.txt)\n\n# Find packages will search for a specific library. CMake will fail if the package is REQUIRED but not found\nfind_package(complexNumbers REQUIRED)\n\n# Add an executable and provide the source file directly.\nadd_executable(${CMAKE_PROJECT_NAME} main.cpp)\n\n# Make sure you link your executable with your library. Notice the namespace that we defined earlier.\ntarget_link_libraries(${CMAKE_PROJECT_NAME} PRIVATE complexNumbers::complexNumbers)\n\nif (MSVC)\n  if(${ENABLE_SHARED})\n    target_compile_definitions(${CMAKE_PROJECT_NAME} PRIVATE COMPILEDLL)\n    else()\n    target_compile_definitions(${CMAKE_PROJECT_NAME} PRIVATE COMPILELIB)\n  endif()\nendif()\n\n# On Windows, we need the *.dll file in the same folder as the executable to be able to run it\nif(WIN32)\n  if(EXISTS \u0022${CMAKE_PREFIX_PATH}/bin/complexNumbers.dll\u0022 OR EXISTS \u0022${CMAKE_PREFIX_PATH}/bin/complexNumbersd.dll\u0022)\n    add_custom_command(\n      TARGET ${CMAKE_PROJECT_NAME}\n      POST_BUILD\n      COMMAND ${CMAKE_COMMAND} -E copy_if_different\n      \u0022${CMAKE_PREFIX_PATH}/bin/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u003e,complexNumbersd.dll,complexNumbers.dll\u003e\u0022\n      \u0022${CMAKE_BINARY_DIR}/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u003e,Debug,Release\u003e/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u003e,complexNumbersd.dll,complexNumbers.dll\u003e\u0022\n    )\n    add_custom_command(\n      TARGET ${CMAKE_PROJECT_NAME}\n      POST_BUILD\n      COMMAND ${CMAKE_COMMAND} -E copy_if_different\n      \u0022${CMAKE_PREFIX_PATH}/bin/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u003e,complexNumbersd.dll,complexNumbers.dll\u003e\u0022\n      \u0022${CMAKE_BINARY_DIR}/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u003e,complexNumbersd.dll,complexNumbers.dll\u003e\u0022\n    )\n  endif()\nendif()","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003ecmake_minimum_required\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(VERSION 3.23)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eproject\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  complexNumberTest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  VERSION 1.0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  LANGUAGES CXX\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# include custom options\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003einclude\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(CMakeOptions.txt)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Find packages will search for a specific library. CMake will fail if the package is REQUIRED but not found\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003efind_package\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(complexNumbers REQUIRED)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Add an executable and provide the source file directly.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eadd_executable\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e main.cpp)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# Make sure you link your executable with your library. Notice the namespace that we defined earlier.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003etarget_link_libraries\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e PRIVATE complexNumbers::complexNumbers)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e (MSVC)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  if\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${ENABLE_SHARED}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e    target_compile_definitions\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e PRIVATE COMPILEDLL)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e    else\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e    target_compile_definitions\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e PRIVATE COMPILELIB)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  endif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# On Windows, we need the *.dll file in the same folder as the executable to be able to run it\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(WIN32)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  if\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eEXISTS\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;${CMAKE_PREFIX_PATH}/bin/complexNumbers.dll\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eOR\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eEXISTS\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;${CMAKE_PREFIX_PATH}/bin/complexNumbersd.dll\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e    add_custom_command\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e      \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTARGET\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e      POST_BUILD\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e      \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCOMMAND\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_COMMAND}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e -E copy_if_different\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e      \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;${CMAKE_PREFIX_PATH}/bin/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u0026gt;,complexNumbersd.dll,complexNumbers.dll\u0026gt;\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e      \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;${CMAKE_BINARY_DIR}/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u0026gt;,Debug,Release\u0026gt;/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u0026gt;,complexNumbersd.dll,complexNumbers.dll\u0026gt;\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e    add_custom_command\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e      \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTARGET\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e      POST_BUILD\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e      \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCOMMAND\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_COMMAND}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e -E copy_if_different\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e      \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;${CMAKE_PREFIX_PATH}/bin/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u0026gt;,complexNumbersd.dll,complexNumbers.dll\u0026gt;\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e      \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;${CMAKE_BINARY_DIR}/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u0026gt;,complexNumbersd.dll,complexNumbers.dll\u0026gt;\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    )\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e  endif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eendif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":47,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake_minimum_required(VERSION 3.23)

project(
  complexNumberTest
  VERSION 1.0
  LANGUAGES CXX
)

# include custom options
include(CMakeOptions.txt)

# Find packages will search for a specific library. CMake will fail if the package is REQUIRED but not found
find_package(complexNumbers REQUIRED)

# Add an executable and provide the source file directly.
add_executable(${CMAKE_PROJECT_NAME} main.cpp)

# Make sure you link your executable with your library. Notice the namespace that we defined earlier.
target_link_libraries(${CMAKE_PROJECT_NAME} PRIVATE complexNumbers::complexNumbers)

if (MSVC)
  if(${ENABLE_SHARED})
    target_compile_definitions(${CMAKE_PROJECT_NAME} PRIVATE COMPILEDLL)
    else()
    target_compile_definitions(${CMAKE_PROJECT_NAME} PRIVATE COMPILELIB)
  endif()
endif()

# On Windows, we need the *.dll file in the same folder as the executable to be able to run it
if(WIN32)
  if(EXISTS &quot;${CMAKE_PREFIX_PATH}/bin/complexNumbers.dll&quot; OR EXISTS &quot;${CMAKE_PREFIX_PATH}/bin/complexNumbersd.dll&quot;)
    add_custom_command(
      TARGET ${CMAKE_PROJECT_NAME}
      POST_BUILD
      COMMAND ${CMAKE_COMMAND} -E copy_if_different
      &quot;${CMAKE_PREFIX_PATH}/bin/$&lt;IF:$&lt;CONFIG:Debug&gt;,complexNumbersd.dll,complexNumbers.dll&gt;&quot;
      &quot;${CMAKE_BINARY_DIR}/$&lt;IF:$&lt;CONFIG:Debug&gt;,Debug,Release&gt;/$&lt;IF:$&lt;CONFIG:Debug&gt;,complexNumbersd.dll,complexNumbers.dll&gt;&quot;
    )
    add_custom_command(
      TARGET ${CMAKE_PROJECT_NAME}
      POST_BUILD
      COMMAND ${CMAKE_COMMAND} -E copy_if_different
      &quot;${CMAKE_PREFIX_PATH}/bin/$&lt;IF:$&lt;CONFIG:Debug&gt;,complexNumbersd.dll,complexNumbers.dll&gt;&quot;
      &quot;${CMAKE_BINARY_DIR}/$&lt;IF:$&lt;CONFIG:Debug&gt;,complexNumbersd.dll,complexNumbers.dll&gt;&quot;
    )
  endif()
endif()" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">cmake_minimum_required</span><span style="color: #D4D4D4">(VERSION 3.23)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">project</span><span style="color: #D4D4D4">(</span></span>
<span class="line"><span style="color: #D4D4D4">  complexNumberTest</span></span>
<span class="line"><span style="color: #D4D4D4">  VERSION 1.0</span></span>
<span class="line"><span style="color: #D4D4D4">  LANGUAGES CXX</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># include custom options</span></span>
<span class="line"><span style="color: #569CD6">include</span><span style="color: #D4D4D4">(CMakeOptions.txt)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># Find packages will search for a specific library. CMake will fail if the package is REQUIRED but not found</span></span>
<span class="line"><span style="color: #569CD6">find_package</span><span style="color: #D4D4D4">(complexNumbers REQUIRED)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># Add an executable and provide the source file directly.</span></span>
<span class="line"><span style="color: #569CD6">add_executable</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span><span style="color: #D4D4D4"> main.cpp)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># Make sure you link your executable with your library. Notice the namespace that we defined earlier.</span></span>
<span class="line"><span style="color: #569CD6">target_link_libraries</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span><span style="color: #D4D4D4"> PRIVATE complexNumbers::complexNumbers)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">if</span><span style="color: #D4D4D4"> (MSVC)</span></span>
<span class="line"><span style="color: #569CD6">  if</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${ENABLE_SHARED}</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">    target_compile_definitions</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span><span style="color: #D4D4D4"> PRIVATE COMPILEDLL)</span></span>
<span class="line"><span style="color: #569CD6">    else</span><span style="color: #D4D4D4">()</span></span>
<span class="line"><span style="color: #569CD6">    target_compile_definitions</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span><span style="color: #D4D4D4"> PRIVATE COMPILELIB)</span></span>
<span class="line"><span style="color: #569CD6">  endif</span><span style="color: #D4D4D4">()</span></span>
<span class="line"><span style="color: #569CD6">endif</span><span style="color: #D4D4D4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># On Windows, we need the *.dll file in the same folder as the executable to be able to run it</span></span>
<span class="line"><span style="color: #569CD6">if</span><span style="color: #D4D4D4">(WIN32)</span></span>
<span class="line"><span style="color: #569CD6">  if</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">EXISTS</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;${CMAKE_PREFIX_PATH}/bin/complexNumbers.dll&quot;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">OR</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">EXISTS</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&quot;${CMAKE_PREFIX_PATH}/bin/complexNumbersd.dll&quot;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #569CD6">    add_custom_command</span><span style="color: #D4D4D4">(</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #569CD6">TARGET</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span></span>
<span class="line"><span style="color: #D4D4D4">      POST_BUILD</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #569CD6">COMMAND</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">${CMAKE_COMMAND}</span><span style="color: #D4D4D4"> -E copy_if_different</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">&quot;${CMAKE_PREFIX_PATH}/bin/$&lt;IF:$&lt;CONFIG:Debug&gt;,complexNumbersd.dll,complexNumbers.dll&gt;&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">&quot;${CMAKE_BINARY_DIR}/$&lt;IF:$&lt;CONFIG:Debug&gt;,Debug,Release&gt;/$&lt;IF:$&lt;CONFIG:Debug&gt;,complexNumbersd.dll,complexNumbers.dll&gt;&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    )</span></span>
<span class="line"><span style="color: #569CD6">    add_custom_command</span><span style="color: #D4D4D4">(</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #569CD6">TARGET</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span></span>
<span class="line"><span style="color: #D4D4D4">      POST_BUILD</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #569CD6">COMMAND</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">${CMAKE_COMMAND}</span><span style="color: #D4D4D4"> -E copy_if_different</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">&quot;${CMAKE_PREFIX_PATH}/bin/$&lt;IF:$&lt;CONFIG:Debug&gt;,complexNumbersd.dll,complexNumbers.dll&gt;&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">&quot;${CMAKE_BINARY_DIR}/$&lt;IF:$&lt;CONFIG:Debug&gt;,complexNumbersd.dll,complexNumbers.dll&gt;&quot;</span></span>
<span class="line"><span style="color: #D4D4D4">    )</span></span>
<span class="line"><span style="color: #569CD6">  endif</span><span style="color: #D4D4D4">()</span></span>
<span class="line"><span style="color: #569CD6">endif</span><span style="color: #D4D4D4">()</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Lines 1-10 should hopefully now be self-explanatory, as we have looked at this before a few times. A new command for us is the <code>find_package()</code> command on line 13, which is similar to the <code>find_dependency()</code> command that I mentioned before when we wrote our <code>&lt;library-name&gt;Config.cmake.in</code> configuration file.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>find_package()</code> is a bit of magic (not really, but as someone who has spent quite a lot of time manually compiling, installing, and linking libraries on the command line, it feels like cheating!). It will look for a given library and then has two options if it is not found. If we specify that the library is <code>REQUIRED</code>, CMake will abort the configuration step. If we omit this keyword, CMake will configure without issues and only print a warning to the console that a package was not found.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Some packages (libraries) are essential for your code to work. For example, when we developed our <a href="https://cfd.university/learn/the-complete-guide-to-structured-and-unstructured-mesh-reading-using-cgns/" target="_blank" rel="noopener" title="">CGNS-based mesh reading library for structured and unstructured grids</a>, we require the CGSN library to be available, otherwise we can't build the library. In this case, <code>REQUIRED</code> would need to be specified, e.g. <code>find_package(cgns REQUIRED)</code>. In other cases, we can proceed with the build process, even if a package is not found. For example, we can still build a library even if the test framework like Google test (gtest) is not found (it won't affect the build of the library itself).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We then proceeded to line 16 to generate an executable, where I specified the source file here as the second argument. For a larger project, I would omit that source file and add it instead by calling <code>target_sources()</code>, but let's keep things simple here.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Then, the real magic happens on line 19; we are now instructing CMake to link our executable from line 16 with the complex number library we found on line 13 (if it wasn't found, CMake would have never gotten to lines 13 and 16 in the first place). Notice that we now have to use the namespace <code>complexNumber::</code> that we have specified before in the <code>install()</code> command within the root level <code>CMakeLists.txt</code> script of the complex number project.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We link against the library using <code>PRIVATE</code>. There may be circumstances where you need to link here using <code>PUBLIC</code>, for example, if you use a dynamic (<code>SHARED</code>) library and you are developing a library yourself, and you know that whoever uses your library also needs to have access to the library you are linking against. Take the CGNS mesh reader library we worked on as an example; if we were to link the dynamic CGNS library against our mesh reader library, using <code>PUBLIC</code> here would allow anyone using our library to also access CGNS-specific functions/definitions.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>On lines 21-27, we check if we want to compile a static or dynamic version of our library. The <code>ENABLE_SHARED</code> variable is set similar to the complex number library itself within the <code>CMakeOptions.txt</code> file and defaults to a static library build if nothing is specified. To overwrite this, we would pass <code>-DENABLE_SHARED=ON|OFF</code> to CMake during configuration.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>And then we have lines 30-47. Any comment starting with <code># On Windows, ...</code> should make you nervous and induce anxiety. It does for me, as I have written many comments starting just like this. I know, from personal experience, that every comment starting with <code># On Windows, ...</code> or similar, is responsible for a small nervous breakdown on the developer's side. So let's go through it.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>First, we check if we are on Windows, and if so, if the complex number library exists as a dynamic library within the CMake prefix path. We check for both release (<code>complexNumbers.dll</code>) and debug (<code>complexNumbersd.dll</code>) versions of this library. If it does exist, we invoke the <code>add_custom_command()</code> function in CMake, which allows us to perform some routine tasks (like copying files) in a platform indepdendent manner (i.e. no need to write simple bash or PowerShell scripts). Let's break this command down in the form that we use it:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"add_custom_command(\n  TARGET ${CMAKE_PROJECT_NAME}\n  POST_BUILD\n  COMMAND ${CMAKE_COMMAND} -E copy_if_different\n  \u0026lt;path-and-file-to-copy\u003e\n  \u0026lt;file-destination\u003e\n)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eadd_custom_command\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eTARGET\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PROJECT_NAME}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  POST_BUILD\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eCOMMAND\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_COMMAND}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e -E copy_if_different\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u0026lt;\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003epath\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e-\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eand\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e-file-to-copy\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u0026lt;file-destination\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":7,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="add_custom_command(
  TARGET ${CMAKE_PROJECT_NAME}
  POST_BUILD
  COMMAND ${CMAKE_COMMAND} -E copy_if_different
  &lt;path-and-file-to-copy&gt;
  &lt;file-destination&gt;
)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">add_custom_command</span><span style="color: #D4D4D4">(</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">TARGET</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">${CMAKE_PROJECT_NAME}</span></span>
<span class="line"><span style="color: #D4D4D4">  POST_BUILD</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">COMMAND</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">${CMAKE_COMMAND}</span><span style="color: #D4D4D4"> -E copy_if_different</span></span>
<span class="line"><span style="color: #D4D4D4">  &lt;</span><span style="color: #569CD6">path</span><span style="color: #D4D4D4">-</span><span style="color: #569CD6">and</span><span style="color: #D4D4D4">-file-to-copy&gt;</span></span>
<span class="line"><span style="color: #D4D4D4">  &lt;file-destination&gt;</span></span>
<span class="line"><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We say that whenever we invoke the <code>${CMAKE_PROJECT_NAME}</code> target, which we do when we type <code>cmake --build .</code> into our console (as it will look to build any executables or libraries that were defined with <code>add_executable()</code> or <code>add_library()</code>), it will run this command. Which command you ask? This is specified by the <code>COMMAND</code> keyword on line 4, which can be any command you could type in a terminal. Here, we use <code>${CMAKE_COMMAND} -E</code>, which will be replaced by <code>cmake -E</code>. There are <a href="https://cmake.org/cmake/help/latest/manual/cmake.1.html#cmdoption-cmake-E" target="_blank" rel="noopener" title="">several internal commands</a> that you can provide here as an argument.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We are using the <code>copy_if_different</code> command, that will look for a file and only copy it if it has changed since the last copy was done. It has two arguments, where the first points to the path and filename that we want to copy, while the second points to the location where we want to store the file.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>What we are trying to achieve here is to copy the <code>complexNumbers(d).dll</code> file into our <code>build/</code>, <code>build/Debug</code>, or <code>build/Release</code> directory, so that we can invoke any executable that will be generated in any of these folders. Thus, we see in our <code>CMakeLists.txt</code> file two commands to copy the dynamic library. The <code>&lt;path-and-file-to-copy&gt;</code> for the first command is given as:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"${CMAKE_PREFIX_PATH}/bin/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u003e,complexNumbersd.dll,complexNumbers.dll\u003e","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_PREFIX_PATH}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e/bin/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u0026gt;,complexNumbersd.dll,complexNumbers.dll\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="${CMAKE_PREFIX_PATH}/bin/$&lt;IF:$&lt;CONFIG:Debug&gt;,complexNumbersd.dll,complexNumbers.dll&gt;" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">${CMAKE_PREFIX_PATH}</span><span style="color: #D4D4D4">/bin/$&lt;IF:$&lt;CONFIG:Debug&gt;,complexNumbersd.dll,complexNumbers.dll&gt;</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>First, we check that within the CMake prefix path (e.g. <code>C:\temp</code> here, which is the install directory for our library), if we have a file called <code>bin/complexNumbersd.dll</code> if we are building a debug version of our executable or <code>bin/complexNumbers.dll</code> if we are building a release version. This is what the convoluted generator expression is checking for. Then, on line 37, we specify the path to copy this file to:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"${CMAKE_BINARY_DIR}/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u003e,Debug,Release\u003e/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u003e,complexNumbersd.dll,complexNumbers.dll\u003e","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e${CMAKE_BINARY_DIR}\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u0026gt;,Debug,Release\u0026gt;/$\u0026lt;IF:$\u0026lt;CONFIG:Debug\u0026gt;,complexNumbersd.dll,complexNumbers.dll\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cmake","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="${CMAKE_BINARY_DIR}/$&lt;IF:$&lt;CONFIG:Debug&gt;,Debug,Release&gt;/$&lt;IF:$&lt;CONFIG:Debug&gt;,complexNumbersd.dll,complexNumbers.dll&gt;" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">${CMAKE_BINARY_DIR}</span><span style="color: #D4D4D4">/$&lt;IF:$&lt;CONFIG:Debug&gt;,Debug,Release&gt;/$&lt;IF:$&lt;CONFIG:Debug&gt;,complexNumbersd.dll,complexNumbers.dll&gt;</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Here, <code>${CMAKE_BINARY_DIR}</code> is the <code>build/</code> folder, and then we dynamically construct a string based on the build type, the following paths are possible:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><!-- wp:list-item -->
<li><code>build/Debug/complexNumbersd.dll</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><code>build/Release/complexNumbers.dll</code></li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>However, the executable may not necessarily be generated in a <code>build/Debug</code> or <code>build/Release</code> folder (in-fact, this is only the case for MSBuild, XCode, and Ninja multi-config). Instead, we may have our executable located just in the <code>build/</code> folder. In this case, we also need to copy the dynamic library into the <code>build/</code> folder itself, and this is what lines 39-45 are doing. Having done this, we are now able to consume not just static and header-only libraries with our project, but dynamic libraries as well.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-static-and-dynamic-libraries">Command line instructions to build and execute the test program</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The same is true for the command line. It doesn't matter which of three types of library you are consuming, nor on which operating system you are. The build instructions will always be the same. Before we start, make sure the <code>build/</code> folder is present in your project, and if it is, go ahead and configure the project.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The configure step is shown below. The build type is set to release simply because we used a release build for our complex number above. You may have decided to build a debug version instead, in which case you have to change this instruction to debug (that is, if you are in Windows, UNIX users can, again, mix and match build types to their heart's content).</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake -DCMAKE_PREFIX_PATH=C:\\temp -DCMAKE_BUILD_TYPE=Release -G Ninja ..","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DCMAKE_PREFIX_PATH=C:\u003c/span\u003e\u003cspan style=\u0022color: #D7BA7D\u0022\u003e\\t\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eemp\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-DCMAKE_BUILD_TYPE=Release\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-G\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eNinja\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e..\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake -DCMAKE_PREFIX_PATH=C:\temp -DCMAKE_BUILD_TYPE=Release -G Ninja .." style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DCMAKE_PREFIX_PATH=C:</span><span style="color: #D7BA7D">\t</span><span style="color: #569CD6">emp</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-DCMAKE_BUILD_TYPE=Release</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-G</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">Ninja</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">..</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>I'm using <code>Ninja</code> as my generator again, but you can safely omit this flag. And then there is <code>-DCMAKE_PREFIX_PATH=C:\temp</code>. This is the folder where CMake will look for any <code>lib/cmake/*/*.cmake</code> files that could give CMake an indication of where to find any library in a non-standard search path, including any header files that were installed.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Next, we need to compile and link our executable to our library. This is achieved with the usual build command:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"cmake \u002d\u002dbuild . \u002d\u002dconfig Release","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecmake\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u002d\u002dbuild\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u002d\u002dconfig\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003eRelease\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="cmake --build . --config Release" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">cmake</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">--build</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">.</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">--config</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">Release</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We specify again that we want to build in release mode but adjust that as you need based on your previous <code>CMAKE_BUILD_TYPE</code> settings. Once completed, you should now have a new executable in your <code>build/</code> folder called either <code>complexNumberTest.exe</code> on Windows or <code>complexNumberTest</code> on UNIX, i.e. no file extension.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>On Windows, if you are already within the <code>build/</code> folder, you can execute this file using the following command:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":".\\complexNumberTest.exe","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\\\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecomplexNumberTest.exe\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"powershell","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code=".\complexNumberTest.exe" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">.\</span><span style="color: #DCDCAA">complexNumberTest.exe</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>And on UNIX, use:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"./complexNumberTest","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e./complexNumberTest\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="./complexNumberTest" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">./complexNumberTest</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>This should print the following messages to your console:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"(6, 8)\n(-2, -2)\n(-7, 22)\n(0.560976, 0.0487805)","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e6\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e8\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e-2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e-2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e-7\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e22\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.560976\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.0487805\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"powershell","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":4,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="(6, 8)
(-2, -2)
(-7, 22)
(0.560976, 0.0487805)" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">6</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">8</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">-2</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">-2</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">-7</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">22</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">0.560976</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">0.0487805</span><span style="color: #D4D4D4">)</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>This is just the output from the different arithmetic operations, so seeing that we are getting some complex numbers printed to the screen means the library was successfully linked to our executable. Congratulations, you are now able to develop your own libraries and make them available to other projects in a sensible manner.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-summary">Summary</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>In this article, we explored how to work with static, dynamic, and header-only libraries and showcased how to use a simple, complex number library to compile and install it, as well as how to consume this installed library within another project. We have seen that CMake provides a clean interface to us and that we achieve cross-platform compilation for different types of libraries with just a few lines of build script and a handful of commands on the console.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you have made it all the way to the end of this article and are reading it, this means that you are serious about developing code that is easy for other people/projects to consume. Please make use of this knowledge. Library development can be hard if you have to start from scratch, but most of what you will need is covered in this article. And anything else you may need will be covered in the next articles. So stay tuned for that, but in the meantime, always think of how you can export your work as a library and move away from executables. It makes using your code that much easier!</p>
<!-- /wp:paragraph -->