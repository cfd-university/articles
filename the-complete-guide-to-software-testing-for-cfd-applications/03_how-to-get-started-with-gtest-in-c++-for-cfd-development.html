<!-- wp:paragraph -->
<p>In this article, we will look at testing frameworks in C++ and I provide reasons for why I am using Google's gtest testing framework and why it covers all of our use-cases we have to test CFD solvers and related code. We will use it to rewrite our tests for the complex number class we developed in the previous article and see that the syntax is very similar, allowing us to easily switch from our own tests to gtest.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>By the end of this article, you should have a good understanding of how to get started with gtest. We look at how to compile the gtest library and how we can integrate it into our project. We also look at some peculiarities that may break cross-platform compilation and how to work around that issue. After we have rewritten our tests using gtest, you will know pretty much all there is to testing with gtest and can start using it for your own projects.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>While gtest is a very feature-rich library, we will mostly use only a small subset of features and these are highlighted in this article. In the following articles, we will solidify our knowledge of these core features while introducing other advanced features that will help us to clean up more complex tests, as well as use features that may be necessary for certain types of tests.</p>
<!-- /wp:paragraph -->

<!-- wp:block {"ref":2490} /-->

<!-- wp:list -->
<ul><!-- wp:list-item -->
<li><strong>Download</strong>: <a href="https://cfd.university/download/software-testing-part-2/?tmstv=1712896972" title="">Software-Testing-Part-2.zip</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><strong>Download</strong>: <a href="https://cfd.university/download/installgtest/?tmstv=1712896972" title="">installgtest.zip</a></li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:heading -->
<h2 class="wp-block-heading">In this series</h2>
<!-- /wp:heading -->

<!-- wp:shortcode -->
[custom_category_posts_list category_slug="the-complete-guide-to-software-testing-for-cfd-applications"]
<!-- /wp:shortcode -->

<!-- wp:heading -->
<h2 class="wp-block-heading">In this article</h2>
<!-- /wp:heading -->

<!-- wp:aioseo/table-of-contents {"headings":[{"id":9,"blockClientId":"885f7f17-dbf8-4b14-b369-76aabeba2823","content":"Why do we need a testing framework?","level":2,"anchor":"aioseo-why-we-need-a-testing-framework","order":0,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":17,"blockClientId":"f70287b8-c620-4715-9a39-ecc6113d1911","content":"Available C++ testing frameworks","level":2,"anchor":"aioseo-available-c-testing-frameworks","order":1,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":20,"blockClientId":"91371f1a-67a5-4a53-b754-45fd7aa704a5","content":"Kent Beck - the man! (behind xUnit)","level":3,"anchor":"aioseo-kent-beck-the-man","order":2,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":32,"blockClientId":"694d9006-d2a3-4cd6-b7b7-9252fc7066c9","content":"84 testing frameworks to choose from","level":3,"anchor":"aioseo-84-frameworks-to-choose-from","order":3,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":37,"blockClientId":"6d7a3ce1-0a7d-439f-b4da-4266fad1c2da","content":"Google test (gtest): Should we use it?","level":2,"anchor":"aioseo-using-google-test","order":4,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":39,"blockClientId":"23d253d4-a816-4338-9e7e-047cc0e7cbf8","content":"Reasons against Google's gtest","level":3,"anchor":"aioseo-reasons-against-google","order":5,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":43,"blockClientId":"c766ca16-8f26-4b4b-820d-b69da1518e52","content":"Reasons for Google's gtest","level":3,"anchor":"aioseo-reasons-for","order":6,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":50,"blockClientId":"bd9296ac-56bb-4978-b040-90ca2fe984ef","content":"Compiling and installing gtest","level":3,"anchor":"aioseo-compiling-and-installing-google-test","order":7,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":65,"blockClientId":"b0020fdc-56f3-4e64-b2aa-837630aecfa5","content":"Using Google test for our complex number class","level":2,"anchor":"aioseo-using","order":8,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":68,"blockClientId":"d56d1155-7691-4b4c-9449-fd452e820241","content":"Project structure","level":3,"anchor":"aioseo-porject-structure","order":9,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":71,"blockClientId":"bae64178-b60e-4ba0-9f6c-e06d99692c47","content":"Build scripts","level":3,"anchor":"aioseo-build-scripts","order":10,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":73,"blockClientId":"b8b66683-0b92-445e-bf8d-edce13297403","content":"Windows","level":4,"anchor":"aioseo-windows","order":11,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":81,"blockClientId":"32eb8459-f2ec-4ddb-8be0-3ccda6c8a3df","content":"UNIX","level":4,"anchor":"aioseo-unix","order":12,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":85,"blockClientId":"aac8f369-444b-468c-8a5d-9dd7262c5317","content":"Rewriting the unit tests","level":3,"anchor":"aioseo-rewriting-the-unit-tests","order":13,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":90,"blockClientId":"2365a42e-ec01-46af-8091-c1af9054c2f5","content":"Comparing our custom-made test with gtest for complex addition","level":4,"anchor":"aioseo-comparing-our-custom-made-test-with-gtest-for-the-complex-addition-test","order":14,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":95,"blockClientId":"b5471b9b-2e8b-4e2e-ba18-1bbfc6e5c371","content":"Some more thoughts on floating-point number comparisons","level":4,"anchor":"aioseo-some-more-thoughts-on-floating-point-number-comparisons","order":15,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":102,"blockClientId":"c23dd419-dee5-4739-9f0f-fd9a620e45b1","content":"What about testing exception handling?","level":4,"anchor":"aioseo-what-about-testing-exception-handling","order":16,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":107,"blockClientId":"45301d28-699a-4fd1-b21a-4b1adc8b2e1f","content":"Catching division by zero errors","level":4,"anchor":"aioseo-catching-division-y-zero-errors","order":17,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":114,"blockClientId":"ebd202f0-e4b6-4fb2-95d6-6e771ae9a3cc","content":"Updated complex number class","level":3,"anchor":"aioseo-updated-complex-number-class","order":18,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":117,"blockClientId":"8abc118e-add6-4fef-b2e2-4460b2972caa","content":"Checking for NaN","level":4,"anchor":"aioseo-checking-for-nan","order":19,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":120,"blockClientId":"e2660e70-f050-4e1d-8fe3-66ced7c590ac","content":"New setRe() and setIm() functions","level":4,"anchor":"aioseo-new-setre-and-setim-functions","order":20,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]},{"id":122,"blockClientId":"3f1032c6-d851-41b3-8aae-03ee9864d9e6","content":"Catching division by zero","level":4,"anchor":"aioseo-catching-division-by-zero","order":21,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]},{"id":125,"blockClientId":"3c535968-2f39-4295-8e47-8ad58c71bb3e","content":"Inspecting the output","level":3,"anchor":"aioseo-inspecting-the-output","order":22,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[{"id":130,"blockClientId":"3d8ea1e4-d5d0-495e-abd9-a2f5566fb9fd","content":"Making the tests fail","level":4,"anchor":"aioseo-making-the-tests-fail","order":23,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]}]},{"id":138,"blockClientId":"ded7702d-c697-41eb-bd90-f197025c1851","content":"Summary","level":2,"anchor":"aioseo-summary","order":24,"editedContent":"","editedLevel":0,"editedOrder":0,"hidden":false,"headings":[]}]} -->
<div class="wp-block-aioseo-table-of-contents"><ul><li><a href="#aioseo-why-we-need-a-testing-framework">Why do we need a testing framework?</a></li><li><a href="#aioseo-available-c-testing-frameworks">Available C++ testing frameworks</a><ul><li><a href="#aioseo-kent-beck-the-man">Kent Beck - the man! (behind xUnit)</a></li><li><a href="#aioseo-84-frameworks-to-choose-from">84 testing frameworks to choose from</a></li></ul></li><li><a href="#aioseo-using-google-test">Google test (gtest): Should we use it?</a><ul><li><a href="#aioseo-reasons-against-google">Reasons against Google&#x27;s gtest</a></li><li><a href="#aioseo-reasons-for">Reasons for Google&#x27;s gtest</a></li><li><a href="#aioseo-compiling-and-installing-google-test">Compiling and installing gtest</a></li></ul></li><li><a href="#aioseo-using">Using Google test for our complex number class</a><ul><li><a href="#aioseo-porject-structure">Project structure</a></li><li><a href="#aioseo-build-scripts">Build scripts</a><ul><li><a href="#aioseo-windows">Windows</a></li><li><a href="#aioseo-unix">UNIX</a></li></ul></li><li><a href="#aioseo-rewriting-the-unit-tests">Rewriting the unit tests</a><ul><li><a href="#aioseo-comparing-our-custom-made-test-with-gtest-for-the-complex-addition-test">Comparing our custom-made test with gtest for complex addition</a></li><li><a href="#aioseo-some-more-thoughts-on-floating-point-number-comparisons">Some more thoughts on floating-point number comparisons</a></li><li><a href="#aioseo-what-about-testing-exception-handling">What about testing exception handling?</a></li><li><a href="#aioseo-catching-division-y-zero-errors">Catching division by zero errors</a></li></ul></li><li><a href="#aioseo-updated-complex-number-class">Updated complex number class</a><ul><li><a href="#aioseo-checking-for-nan">Checking for NaN</a></li><li><a href="#aioseo-new-setre-and-setim-functions">New setRe() and setIm() functions</a></li><li><a href="#aioseo-catching-division-by-zero">Catching division by zero</a></li></ul></li><li><a href="#aioseo-inspecting-the-output">Inspecting the output</a><ul><li><a href="#aioseo-making-the-tests-fail">Making the tests fail</a></li></ul></li></ul></li><li><a href="#aioseo-summary">Summary</a></li></ul></div>
<!-- /wp:aioseo/table-of-contents -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-why-we-need-a-testing-framework">Why do we need a testing framework?</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>In my <a href="https://cfd.university/learn/the-complete-guide-to-software-testing-for-cfd-applications/the-test-driven-development-for-writing-bug-free-cfd-code" target="_blank" rel="noopener" title="">previous article</a>, we looked at how we can write a few simple unit tests to check that an implementation of a complex number class was done correctly. We used this as an example and said that complex numbers may come up in our CFD solver if we want to perform some signal analysis as part of the solving stage. To be fair, we would probably use C++'s inbuilt complex number class, but it served as an easy introduction, as complex numbers are rather straightforward to implement (understanding how to use them may be a different question).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>While we were able to provide a sensible suite of unit tests, we barely scratched the surface when it came to testing. We did check if a few floating point numbers were calculated correctly and used our custom-made floating point comparison function, which we also said is good but not perfect. We finished the discussion with boundary or edge cases, that we did not test for.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>For example, we said that we did not check for a division by zero and for not a number (<code>NaN</code>) errors. If we encounter either of them, there may not be a sensible result for our complex number class to compute, so it may be a good idea to throw an error. But how would we test that?</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>While we could come up with now more and more helper functions, as we did with our floating point comparison function, there is no need for us to reinvent the wheel. When it comes to software testing, we are better off looking for what software testing frameworks are available, and then picking one that we like the looks of the most.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Testing frameworks will not just have functionality to test floating point numbers and detect if a function throws an error, but they have support for quite a few more things, such as automatically detecting all your tests and running them, or mocking dependencies, a topic we mentioned in our opening article for this series on <a href="https://cfd.university/learn/the-complete-guide-to-software-testing-for-cfd-applications/how-to-get-started-with-software-testing-for-cfd-codes" target="_blank" rel="noopener" title="">how to get started with software testing</a>, but something we have not looked into detail at this stage.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Testing frameworks are rather straightforward to learn, so if you understood all of the unit tests in the <a href="https://cfd.university/learn/the-complete-guide-to-software-testing-for-cfd-applications/the-test-driven-development-for-writing-bug-free-cfd-code" target="_blank" rel="noopener" title="">previous article</a>, then you mostly just have the change the function signature and the <code>assert</code> statements. The code itself will still pretty much read in exactly the same way. So, learning how to use a testing framework is really simple, the biggest learning part on your side is to understand how testing works in general. But as I mentioned, we covered a lot of ground in the previous article, so if you feel you understood everything, then you are ready to move on to testing frameworks.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We will take a brief look at different software testing frameworks, and then I'll introduce you to my favourite testing framework. Even if you decide not to use it (and you may have strong reasons to do so), have a look at how you would use it. What you learn from this article can be translated to most other testing frameworks as well.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-available-c-testing-frameworks">Available C++ testing frameworks</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>When it come to available testing frameworks for C++ alone, we have more choice than time available to go through all of them to decide which one to use. Luckily, we have <a href="https://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#C++" target="_blank" rel="noopener" title="">this handy comparison</a> available, which shows us in a table form, which software testing frameworks exist for C++ and what features they have. At the time of writing, there are currently 84 different testing frameworks listed for C++, albeit a few being listed twice if they have different variants available. But it gives us an idea of the wealth of frameworks. And that is just C++.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Now when it comes to testing frameworks, we have to mention one particular framework, and that is xUnit. And, having dropped the x word, I can't think of a better excuse to talk about one of my favourite programmers in history (yes, I have a list of favourite programmers, ranked by importance ... )</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-kent-beck-the-man">Kent Beck - the man! (behind xUnit)</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p><a href="https://en.wikipedia.org/wiki/Kent_Beck" target="_blank" rel="noopener" title="">Kent Beck</a> is a person you probably have not come across, yet, his work has probably had some of the most influence on how we develop software nowadays. It is a good name to remember for a pub quiz on software development (if such an event exists!). For no particular reason, here is a picture of the man</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":2809,"sizeSlug":"full","linkDestination":"none","align":"center"} -->
<figure class="wp-block-image aligncenter size-full"><img src="https://cfd.university/wp-content/uploads/2024/02/Kent_Beck.jpg" alt="" class="wp-image-2809"/></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>This picture was not taken in the 1970s, but in the 2000s, and judging by the background, this seems to have been an appropriate choice of clothing for a graduation ceremony. Anyhow, I digress.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Kent Beck gave us <a href="http://www.extremeprogramming.org/" target="_blank" rel="noopener" title="">extreme programming</a>, a software development approach which we have touched upon briefly at various points, but one part of this software development approach resulted in the test-driven development approach, which is a pretty standard way of developing software these days, the approach we looked at in the previous article, and the approach which is synonymous with a agile software development.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Speaking of agile software development, yes, that Beck as well. Together with 16 others, he developed the principles of agile software development that pretty much any software engineering company employs nowadays.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>He gave us software <a href="https://refactoring.guru/design-patterns" target="_blank" rel="noopener" title="">design patterns</a>, something which we have not looked at in detail, yet, but something we ought to have a look at in a future series, due to their importance. You may remember that we looked at the factory design pattern in my article on <a href="https://cfd.university/learn/what-every-cfd-developer-needs-to-know-about-c/reduce-memory-bugs-with-smart-pointers-in-c" target="_blank" rel="noopener" title="">smart pointers in C++</a>, have a look if you need a refresher, but that is Beck in action again.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>And, finally, he gave us <a href="https://en.wikipedia.org/wiki/SUnit" target="_blank" rel="noopener" title="">SUnit</a>, a software testing framework for the, back then, popular programming language Smalltalk. While SUnit and Smalltalk are pretty much a thing of the past, you will find a few dinosaurs, if I may use this word with no negative connotation implied, reminiscing about Smalltalk's glory, and probably for good reasons. Programming wasn't always a pleasure, just look at scripting languages such as <a href="https://andreyor.st/posts/2020-12-03-we-need-to-talk-about-parentheses/" target="_blank" rel="noopener" title="">lisp</a>, which is what people used before Python came along (all of a sudden it feels good to be a millennial, doesn't it?). Smalltalk, in comparison, must have looked like the future!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Even though SUnit is gone now, it introduced a few common structures and rules that many other popular frameworks build on. Chances are, if you know how to use one framework, you can easily change to another one. You may have to learn a few different keywords, but that's it, writing tests and executing them will feel pretty much the same in all of these frameworks that derive from SUnit.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The naming convention is such, that we remove the first letter and replace it with the first letter of the programming language. For example, Beck also wrote JUnit, a popular port of SUnit for Java. Thus, the naming convention <a href="https://en.wikipedia.org/wiki/XUnit" target="_blank" rel="noopener" title="">xUnit</a> was born and all unit testing frameworks that are based on SUnit are said to be xUnit frameworks. </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>And, if you are still wondering who else is on my list of favourite programmers, <a href="https://en.wikipedia.org/wiki/Bjarne_Stroustrup" target="_blank" rel="noopener" title="">Bjarne Stroustrup</a>, the inventor of C++ (that's an easy pick) and <a href="https://en.wikipedia.org/wiki/Herb_Sutter" target="_blank" rel="noopener" title="">Herb Sutter</a>, but for all the wrong reasons.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Sutter is essential Microsoft's poster child for C++. He sits on the C++ steering committee and has a large influence over the direction in which C++ is heading, probably not at all influenced by Microsoft whatsoever. Probably ... We already saw how Microsoft has <a href="https://cfd.university/learn/how-to-compiler-write-and-use-cfd-libraries-in-c/how-to-write-a-cfd-library-compiling-and-testing" target="_blank" rel="noopener" title="">slaughtered C++ when it comes to implementing dynamic libraries</a>, and we don't need more of that. Every time I am losing my patience with Microsoft's <code>cl</code> compiler, and their take on how C++ ought to be implemented, Sutter's voodoo doll is getting it. I don't <em>really</em> have a voodoo doll of Sutter. Probably ...  </p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-84-frameworks-to-choose-from">84 testing frameworks to choose from</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>So, which framework for testing our code should we pick? Well, looking at the <a href="https://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#C++" target="_blank" rel="noopener" title="">comparison</a> I mentioned earlier, I have two requirements that I look for. The first one is that it is freely available. If there are 84 frameworks to pick from, most of which are free, why would I pick one where I have to pay for it? The second is that it should have a good number of features implemented. That means, in the comparison linked above, we want to see a lot of green tiles indicating that all of these features are available.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Based on that list, no framework has everything implemented, so it becomes a case of finding a framework that has all the features you may require. Popular frameworks that people tend to work with the most, at least from what I can see from my reading, are <a href="https://www.boost.org/doc/libs/1_45_0/libs/test/doc/html/index.html" target="_blank" rel="noopener" title="">Boost test library</a>, <a href="https://cppunit.sourceforge.net/doc/1.8.0/" target="_blank" rel="noopener" title="">CppUnit</a> (may I extend my congratulations for their beautiful website design), <a href="https://github.com/catchorg/Catch2" target="_blank" rel="noopener" title="">Catch2</a> (may I extend my congratulations for to bothering to have a website at all), and <a href="https://google.github.io/googletest/" target="_blank" rel="noopener" title="">google test</a> (at least they bothered providing a useful manual).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Boost, and that is my personal opinion, feel free to disagree, is such a complex set of libraries that I try to stay away from it as much as possible. Bringing in boost into your project guarantees to slow down compilation due to its rich set of dependencies. I know that you can be selective in what you want to use and compile, but I like a small, to the point, implementation of a problem, and boost is the exact opposite.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>I haven't used CppUnit, but people seem to be happy with it, and the same goes for Catch2. it is probably the framework I most liked at second glance, yet I have not gotten around to using it, and that's because I never saw a reason to switch from Google test, or googletest, or gtest (no one really knows what it is called, and I bet neither do the developers). Let me explain why in the next section.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-using-google-test">Google test (gtest): Should we use it?</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>gtest, as I will refer to it now, covers pretty much all use cases we may have to test CFD codes. I have not come to a point where I was limited by the framework, which is, in fact, so simple to learn that you probably will be proficient with most of its use cases and applications after you have finished reading this article.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-reasons-against-google">Reasons against Google's gtest</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>But let's address the elephant in the room, it is developed by Google, is it a good or bad thing? I should say, that I have stopped using Google, as I find their data collection rather invasive. Not that I have anything to hide, but I also don't have anything to give away for the sake of building more customised avatars for marketing purposes. I just find the whole process a bit creepy, and have not had any issues with <a href="https://search.brave.com/" target="_blank" rel="noopener" title="">brave search</a>, which is pretty much up there with Google. It's not 100% perfect, but it does get the job done most of the time.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>So, with this out of the way, for me, it boils down to data collection. If Google is developing software without collecting data in the background, then I'm OK to use it. Just because it bears the name doesn't mean it is automatically evil. We saw with Microsoft, for example, that they are collecting data wherever they can. Their C++ package manager vckpg collects data regardless, even if you explicitly revoke consent, but I have not found the same to be the case with gtest. So, in that respect, I am OK with using their software.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>As I mentioned before, you may have other opinions and that is alright. I would still encourage you to finish reading this article, and then have a look at Catch2, which is probably the best alternative from what I can see. This one is driven by independent software developers so you may feel better at home there. It doesn't do mocking, but for CFD applications, mocking is pretty much optional anyway.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-reasons-for">Reasons for Google's gtest</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>With that out of the way, why is gtest my preferred choice? Well, first of all, it does cover pretty much all use cases we ever will come across, as I have mentioned before. It is pretty intuitive, well documented, and has a lot of different assertions we can use to check if values and conditions are met for the test to pass.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>I first had to use gtest when working on a larger project in a team, so it was pretty much bestowed onto me. Even if I had no idea of software testing back then, I found that it was pretty quick to pick up. I mentioned above that it is well documented, the best place to start is their <a href="https://google.github.io/googletest/primer.html" target="_blank" rel="noopener" title="">gtest primer</a>. You can probably read through it in about 10-15 minutes and it is an excellent start to get familiar with the framework.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you went through that, then you have <a href="https://google.github.io/googletest/advanced.html" target="_blank" rel="noopener" title="">a more in-depth advanced version</a>, which will cover pretty much everything there is to know, and it will take some more time to step through that document. But afterwards, you will be a gtest wizard. Since I started using it, they have added a section for <a href="https://google.github.io/googletest/gmock_for_dummies.html" target="_blank" rel="noopener" title="">mocking</a>, typical mocking use cases in the form of a <a href="https://google.github.io/googletest/gmock_cook_book.html" target="_blank" rel="noopener" title="">cookbook</a>, and a <a href="https://google.github.io/googletest/gmock_cheat_sheet.html" target="_blank" rel="noopener" title="">cheat sheet</a> to quickly lookup use cases for mocking. Well-documented software is always easier to pick up.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Speaking of it, gtest comes with its own mocking framework, which we may not necessarily need, but depending on your use case, mocking may be important later for specific use cases. In that case, it is great to know that you don't have to switch testing frameworks and instead just have to do some more reading up on your current framework.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>It does follow the xUnit testing framework and so if you have used testing in a different language, chances are you just have to learn new syntax but not an entirely new testing philosophy. It also integrates rather well with existing code and has a low dependency overhead, meaning the libraries are rather small, yet quite powerful.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>In the end, as is so often the case, it comes down to taste. There are too many testing frameworks out there so it doesn't really matter which one we pick. Choose one and stick with it, I'll over you an insight into gtest in this series, but as I said above, have a look around, you may have very different or constraint requirements, in which case a different testing framework may be the right choice for you.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-compiling-and-installing-google-test">Compiling and installing gtest</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Compiling and testing the library is rather straightforward. It can be compiled using CMake and Bazel, the latter being a build system developed by Google as well. We have looked into details of how to compile libraries with different generators, so I won't get into details here. If you missed that part, have a look at my article on <a href="https://cfd.university/learn/how-to-compiler-write-and-use-cfd-libraries-in-c/how-to-integrate-external-cfd-libraries-in-your-code" target="_blank" rel="noopener" title="">how to integrate external libraries into your project</a>. At the end of the article, there is a walkthrough of how to compile the CGNS library and if you understand that, gtest is a piece of cake in comparison.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We will be using CMake to compile the library, so once you have downloaded gtest from their <a href="https://github.com/google/googletest/releases" target="_blank" rel="noopener" title="">GitHub repository</a>, go to your download location and extract the archive. I am working with version <code>1.14.0</code> here, but you may be using a later release by the time you read that. As of version <code>1.14.0</code>, no external dependencies are required to make gtest work, but it has been announced that the developers will be relying on <a href="https://abseil.io/" target="_blank" rel="noopener" title="">Abseil</a> in the future, you if you use a later release, you may have to <a href="https://github.com/abseil/abseil-cpp/releases" target="_blank" rel="noopener" title="">download and compile Abseil</a> and then link the library against gtest during compilation.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you look at the above-linked article on how to compile the CGNS library, which itself depends on the HDF5 library, which, in turn, has its own dependencies, you will see how you can compile libraries that depend on other, previously compiled libraries. So, should you read this in the future and be required to compile Abseil first, then you have a starting point on how to do that. If you can't be bothered, just download the release <code>1.14.0</code> from gtest and you won't have this issue.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you are looking for an even lazier approach, I have also provided two installation scripts that will download and compile gtest, which you can download at the beginning of this article. If you want to compile it yourself, read on.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>After downloading and extracting the archive, open your Developer PowerShell for VS <code>year</code>, where <code>year</code> is one of Microsoft's releases for Visual Studio, e.g. 2016, 2019, 2022, 2025, etc. Remember that you have to <a href="https://pratikpc.medium.com/using-visual-studio-developer-prompt-with-powershell-pwsh-c61a42f7eb27" target="_blank" rel="noopener" title="">tell the developer PowerShell that it should pick the 64-bit compiler</a>, and not the 32-bit compiler, otherwise, you may have issues compiling libraries later together with your code if they mismatch. If you are on a UNIX-based operating system, then simply open your terminal and pat yourself on the shoulder for using a sensible operating system. </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Create a folder called <code>build</code> within the extracted archive of gtest and change into that directory. If you are on Windows, type</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=C:\libraries\ ..</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you are on UNIX instead, type the following:</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=~/libraries ..</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>In both cases, I assume that you want to install the library into a sensible default location, here either <code>C:\libraries\</code> on Windows or <code>~/libraries/</code> on UNIX, where <code>~</code> indicates the home directory, i.e. <code>/home/&lt;your-user-name&gt;/</code>. Of course, you can change this directory to anything you like, these are just the default locations I like to use.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>After the library has been configured and you don't see any error messages, continue with the next step, which is first building the library by compiling all source files and linking them into the final, static library, as well as installing the library. Installing here simply means copying the generated libraries and required header files into the install directory we specified above with the <code>CMAKE_INSTALL_PREFIX</code> variable. The command for this is:</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>cmake --build . --target install --config Release -j 4</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This command is used by both Windows ad UNIX-based operating systems. After you have completed this step, you can ensure that you have <code>lib/gtest.lib</code> (Windows) or <code>lib/libgtest.a</code> available within you install directory. There will be a few more, but for the moment that is the library we are interested in (for example, you should also see <code>lib/gmock.lib</code> (Windows) or <code>lib/libgmock.a</code> (UNIX) which will be used for mocking).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Within the <code>include/</code> directory, you should ensure that you have a folder called <code>gtest</code> and <code>gmock</code>, in particular, within the <code>gtest</code> folder, we should see a header file called <code>gtest.h</code>. If you can see these files, then your compilation and installation of the library has worked correctly and you are ready to move on to the next step.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-using">Using Google test for our complex number class</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>In this section, we will simply transform the tests we wrote for the complex number class <a href="https://cfd.university/learn/the-complete-guide-to-software-testing-for-cfd-applications/the-test-driven-development-for-writing-bug-free-cfd-code" target="_blank" rel="noopener" title="">in the previous article</a>, and use gtest instead. We will see that changing from the tests we already provided to gtest is rather straightforward. Very little change is required for the syntax. Since we can assert a few more things with gtest, we will also look into additional edge cases we did not test for with our own testing framework. These include division by zero and exception handling.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Thus, we have to modify our complex number class slightly, and then write additional tests. With that in place, we should have a robust implementation for complex numbers, that is very lightweight, yet it does pretty much everything we need if we wanted to use this implementation, for example, in our CFD solver for signal analysis using a fast Fourier transformation (FFT). </p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-porject-structure">Project structure</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The project structure for the archive that you can download at the top of this article is given below. Comparing that to our previous project with our own testing framework, we have lost the <code>floatingPointEqual.hpp</code> file within the <code>tests</code> folder, which we use to compare floating-point numbers. So the structure is a bit simplified in this project. We will have to modify the build scripts in this case to account for the fact that we now depend on an external dependency.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"root\n├── src\n│   └── complexNumber.hpp\n├── tests\n│   └── unit\n│       └── testComplexNumbers.cpp\n├── runTests.ps1\n└── runTests.sh","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003eroot\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── src\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── complexNumber.hpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── tests\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│   └── unit\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e│       └── testComplexNumbers.cpp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e├── runTests.ps1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e└── runTests.sh\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"powershell","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":8,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="root
├── src
│   └── complexNumber.hpp
├── tests
│   └── unit
│       └── testComplexNumbers.cpp
├── runTests.ps1
└── runTests.sh" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">root</span></span>
<span class="line"><span style="color: #D4D4D4">├── src</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── complexNumber.hpp</span></span>
<span class="line"><span style="color: #D4D4D4">├── tests</span></span>
<span class="line"><span style="color: #D4D4D4">│   └── unit</span></span>
<span class="line"><span style="color: #D4D4D4">│       └── testComplexNumbers.cpp</span></span>
<span class="line"><span style="color: #D4D4D4">├── runTests.ps1</span></span>
<span class="line"><span style="color: #D4D4D4">└── runTests.sh</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-build-scripts">Build scripts</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Right, build script time. Brace yourself, it is one of those times where we have to be patient with Microsoft. It wants to play with the big boys and we can't expect miracles. Anyways, we can get our code to work across platforms if we do some unnecessary coding, but at least we will create cross-platform code. That's just how it is, if you want to target different platforms, you have to be ready to compromise. I'll make sure to point out where we are compromising, so you can test this for yourself if you want to.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-windows">Windows</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>For Windows, we follow the same pattern we used in previous build scripts as well. We can see that we first want to remove the <code>build</code> directory on line 2 and then recreate it so that we get rid of any old files we have built. In general, this is a bad idea, but for smaller projects, the overhead to recompile all files is small and so we won't notice this overhead.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The reason I do that is simple, I build the code using both Windows and Ubuntu on the same platform, so I want to make sure all files are gone before I switch platforms, otherwise I may get nasty linker messages if I am trying to include files compiled from a different platform in my current executable. It just preserves my sanity, slightly.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We compile the file containing our tests (now using gtest) on line 6, which means we need to include the folder in which to find our gtest header files. In my case, this is in <code>C:\libraries\include\</code>. On line 9, we create an executable called <code>testComplexNumbers.exe</code>, and we need to link our object file against <code>gtest.lib</code> here, for which we also specify the file location, i.e. <code>C:\libraries\lib\</code>. Finally, we also execute the tests after the compilation is finished, which can be seen on line 12. </p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"# clean up before building\nRemove-Item .\\build -Force -Recurse\nNew-Item -Name \u0022build\u0022 -ItemType \u0022directory\u0022\n\n# compile source files into object files\ncl.exe /nologo /EHsc /std:c++20 /Zi /I. /I\u0022C:\\libraries\\include\\\u0022 /c .\\tests\\unit\\testComplexNumbers.cpp /Fo\u0022.\\build\\testComplexNumbers.obj\u0022\n\n# create test executable\ncl.exe /nologo /EHsc /std:c++20 /Zi .\\build\\testComplexNumbers.obj /Fe\u0022.\\build\\testComplexNumbers.exe\u0022 /link /MACHINE:x64 /LIBPATH:\u0022C:\\libraries\\lib\u0022 gtest.lib  \n\n# run tests\n.\\build\\testComplexNumbers.exe","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# clean up before building\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eRemove-Item\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e .\\build -Force -Recurse\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eNew-Item\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e -Name \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;build\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e -ItemType \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;directory\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# compile source files into object files\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecl.exe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e /nologo /EHsc /std:c+\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e+20\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e /Zi /I. /I\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;C:\\libraries\\include\\\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e /c .\\tests\\unit\\testComplexNumbers.cpp /Fo\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;.\\build\\testComplexNumbers.obj\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# create test executable\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ecl.exe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e /nologo /EHsc /std:c+\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e+20\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e /Zi .\\build\\testComplexNumbers.obj /Fe\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;.\\build\\testComplexNumbers.exe\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e /link /MACHINE:x64 /LIBPATH:\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;C:\\libraries\\lib\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e gtest.lib  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# run tests\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\\build\\\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003etestComplexNumbers.exe\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"powershell","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":12,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="# clean up before building
Remove-Item .\build -Force -Recurse
New-Item -Name &quot;build&quot; -ItemType &quot;directory&quot;

# compile source files into object files
cl.exe /nologo /EHsc /std:c++20 /Zi /I. /I&quot;C:\libraries\include\&quot; /c .\tests\unit\testComplexNumbers.cpp /Fo&quot;.\build\testComplexNumbers.obj&quot;

# create test executable
cl.exe /nologo /EHsc /std:c++20 /Zi .\build\testComplexNumbers.obj /Fe&quot;.\build\testComplexNumbers.exe&quot; /link /MACHINE:x64 /LIBPATH:&quot;C:\libraries\lib&quot; gtest.lib  

# run tests
.\build\testComplexNumbers.exe" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #6A9955"># clean up before building</span></span>
<span class="line"><span style="color: #DCDCAA">Remove-Item</span><span style="color: #D4D4D4"> .\build -Force -Recurse</span></span>
<span class="line"><span style="color: #DCDCAA">New-Item</span><span style="color: #D4D4D4"> -Name </span><span style="color: #CE9178">&quot;build&quot;</span><span style="color: #D4D4D4"> -ItemType </span><span style="color: #CE9178">&quot;directory&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># compile source files into object files</span></span>
<span class="line"><span style="color: #DCDCAA">cl.exe</span><span style="color: #D4D4D4"> /nologo /EHsc /std:c+</span><span style="color: #B5CEA8">+20</span><span style="color: #D4D4D4"> /Zi /I. /I</span><span style="color: #CE9178">&quot;C:\libraries\include\&quot;</span><span style="color: #D4D4D4"> /c .\tests\unit\testComplexNumbers.cpp /Fo</span><span style="color: #CE9178">&quot;.\build\testComplexNumbers.obj&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># create test executable</span></span>
<span class="line"><span style="color: #DCDCAA">cl.exe</span><span style="color: #D4D4D4"> /nologo /EHsc /std:c+</span><span style="color: #B5CEA8">+20</span><span style="color: #D4D4D4"> /Zi .\build\testComplexNumbers.obj /Fe</span><span style="color: #CE9178">&quot;.\build\testComplexNumbers.exe&quot;</span><span style="color: #D4D4D4"> /link /MACHINE:x64 /LIBPATH:</span><span style="color: #CE9178">&quot;C:\libraries\lib&quot;</span><span style="color: #D4D4D4"> gtest.lib  </span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># run tests</span></span>
<span class="line"><span style="color: #D4D4D4">.\build\</span><span style="color: #DCDCAA">testComplexNumbers.exe</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Now, every C++ code needs a <code>main()</code> function, and gtest provides that for us. If we don't want to provide one ourselves, that we could, in theory, also lin against <code>gtest_main.lib</code>, which will provide us with a <code>main()</code> function. If we don't link against this library, we have to provide the main function ourselves, which we will do later.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The reason we opt to write our own <code>main()</code> function, is the issue I mentioned above. Microsoft's <code>cl</code> compiler and its linker are unable to link against <code>gtest_main.lib</code> correctly, and you will get a linker error saying that no entry point is defined. I have tried compiling gtest in a few ways, but all seem to produce the same error. Providing the <code>main()</code> function ourselves resolves this issue.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>But, try it yourself. You may have a slightly different installation and it may be that my environment just isn't set up properly. But even if it does work, take this as a warning; even if it does work for you, it may not for others, so it is worth considering sticking to the same approach as I am so that you avoid nasty bug-reports from users who are using Windows.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-unix">UNIX</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>We do pretty much the same thing on UNIX using bash. First, we remove and recreate the <code>build</code> folder on lines 4-5, compile the new test function on line 8, this time using gtest, hence we need to include the gtest include folder, which in my case is at <code>~/libraries/include</code>. On line 11, we create the executable and link against gtest, which is located in <code>~/libraries/lib</code>, which we tell the linker through the <code>-L</code> flag. We then link against <code>gtest</code> using the <code>-l</code> flag.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"#!/bin/bash\n\n# clean up before building\nrm -rf build\nmkdir -p build\n\n# compile source files into object files\ng++ -std=c++20 -I. -I ~/libraries/include/ -c -g ./tests/unit/testComplexNumbers.cpp -o ./build/testComplexNumbers.o\n\n# create test executable\ng++ -std=c++20 ./build/testComplexNumbers.o -o ./build/testComplexNumbers -L ~/libraries/lib -lgtest\n\n# run tests\n./build/testComplexNumbers","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e#!/bin/bash\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# clean up before building\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003erm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-rf\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003ebuild\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003emkdir\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-p\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003ebuild\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# compile source files into object files\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eg++\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-std=c++20\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-I.\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-I\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e~/libraries/include/\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-c\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-g\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e./tests/unit/testComplexNumbers.cpp\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-o\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e./build/testComplexNumbers.o\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# create test executable\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eg++\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-std=c++20\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e./build/testComplexNumbers.o\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-o\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e./build/testComplexNumbers\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-L\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e~/libraries/lib\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e-lgtest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e# run tests\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e./build/testComplexNumbers\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"bash","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":14,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="#!/bin/bash

# clean up before building
rm -rf build
mkdir -p build

# compile source files into object files
g++ -std=c++20 -I. -I ~/libraries/include/ -c -g ./tests/unit/testComplexNumbers.cpp -o ./build/testComplexNumbers.o

# create test executable
g++ -std=c++20 ./build/testComplexNumbers.o -o ./build/testComplexNumbers -L ~/libraries/lib -lgtest

# run tests
./build/testComplexNumbers" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #6A9955">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># clean up before building</span></span>
<span class="line"><span style="color: #DCDCAA">rm</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-rf</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">build</span></span>
<span class="line"><span style="color: #DCDCAA">mkdir</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-p</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">build</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># compile source files into object files</span></span>
<span class="line"><span style="color: #DCDCAA">g++</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-std=c++20</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-I.</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-I</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">~/libraries/include/</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-c</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-g</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">./tests/unit/testComplexNumbers.cpp</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-o</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">./build/testComplexNumbers.o</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># create test executable</span></span>
<span class="line"><span style="color: #DCDCAA">g++</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-std=c++20</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">./build/testComplexNumbers.o</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-o</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">./build/testComplexNumbers</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-L</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">~/libraries/lib</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">-lgtest</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955"># run tests</span></span>
<span class="line"><span style="color: #DCDCAA">./build/testComplexNumbers</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>On UNIX, you can now link against <code>gtest_main</code>, i.e., you can add <code>-lgtest_main</code> at the end of line 11, and then you will get a <code>main()</code> file provided. In this case, you will need to delete the <code>main()</code> function from your test file, which we will look at below. Again, try it yourself, play around and see the results.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-rewriting-the-unit-tests">Rewriting the unit tests</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Below are the new tests using gtest. These are located in the <code>tests/unit/testComplexNumbers.cpp</code> file. You'll see that we gtest's header file on line 3 to have access to the library. The remaining tests are almost the same, with a few additions to test for edge cases, i.e. floating point numbers which store <code>NaN</code> (not a number) and checking for division by zero. Some of these cases will throw an exception and so we catch these exceptions when they are thrown. Have a look through the file, and we will discuss it below in more detail.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"#include \u0026lt;limits\u003e\n\n#include \u0022gtest/gtest.h\u0022\n#include \u0022src/complexNumber.hpp\u0022\n\nTEST(ComplexNumberTest, TestComplexMagnitude) {\n  // Arrange\n  ComplexNumber a(3.0, 4.0);\n  \n  // Act\n  auto magnitude = a.magnitude();\n  \n  // Assert\n  ASSERT_DOUBLE_EQ(magnitude, 5.0);\n}\n\nTEST(ComplexNumberTest, TestComplexConjugate) {\n  // Arrange\n  ComplexNumber a(3.0, 4.0);\n  \n  // Act\n  a.conjugate();\n  \n  // Assert\n  ASSERT_DOUBLE_EQ(a.Re(), 3.0);\n  ASSERT_DOUBLE_EQ(a.Im(), -4.0);\n}\n\nTEST(ComplexNumberTest, TestComplexNumberWithNaN) {\n  // Arrange\n  ComplexNumber a(1.2, -0.3);\n  ComplexNumber b(1.8, 5.3);\n  \n  // Act\n  a.setRe(std::numeric_limits\u0026lt;double\u003e::quiet_NaN());\n  \n  // Assert\n  ASSERT_THROW(ComplexNumber a(1.2, std::numeric_limits\u0026lt;double\u003e::quiet_NaN()), std::runtime_error);\n  ASSERT_THROW(a + b, std::runtime_error);\n  ASSERT_THROW(a - b, std::runtime_error);\n  ASSERT_THROW(a * b, std::runtime_error);\n  ASSERT_THROW(a / b, std::runtime_error);\n}\n\nTEST(ComplexNumberTest, TestComplexAddition) {\n  // Arrange\n  ComplexNumber a(1.2, -0.3);\n  ComplexNumber b(1.8, 5.3);\n  \n  // Act\n  ComplexNumber c = a + b;\n  \n  // Assert\n  ASSERT_DOUBLE_EQ(c.Re(), 3.0);\n  ASSERT_DOUBLE_EQ(c.Im(), 5.0);\n}\n\nTEST(ComplexNumberTest, TestComplexSubtraction) {\n  // Arrange\n  ComplexNumber a(1.2, -0.3);\n  ComplexNumber b(1.8, 5.3);\n  \n  // Act\n  ComplexNumber c = a - b;\n  \n  // Assert\n  ASSERT_DOUBLE_EQ(c.Re(), -0.6);\n  ASSERT_DOUBLE_EQ(c.Im(), -5.6);\n}\n\nTEST(ComplexNumberTest, TestComplexMultiplication) {\n  // Arrange\n  ComplexNumber a(1.2, -0.3);\n  ComplexNumber b(1.8, 5.3);\n  \n  // Act\n  ComplexNumber c = a * b;\n  \n  // Assert\n  ASSERT_DOUBLE_EQ(c.Re(), 3.75);\n  ASSERT_DOUBLE_EQ(c.Im(), 5.82);\n}\n\nTEST(ComplexNumberTest, TestComplexDivision) {\n  // Arrange\n  ComplexNumber a(1.0, -2.0);\n  ComplexNumber b(1.0, 2.0);\n  \n  // Act\n  ComplexNumber c = a / b;\n  \n  // Assert\n  ASSERT_DOUBLE_EQ(c.Re(), -0.6);\n  ASSERT_DOUBLE_EQ(c.Im(), -0.8);\n}\n\nTEST(ComplexNumberTest, TestComplexDivisionWithNaN) {\n  // Arrange\n  ComplexNumber a(1.0, -2.0);\n  ComplexNumber b(0.0, 0.0);\n  \n  // Act\n  \n  // Assert\n  ASSERT_THROW(a / b, std::runtime_error);\n}\n\nint main(int argc, char** argv)\n{\n    testing::InitGoogleTest(\u0026amp;argc, argv);\n    RUN_ALL_TESTS();\n}","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;limits\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;gtest/gtest.h\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;src/complexNumber.hpp\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eTEST\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ComplexNumberTest, TestComplexMagnitude) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Arrange\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e3.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e4.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Act\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eauto\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e magnitude = \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003emagnitude\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Assert\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(magnitude, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eTEST\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ComplexNumberTest, TestComplexConjugate) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Arrange\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e3.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e4.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Act\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003econjugate\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Assert\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e3.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eIm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e4.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eTEST\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ComplexNumberTest, TestComplexNumberWithNaN) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Arrange\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eb\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.8\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Act\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003esetRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003enumeric_limits\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026gt;::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003equiet_NaN\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e());\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Assert\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_THROW\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003enumeric_limits\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026gt;::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003equiet_NaN\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()), \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::runtime_error);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_THROW\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(a + b, \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::runtime_error);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_THROW\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(a - b, \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::runtime_error);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_THROW\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(a * b, \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::runtime_error);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_THROW\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(a / b, \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::runtime_error);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eTEST\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ComplexNumberTest, TestComplexAddition) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Arrange\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eb\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.8\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Act\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber c = a + b;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Assert\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e3.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eIm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eTEST\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ComplexNumberTest, TestComplexSubtraction) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Arrange\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eb\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.8\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Act\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber c = a - b;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Assert\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.6\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eIm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.6\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eTEST\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ComplexNumberTest, TestComplexMultiplication) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Arrange\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eb\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.8\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Act\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber c = a * b;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Assert\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e3.75\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eIm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.82\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eTEST\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ComplexNumberTest, TestComplexDivision) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Arrange\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e2.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eb\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e2.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Act\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber c = a / b;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Assert\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.6\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eIm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.8\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eTEST\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ComplexNumberTest, TestComplexDivisionWithNaN) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Arrange\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e2.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eb\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Act\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Assert\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_THROW\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(a / b, \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::runtime_error);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eint\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003emain\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eint\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eargc\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003echar**\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eargv\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003etesting\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eInitGoogleTest\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u0026amp;argc, argv);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eRUN_ALL_TESTS\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":112,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(3 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="#include &lt;limits&gt;

#include &quot;gtest/gtest.h&quot;
#include &quot;src/complexNumber.hpp&quot;

TEST(ComplexNumberTest, TestComplexMagnitude) {
  // Arrange
  ComplexNumber a(3.0, 4.0);
  
  // Act
  auto magnitude = a.magnitude();
  
  // Assert
  ASSERT_DOUBLE_EQ(magnitude, 5.0);
}

TEST(ComplexNumberTest, TestComplexConjugate) {
  // Arrange
  ComplexNumber a(3.0, 4.0);
  
  // Act
  a.conjugate();
  
  // Assert
  ASSERT_DOUBLE_EQ(a.Re(), 3.0);
  ASSERT_DOUBLE_EQ(a.Im(), -4.0);
}

TEST(ComplexNumberTest, TestComplexNumberWithNaN) {
  // Arrange
  ComplexNumber a(1.2, -0.3);
  ComplexNumber b(1.8, 5.3);
  
  // Act
  a.setRe(std::numeric_limits&lt;double&gt;::quiet_NaN());
  
  // Assert
  ASSERT_THROW(ComplexNumber a(1.2, std::numeric_limits&lt;double&gt;::quiet_NaN()), std::runtime_error);
  ASSERT_THROW(a + b, std::runtime_error);
  ASSERT_THROW(a - b, std::runtime_error);
  ASSERT_THROW(a * b, std::runtime_error);
  ASSERT_THROW(a / b, std::runtime_error);
}

TEST(ComplexNumberTest, TestComplexAddition) {
  // Arrange
  ComplexNumber a(1.2, -0.3);
  ComplexNumber b(1.8, 5.3);
  
  // Act
  ComplexNumber c = a + b;
  
  // Assert
  ASSERT_DOUBLE_EQ(c.Re(), 3.0);
  ASSERT_DOUBLE_EQ(c.Im(), 5.0);
}

TEST(ComplexNumberTest, TestComplexSubtraction) {
  // Arrange
  ComplexNumber a(1.2, -0.3);
  ComplexNumber b(1.8, 5.3);
  
  // Act
  ComplexNumber c = a - b;
  
  // Assert
  ASSERT_DOUBLE_EQ(c.Re(), -0.6);
  ASSERT_DOUBLE_EQ(c.Im(), -5.6);
}

TEST(ComplexNumberTest, TestComplexMultiplication) {
  // Arrange
  ComplexNumber a(1.2, -0.3);
  ComplexNumber b(1.8, 5.3);
  
  // Act
  ComplexNumber c = a * b;
  
  // Assert
  ASSERT_DOUBLE_EQ(c.Re(), 3.75);
  ASSERT_DOUBLE_EQ(c.Im(), 5.82);
}

TEST(ComplexNumberTest, TestComplexDivision) {
  // Arrange
  ComplexNumber a(1.0, -2.0);
  ComplexNumber b(1.0, 2.0);
  
  // Act
  ComplexNumber c = a / b;
  
  // Assert
  ASSERT_DOUBLE_EQ(c.Re(), -0.6);
  ASSERT_DOUBLE_EQ(c.Im(), -0.8);
}

TEST(ComplexNumberTest, TestComplexDivisionWithNaN) {
  // Arrange
  ComplexNumber a(1.0, -2.0);
  ComplexNumber b(0.0, 0.0);
  
  // Act
  
  // Assert
  ASSERT_THROW(a / b, std::runtime_error);
}

int main(int argc, char** argv)
{
    testing::InitGoogleTest(&amp;argc, argv);
    RUN_ALL_TESTS();
}" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;limits&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&quot;gtest/gtest.h&quot;</span></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&quot;src/complexNumber.hpp&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #DCDCAA">TEST</span><span style="color: #D4D4D4">(ComplexNumberTest, TestComplexMagnitude) {</span></span>
<span class="line"><span style="color: #6A9955">  // Arrange</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">3.0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">4.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Act</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">auto</span><span style="color: #D4D4D4"> magnitude = </span><span style="color: #9CDCFE">a</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">magnitude</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Assert</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(magnitude, </span><span style="color: #B5CEA8">5.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #DCDCAA">TEST</span><span style="color: #D4D4D4">(ComplexNumberTest, TestComplexConjugate) {</span></span>
<span class="line"><span style="color: #6A9955">  // Arrange</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">3.0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">4.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Act</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">a</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">conjugate</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Assert</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">a</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Re</span><span style="color: #D4D4D4">(), </span><span style="color: #B5CEA8">3.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">a</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Im</span><span style="color: #D4D4D4">(), -</span><span style="color: #B5CEA8">4.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #DCDCAA">TEST</span><span style="color: #D4D4D4">(ComplexNumberTest, TestComplexNumberWithNaN) {</span></span>
<span class="line"><span style="color: #6A9955">  // Arrange</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.2</span><span style="color: #D4D4D4">, -</span><span style="color: #B5CEA8">0.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">b</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.8</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">5.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Act</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">a</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">setRe</span><span style="color: #D4D4D4">(</span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #4EC9B0">numeric_limits</span><span style="color: #D4D4D4">&lt;</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4">&gt;::</span><span style="color: #DCDCAA">quiet_NaN</span><span style="color: #D4D4D4">());</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Assert</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_THROW</span><span style="color: #D4D4D4">(ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.2</span><span style="color: #D4D4D4">, </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #4EC9B0">numeric_limits</span><span style="color: #D4D4D4">&lt;</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4">&gt;::</span><span style="color: #DCDCAA">quiet_NaN</span><span style="color: #D4D4D4">()), </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::runtime_error);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_THROW</span><span style="color: #D4D4D4">(a + b, </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::runtime_error);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_THROW</span><span style="color: #D4D4D4">(a - b, </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::runtime_error);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_THROW</span><span style="color: #D4D4D4">(a * b, </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::runtime_error);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_THROW</span><span style="color: #D4D4D4">(a / b, </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::runtime_error);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #DCDCAA">TEST</span><span style="color: #D4D4D4">(ComplexNumberTest, TestComplexAddition) {</span></span>
<span class="line"><span style="color: #6A9955">  // Arrange</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.2</span><span style="color: #D4D4D4">, -</span><span style="color: #B5CEA8">0.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">b</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.8</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">5.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Act</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber c = a + b;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Assert</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Re</span><span style="color: #D4D4D4">(), </span><span style="color: #B5CEA8">3.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Im</span><span style="color: #D4D4D4">(), </span><span style="color: #B5CEA8">5.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #DCDCAA">TEST</span><span style="color: #D4D4D4">(ComplexNumberTest, TestComplexSubtraction) {</span></span>
<span class="line"><span style="color: #6A9955">  // Arrange</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.2</span><span style="color: #D4D4D4">, -</span><span style="color: #B5CEA8">0.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">b</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.8</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">5.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Act</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber c = a - b;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Assert</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Re</span><span style="color: #D4D4D4">(), -</span><span style="color: #B5CEA8">0.6</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Im</span><span style="color: #D4D4D4">(), -</span><span style="color: #B5CEA8">5.6</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #DCDCAA">TEST</span><span style="color: #D4D4D4">(ComplexNumberTest, TestComplexMultiplication) {</span></span>
<span class="line"><span style="color: #6A9955">  // Arrange</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.2</span><span style="color: #D4D4D4">, -</span><span style="color: #B5CEA8">0.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">b</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.8</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">5.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Act</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber c = a * b;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Assert</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Re</span><span style="color: #D4D4D4">(), </span><span style="color: #B5CEA8">3.75</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Im</span><span style="color: #D4D4D4">(), </span><span style="color: #B5CEA8">5.82</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #DCDCAA">TEST</span><span style="color: #D4D4D4">(ComplexNumberTest, TestComplexDivision) {</span></span>
<span class="line"><span style="color: #6A9955">  // Arrange</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.0</span><span style="color: #D4D4D4">, -</span><span style="color: #B5CEA8">2.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">b</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">2.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Act</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber c = a / b;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Assert</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Re</span><span style="color: #D4D4D4">(), -</span><span style="color: #B5CEA8">0.6</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Im</span><span style="color: #D4D4D4">(), -</span><span style="color: #B5CEA8">0.8</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #DCDCAA">TEST</span><span style="color: #D4D4D4">(ComplexNumberTest, TestComplexDivisionWithNaN) {</span></span>
<span class="line"><span style="color: #6A9955">  // Arrange</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.0</span><span style="color: #D4D4D4">, -</span><span style="color: #B5CEA8">2.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">b</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">0.0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">0.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Act</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Assert</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_THROW</span><span style="color: #D4D4D4">(a / b, </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::runtime_error);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">int</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">main</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">int</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">argc</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">char**</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">argv</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">{</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #4EC9B0">testing</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">InitGoogleTest</span><span style="color: #D4D4D4">(&amp;argc, argv);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">RUN_ALL_TESTS</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>First of all, let's start at the bottom, on lines 108-112 we see the <code>main()</code> function that we have been talking about above. If we remove this function, then we have to link against <code>gtest_main</code>. As I said, this will work on UNIX, but not on Windows, at least for me. But for completeness, you now know which function I was referring to. And, just to finish this thought, if we had more than one test file, we would only have to define the <code>main()</code> function once, so you may want to stick it into its own source file.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>To kick off the discussion on the tests using gtest, I thought it would be useful to compare two tests, i.e. how we wrote tests with the previous test framework we developed ourselves (framework is probably a strong word here, we added some code to compare floating point numbers, that's it) and how we do that now using gtest. We looked at the complex addition case previously, so let's contrast them here and discuss their similarities.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-comparing-our-custom-made-test-with-gtest-for-the-complex-addition-test">Comparing our custom-made test with gtest for complex addition</h4>
<!-- /wp:heading -->

<!-- wp:columns -->
<div class="wp-block-columns"><!-- wp:column -->
<div class="wp-block-column"><!-- wp:kevinbatdorf/code-block-pro {"code":"void testComplexAddition() {\n  // Arrange\n  ComplexNumber a(1.2, -0.3);\n  ComplexNumber b(1.8, 5.3);\n  \n  // Act\n  ComplexNumber c = a + b;\n  \n  // Assert\n  assert(floatingPointEqual(c.Re(), 3.0));\n  assert(floatingPointEqual(c.Im(), 5.0));\n}","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003evoid\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003etestComplexAddition\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Arrange\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eb\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.8\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Act\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber c = a + b;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Assert\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eassert\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003efloatingPointEqual\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e3.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e));\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eassert\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003efloatingPointEqual\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eIm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e));\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":12,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="void testComplexAddition() {
  // Arrange
  ComplexNumber a(1.2, -0.3);
  ComplexNumber b(1.8, 5.3);
  
  // Act
  ComplexNumber c = a + b;
  
  // Assert
  assert(floatingPointEqual(c.Re(), 3.0));
  assert(floatingPointEqual(c.Im(), 5.0));
}" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">void</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">testComplexAddition</span><span style="color: #D4D4D4">() {</span></span>
<span class="line"><span style="color: #6A9955">  // Arrange</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.2</span><span style="color: #D4D4D4">, -</span><span style="color: #B5CEA8">0.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">b</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.8</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">5.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Act</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber c = a + b;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Assert</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">assert</span><span style="color: #D4D4D4">(</span><span style="color: #DCDCAA">floatingPointEqual</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Re</span><span style="color: #D4D4D4">(), </span><span style="color: #B5CEA8">3.0</span><span style="color: #D4D4D4">));</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">assert</span><span style="color: #D4D4D4">(</span><span style="color: #DCDCAA">floatingPointEqual</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Im</span><span style="color: #D4D4D4">(), </span><span style="color: #B5CEA8">5.0</span><span style="color: #D4D4D4">));</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro --></div>
<!-- /wp:column -->

<!-- wp:column -->
<div class="wp-block-column"><!-- wp:kevinbatdorf/code-block-pro {"code":"TEST(ComplexNumberTest, TestComplexAddition) {\n  // Arrange\n  ComplexNumber a(1.2, -0.3);\n  ComplexNumber b(1.8, 5.3);\n  \n  // Act\n  ComplexNumber c = a + b;\n  \n  // Assert\n  ASSERT_DOUBLE_EQ(c.Re(), 3.0);\n  ASSERT_DOUBLE_EQ(c.Im(), 5.0);\n}","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eTEST\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ComplexNumberTest, TestComplexAddition) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Arrange\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eb\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.8\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Act\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber c = a + b;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Assert\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e3.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eIm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":12,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="TEST(ComplexNumberTest, TestComplexAddition) {
  // Arrange
  ComplexNumber a(1.2, -0.3);
  ComplexNumber b(1.8, 5.3);
  
  // Act
  ComplexNumber c = a + b;
  
  // Assert
  ASSERT_DOUBLE_EQ(c.Re(), 3.0);
  ASSERT_DOUBLE_EQ(c.Im(), 5.0);
}" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">TEST</span><span style="color: #D4D4D4">(ComplexNumberTest, TestComplexAddition) {</span></span>
<span class="line"><span style="color: #6A9955">  // Arrange</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.2</span><span style="color: #D4D4D4">, -</span><span style="color: #B5CEA8">0.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">b</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.8</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">5.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Act</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber c = a + b;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Assert</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Re</span><span style="color: #D4D4D4">(), </span><span style="color: #B5CEA8">3.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Im</span><span style="color: #D4D4D4">(), </span><span style="color: #B5CEA8">5.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro --></div>
<!-- /wp:column --></div>
<!-- /wp:columns -->

<!-- wp:paragraph -->
<p>On the left, we have the test code we wrote in our previous article using our own testing approach, and on the right, we have the same implementation using gtest. You see, the structure is the same, i.e. we are using in both cases the Arrange, Act, Assert (AAA) structure. The only differences are how we structure the code on the first line and the assertions in the assert section.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Each test in gtest is assigned a group, and then within that group, we can have different test cases. The group we are currently in is the <code>ComplexNumberTest</code>, which contains essentially all unit tests for the complex number class. Then, the test we are looking at is the <code>TestComplexAddition</code>. These are the first and second arguments on line 1, respectively.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Then, on lines 10-11, we make sure that the real and imaginary parts are equal to what we expect them to be, and we are using the <code>ASSERT_DOUBLE_EQ</code> macro, which will do the same job as the <code>floatingPointEqual()</code> function we used in the previous article, shown on the left above.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-some-more-thoughts-on-floating-point-number-comparisons">Some more thoughts on floating-point number comparisons</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>There are additional gtest functions available for <a href="https://google.github.io/googletest/reference/assertions.html" target="_blank" rel="noopener" title="">floating point number comparisons</a>, for example, <code>ASSERT_FLOAT_EQ</code> and <code>ASSERT_NEAR</code>. The former is the same floating point comparison for <code>float</code>s, while the latter allows us to compare values within a certain tolerance. This may be useful when working with rational numbers, e.g.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"ASSERT_NEAR(1.0/7.0, 0.142857, 1e-6);","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_NEAR\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e/\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e7.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.142857\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1e-6\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":1,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(1 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="ASSERT_NEAR(1.0/7.0, 0.142857, 1e-6);" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">ASSERT_NEAR</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.0</span><span style="color: #D4D4D4">/</span><span style="color: #B5CEA8">7.0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">0.142857</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">1e-6</span><span style="color: #D4D4D4">);</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>If you <a href="https://google.github.io/googletest/reference/assertions.html#EXPECT_FLOAT_EQ" target="_blank" rel="noopener" title="">look up the documentation</a> for either <code>ASSERT_DOUBLE_EQ</code> or <code>ASSERT_FLOAT_EQ</code>, you will see that it states that we check if the floating point values are within 4 ULPs. Trying to explain that goes a bit beyond what I want to cover here, but have a look again at the write-up on <a href="https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/" target="_blank" rel="noopener" title="">how to compare floating point numbers</a> by Bruce Dawson. We looked at his write-up in the previous article when we developed our floating point comparison algorithm.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>I mentioned that we won't go as deep into floating-point number comparison as he did, and if you read beyond the comparison we implemented, then you will see that he starts talking about ULPs, which stands for units in the last place. In a nutshell, even floating point numbers are represented as integer values, which means their precision is finite. If we say that our values are allowed to differ by 4 ULPs for floating-point comparison, what we are saying is that the integer representation is allowed to be plus minus 2 units away from the value we are comparing against.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you understand floating-point numbers, then this will make sense, if you don't, then the article linked above is an excellent resource to learn about it. The <a href="https://en.cppreference.com/w/cpp/numeric/math/nextafter" target="_blank" rel="noopener" title="">C++ standard template library</a> (STL) has you covered as well, you can ask it to tell you what the next floating point number is past a given floating point number. In other words, given a floating point number <code>f</code>, what is the next value after <code>f</code>, which is exactly 1 ULP ahead. We use the <code>std::nextafter</code> function for that.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>But, chances are that you simply don't care about going into that much level of detail about floating-point numbers, and that's OK too. In which case, let's continue.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-what-about-testing-exception-handling">What about testing exception handling?</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>I mentioned above that we also want to test for exception handling, i.e. what happens if we have to deal with <code>NaN</code>? Let's say that if we detect that we have not a number given for whatever reason, we want to throw an exception. This means we will have to change our code, but this also means that we need to test for its correct usage. Below is an implementation that checks that any computation with a <code>NaN</code> should catch an exception that was thrown. This is copied from the test code above.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"TEST(ComplexNumberTest, TestComplexNumberWithNaN) {\n  // Arrange\n  ComplexNumber a(1.2, -0.3);\n  ComplexNumber b(1.8, 5.3);\n  \n  // Act\n  a.setRe(std::numeric_limits\u0026lt;double\u003e::quiet_NaN());\n  \n  // Assert\n  ASSERT_THROW(ComplexNumber a(1.2, std::numeric_limits\u0026lt;double\u003e::quiet_NaN()), std::runtime_error);\n  ASSERT_THROW(a + b, std::runtime_error);\n  ASSERT_THROW(a - b, std::runtime_error);\n  ASSERT_THROW(a * b, std::runtime_error);\n  ASSERT_THROW(a / b, std::runtime_error);\n}","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eTEST\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ComplexNumberTest, TestComplexNumberWithNaN) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Arrange\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eb\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.8\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Act\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003esetRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003enumeric_limits\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026gt;::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003equiet_NaN\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e());\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Assert\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_THROW\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003enumeric_limits\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026gt;::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003equiet_NaN\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e()), \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::runtime_error);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_THROW\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(a + b, \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::runtime_error);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_THROW\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(a - b, \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::runtime_error);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_THROW\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(a * b, \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::runtime_error);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_THROW\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(a / b, \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::runtime_error);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":15,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="TEST(ComplexNumberTest, TestComplexNumberWithNaN) {
  // Arrange
  ComplexNumber a(1.2, -0.3);
  ComplexNumber b(1.8, 5.3);
  
  // Act
  a.setRe(std::numeric_limits&lt;double&gt;::quiet_NaN());
  
  // Assert
  ASSERT_THROW(ComplexNumber a(1.2, std::numeric_limits&lt;double&gt;::quiet_NaN()), std::runtime_error);
  ASSERT_THROW(a + b, std::runtime_error);
  ASSERT_THROW(a - b, std::runtime_error);
  ASSERT_THROW(a * b, std::runtime_error);
  ASSERT_THROW(a / b, std::runtime_error);
}" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">TEST</span><span style="color: #D4D4D4">(ComplexNumberTest, TestComplexNumberWithNaN) {</span></span>
<span class="line"><span style="color: #6A9955">  // Arrange</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.2</span><span style="color: #D4D4D4">, -</span><span style="color: #B5CEA8">0.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">b</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.8</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">5.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Act</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">a</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">setRe</span><span style="color: #D4D4D4">(</span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #4EC9B0">numeric_limits</span><span style="color: #D4D4D4">&lt;</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4">&gt;::</span><span style="color: #DCDCAA">quiet_NaN</span><span style="color: #D4D4D4">());</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Assert</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_THROW</span><span style="color: #D4D4D4">(ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.2</span><span style="color: #D4D4D4">, </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #4EC9B0">numeric_limits</span><span style="color: #D4D4D4">&lt;</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4">&gt;::</span><span style="color: #DCDCAA">quiet_NaN</span><span style="color: #D4D4D4">()), </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::runtime_error);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_THROW</span><span style="color: #D4D4D4">(a + b, </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::runtime_error);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_THROW</span><span style="color: #D4D4D4">(a - b, </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::runtime_error);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_THROW</span><span style="color: #D4D4D4">(a * b, </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::runtime_error);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_THROW</span><span style="color: #D4D4D4">(a / b, </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::runtime_error);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>In this case, we set up our complex numbers as we did before on lines 3-4, but within the act section, we are setting now the real part to <code>NaN</code>, which requires the <code>limits</code> header file. Then, with one of the components set to <code>NaN</code>, we check in the assert section that any calculation results in a <code>std::runtime_error</code> exception being thrown. We did not implement that earlier and will need to do so to make it work.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>But remember, we follow the <a href="https://cfd.university/learn/the-complete-guide-to-software-testing-for-cfd-applications/the-test-driven-development-for-writing-bug-free-cfd-code" target="_blank" rel="noopener" title="">test-driven development approach</a>, so we write the tests first, and only then do we start to implement the core functionality.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-catching-division-y-zero-errors">Catching division by zero errors</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>One last thing I want to look at is the division by zero case. This test is also copied from above and reproduced here:</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"TEST(ComplexNumberTest, TestComplexDivisionWithNaN) {\n  // Arrange\n  ComplexNumber a(1.0, -2.0);\n  ComplexNumber b(0.0, 0.0);\n  \n  // Act\n  \n  // Assert\n  ASSERT_THROW(a / b, std::runtime_error);\n}","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eTEST\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ComplexNumberTest, TestComplexDivisionWithNaN) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Arrange\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e2.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eb\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Act\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Assert\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_THROW\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(a / b, \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::runtime_error);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":10,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="TEST(ComplexNumberTest, TestComplexDivisionWithNaN) {
  // Arrange
  ComplexNumber a(1.0, -2.0);
  ComplexNumber b(0.0, 0.0);
  
  // Act
  
  // Assert
  ASSERT_THROW(a / b, std::runtime_error);
}" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">TEST</span><span style="color: #D4D4D4">(ComplexNumberTest, TestComplexDivisionWithNaN) {</span></span>
<span class="line"><span style="color: #6A9955">  // Arrange</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.0</span><span style="color: #D4D4D4">, -</span><span style="color: #B5CEA8">2.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">b</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">0.0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">0.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Act</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Assert</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_THROW</span><span style="color: #D4D4D4">(a / b, </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::runtime_error);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>I did not mention that for the test before, but we can see here again on line 1 that we are still in the <code>ComplexNumberTest</code> group, and the new test here is called <code>TestComplexDivisionWithNaN</code>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We see that the act section now is empty. The reason is that we cannot store an exception that was thrown in a variable and then check that this variable stores an exception, that just isn't how C++ works. But, it shows an important point; we deviate here from here from the AAA pattern. It is more important to have a clean code design than trying to awkward production code just to fit the test. It is better to deviate in the test code for a cleaner design than the other way around.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Thus, we can see that the actual act section has been moved into the assert section and we are testing that a complex division by zero will throw an exception immediately. </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>These are all changes. By now, hopefully, the switch from our bespoke tests that we wrote in the previous article to gtest is clear and you get an idea of how to use gtest. We will see it in more action in the next articles, but this article serves as a gentle introduction. Testing with gtest does not get much more complicated unless you want it to be. What we have covered in this article covers most, if not all, of the use cases you will have for it.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-updated-complex-number-class">Updated complex number class</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>We saw that we added some additional functionality to our complex number class, so I have provided the updated implementation below. I will point out underneath the code what has changed, but these changes are minimal.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"#pragma once\n\n#include \u0026lt;iostream\u003e\n#include \u0026lt;cmath\u003e\n#include \u0026lt;stdexcept\u003e\n#include \u0026lt;limits\u003e\n\nclass ComplexNumber {\npublic:\n\tComplexNumber(double real, double imaginary) : _real(real), _imaginary(imaginary) {\n    isNan(real, imaginary);\n  }\n\n\t~ComplexNumber() = default;\n\n\tdouble Re() const { return _real; }\n\tdouble Im() const { return _imaginary; }\n  void setRe(double real) { _real = real; }\n  void setIm(double imaginary) { _imaginary = imaginary; }\n\n  void conjugate() { _imaginary *= -1.0; }\n  double magnitude() const { return std::sqrt(std::pow(_real, 2) + std::pow(_imaginary, 2)); }\n\t\n\tComplexNumber operator+(const ComplexNumber \u0026amp;other) {\n    isNan(_real, _imaginary);\n    isNan(other._real, other._imaginary);\n\t\t\n    ComplexNumber c(0, 0);\n\t\tc._real = _real + other._real;\n\t\tc._imaginary = _imaginary + other._imaginary;\n\t\treturn c;\n\t}\n\n  ComplexNumber operator-(const ComplexNumber \u0026amp;other) {\n    isNan(_real, _imaginary);\n    isNan(other._real, other._imaginary);\n\t\t\n    ComplexNumber c(0, 0);\n    c._real = _real - other._real;\n    c._imaginary = _imaginary - other._imaginary;\n    return c;\n  }\n\n  ComplexNumber operator*(const ComplexNumber \u0026amp;other) {\n    isNan(_real, _imaginary);\n    isNan(other._real, other._imaginary);\n    \n    ComplexNumber c(0, 0);\n    c._real = _real * other._real - _imaginary * other._imaginary;\n    c._imaginary = _real * other._imaginary + _imaginary * other._real;\n    return c;\n  }\n\n  ComplexNumber operator/(const ComplexNumber \u0026amp;other) {\n    isNan(_real, _imaginary);\n    isNan(other._real, other._imaginary);\n\n    double denominator = other._real * other._real + other._imaginary * other._imaginary;\n    if (std::abs(denominator) \u0026lt; std::numeric_limits\u0026lt;double\u003e::epsilon())\n      throw std::runtime_error(\u0022Complex number division by zero\u0022);\n    \n    ComplexNumber c(0, 0);\n    c._real = (_real * other._real + _imaginary * other._imaginary) / denominator;\n    c._imaginary = (_imaginary * other._real - _real * other._imaginary) / denominator;\n    return c;\n  }\n\n  friend std::ostream \u0026amp;operator\u0026lt;\u0026lt;(std::ostream \u0026amp;os, const ComplexNumber \u0026amp;c) {\n    os \u0026lt;\u0026lt; \u0022(\u0022 \u0026lt;\u0026lt; c._real \u0026lt;\u0026lt; \u0022, \u0022 \u0026lt;\u0026lt; c._imaginary \u0026lt;\u0026lt; \u0022)\u0022;\n    return os;\n  }\n\nprivate:\n  void isNan(double real, double imaginary) const {\n  if (std::isnan(real) || std::isnan(imaginary))\n    throw std::runtime_error(\u0022Complex number is NaN\u0022);\n}\n\t\nprivate:\n\tdouble _real;\n\tdouble _imaginary;\n};","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#pragma\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eonce\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;cmath\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;stdexcept\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003e#include\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026lt;limits\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eclass\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003epublic:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ereal\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eimaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) : \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(real), \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(imaginary) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(real, imaginary);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003e~ComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() = \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edefault\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e { \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e _real; }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eIm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e { \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e _imaginary; }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003evoid\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003esetRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ereal\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) { _real = real; }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003evoid\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003esetIm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eimaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) { _imaginary = imaginary; }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003evoid\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003econjugate\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() { _imaginary *= -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e; }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003emagnitude\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e() \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e { \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003esqrt\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003epow\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(_real, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) + \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003epow\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(_imaginary, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e)); }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator+\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(_real, _imaginary);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\t\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\t\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = _real + \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\t\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = _imaginary + \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\t\u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e c;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator-\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(_real, _imaginary);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\t\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = _real - \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = _imaginary - \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e c;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator*\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(_real, _imaginary);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = _real * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e - _imaginary * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = _real * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e + _imaginary * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e c;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator/\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(_real, _imaginary);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e denominator = \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e + \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e (\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eabs\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(denominator) \u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003enumeric_limits\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u0026gt;::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eepsilon\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e      \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ethrow\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eruntime_error\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Complex number division by zero\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = (_real * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e + _imaginary * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) / denominator;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e = (_imaginary * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e - _real * \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eother\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) / denominator;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e c;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003efriend\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eostream\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eoperator\u0026lt;\u0026lt;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eostream\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eos\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003eComplexNumber\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    os \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;(\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_real\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;, \u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003e_imaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u0026lt;\u0026lt; \u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;)\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e os;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eprivate:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003evoid\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisNan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ereal\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003eimaginary\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e) \u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003econst\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e (\u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisnan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(real) || \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eisnan\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(imaginary))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #C586C0\u0022\u003ethrow\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #4EC9B0\u0022\u003estd\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e::\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eruntime_error\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #CE9178\u0022\u003e\u0026quot;Complex number is NaN\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003eprivate:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e _real;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\t\u003c/span\u003e\u003cspan style=\u0022color: #569CD6\u0022\u003edouble\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e _imaginary;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e};\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":82,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="#pragma once

#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;

class ComplexNumber {
public:
	ComplexNumber(double real, double imaginary) : _real(real), _imaginary(imaginary) {
    isNan(real, imaginary);
  }

	~ComplexNumber() = default;

	double Re() const { return _real; }
	double Im() const { return _imaginary; }
  void setRe(double real) { _real = real; }
  void setIm(double imaginary) { _imaginary = imaginary; }

  void conjugate() { _imaginary *= -1.0; }
  double magnitude() const { return std::sqrt(std::pow(_real, 2) + std::pow(_imaginary, 2)); }
	
	ComplexNumber operator+(const ComplexNumber &amp;other) {
    isNan(_real, _imaginary);
    isNan(other._real, other._imaginary);
		
    ComplexNumber c(0, 0);
		c._real = _real + other._real;
		c._imaginary = _imaginary + other._imaginary;
		return c;
	}

  ComplexNumber operator-(const ComplexNumber &amp;other) {
    isNan(_real, _imaginary);
    isNan(other._real, other._imaginary);
		
    ComplexNumber c(0, 0);
    c._real = _real - other._real;
    c._imaginary = _imaginary - other._imaginary;
    return c;
  }

  ComplexNumber operator*(const ComplexNumber &amp;other) {
    isNan(_real, _imaginary);
    isNan(other._real, other._imaginary);
    
    ComplexNumber c(0, 0);
    c._real = _real * other._real - _imaginary * other._imaginary;
    c._imaginary = _real * other._imaginary + _imaginary * other._real;
    return c;
  }

  ComplexNumber operator/(const ComplexNumber &amp;other) {
    isNan(_real, _imaginary);
    isNan(other._real, other._imaginary);

    double denominator = other._real * other._real + other._imaginary * other._imaginary;
    if (std::abs(denominator) &lt; std::numeric_limits&lt;double&gt;::epsilon())
      throw std::runtime_error(&quot;Complex number division by zero&quot;);
    
    ComplexNumber c(0, 0);
    c._real = (_real * other._real + _imaginary * other._imaginary) / denominator;
    c._imaginary = (_imaginary * other._real - _real * other._imaginary) / denominator;
    return c;
  }

  friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, const ComplexNumber &amp;c) {
    os &lt;&lt; &quot;(&quot; &lt;&lt; c._real &lt;&lt; &quot;, &quot; &lt;&lt; c._imaginary &lt;&lt; &quot;)&quot;;
    return os;
  }

private:
  void isNan(double real, double imaginary) const {
  if (std::isnan(real) || std::isnan(imaginary))
    throw std::runtime_error(&quot;Complex number is NaN&quot;);
}
	
private:
	double _real;
	double _imaginary;
};" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #C586C0">#pragma</span><span style="color: #569CD6"> </span><span style="color: #9CDCFE">once</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;iostream&gt;</span></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;cmath&gt;</span></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;stdexcept&gt;</span></span>
<span class="line"><span style="color: #C586C0">#include</span><span style="color: #569CD6"> </span><span style="color: #CE9178">&lt;limits&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">class</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #569CD6">public:</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #DCDCAA">ComplexNumber</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">real</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">imaginary</span><span style="color: #D4D4D4">) : </span><span style="color: #DCDCAA">_real</span><span style="color: #D4D4D4">(real), </span><span style="color: #DCDCAA">_imaginary</span><span style="color: #D4D4D4">(imaginary) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(real, imaginary);</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #DCDCAA">~ComplexNumber</span><span style="color: #D4D4D4">() = </span><span style="color: #569CD6">default</span><span style="color: #D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">Re</span><span style="color: #D4D4D4">() </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> { </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> _real; }</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">Im</span><span style="color: #D4D4D4">() </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> { </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> _imaginary; }</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">void</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">setRe</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">real</span><span style="color: #D4D4D4">) { _real = real; }</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">void</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">setIm</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">imaginary</span><span style="color: #D4D4D4">) { _imaginary = imaginary; }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">void</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">conjugate</span><span style="color: #D4D4D4">() { _imaginary *= -</span><span style="color: #B5CEA8">1.0</span><span style="color: #D4D4D4">; }</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">magnitude</span><span style="color: #D4D4D4">() </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> { </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">sqrt</span><span style="color: #D4D4D4">(</span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">pow</span><span style="color: #D4D4D4">(_real, </span><span style="color: #B5CEA8">2</span><span style="color: #D4D4D4">) + </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">pow</span><span style="color: #D4D4D4">(_imaginary, </span><span style="color: #B5CEA8">2</span><span style="color: #D4D4D4">)); }</span></span>
<span class="line"><span style="color: #D4D4D4">	</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">operator+</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(_real, _imaginary);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">		</span></span>
<span class="line"><span style="color: #D4D4D4">    ComplexNumber </span><span style="color: #DCDCAA">c</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">		</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> = _real + </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">		</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4"> = _imaginary + </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">		</span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> c;</span></span>
<span class="line"><span style="color: #D4D4D4">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">operator-</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(_real, _imaginary);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">		</span></span>
<span class="line"><span style="color: #D4D4D4">    ComplexNumber </span><span style="color: #DCDCAA">c</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> = _real - </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4"> = _imaginary - </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> c;</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">operator*</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(_real, _imaginary);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span></span>
<span class="line"><span style="color: #D4D4D4">    ComplexNumber </span><span style="color: #DCDCAA">c</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> = _real * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> - _imaginary * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4"> = _real * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4"> + _imaginary * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> c;</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">operator/</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(_real, _imaginary);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> denominator = </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> + </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4"> * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (</span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">abs</span><span style="color: #D4D4D4">(denominator) &lt; </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #4EC9B0">numeric_limits</span><span style="color: #D4D4D4">&lt;</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4">&gt;::</span><span style="color: #DCDCAA">epsilon</span><span style="color: #D4D4D4">())</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #C586C0">throw</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">runtime_error</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&quot;Complex number division by zero&quot;</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span></span>
<span class="line"><span style="color: #D4D4D4">    ComplexNumber </span><span style="color: #DCDCAA">c</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> = (_real * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> + _imaginary * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">) / denominator;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4"> = (_imaginary * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> - _real * </span><span style="color: #9CDCFE">other</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4">) / denominator;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> c;</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">friend</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #4EC9B0">ostream</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #C586C0">operator&lt;&lt;</span><span style="color: #D4D4D4">(</span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #4EC9B0">ostream</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">os</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ComplexNumber</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">&amp;</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">    os &lt;&lt; </span><span style="color: #CE9178">&quot;(&quot;</span><span style="color: #D4D4D4"> &lt;&lt; </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_real</span><span style="color: #D4D4D4"> &lt;&lt; </span><span style="color: #CE9178">&quot;, &quot;</span><span style="color: #D4D4D4"> &lt;&lt; </span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">_imaginary</span><span style="color: #D4D4D4"> &lt;&lt; </span><span style="color: #CE9178">&quot;)&quot;</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> os;</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">private:</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">void</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">isNan</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">real</span><span style="color: #D4D4D4">, </span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">imaginary</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (</span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">isnan</span><span style="color: #D4D4D4">(real) || </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">isnan</span><span style="color: #D4D4D4">(imaginary))</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">throw</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">std</span><span style="color: #D4D4D4">::</span><span style="color: #DCDCAA">runtime_error</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&quot;Complex number is NaN&quot;</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"><span style="color: #D4D4D4">	</span></span>
<span class="line"><span style="color: #569CD6">private:</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> _real;</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #569CD6">double</span><span style="color: #D4D4D4"> _imaginary;</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-checking-for-nan">Checking for NaN</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The first and most influential change that we are going to implement is the checking against NaN (not a number). We have provided a new private function for that on lines 74-77, which checks that both real and imaginary parts are real numbers. The function <code>std::isnan()</code> is located within the <code>cmath</code> header which we already included before.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>With this function available, we can now add it in front of all arithmetic operators where we add, subtract, multiply and divide numbers to ensure that we only continue if numbers are real. We also put a check in the constructor so that we are not even constructing a complex number object if the real or imaginary parts are corrupted to begin with.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-new-setre-and-setim-functions">New setRe() and setIm() functions</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The new tests require us to change the real and imaginary parts before we continue. This is to bypass the check in the constructor for NaN. If we construct an object with NaN, then we always throw an error, so we would never be able to test the error checking for the operators for addition, subtraction, multiplication, and division. So we construct a complex number with real values and only then set one of them to NaN with either the <code>setRe()</code> or <code>setIm()</code> setter, which are given on lines 18 and 19, respectively. </p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-catching-division-by-zero">Catching division by zero</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The new <code>operator/()</code> function on lines 54-66 has now been extended to not only check for NaNs (lines 55-56) but also to catch a division by zero on lines 58-60. We calculate the value for the denominator of the fraction first, and if that is less than the smallest number we can represent (<code>epsilon</code>, a value close to zero), then we say that the denominator is zero and we have a division by zero situation and throw and throw a runtime error.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>If you have read up on ULPs above, when we talked about floating point number comparisons, then we can also say that <code>epsilon</code> is the distance between zero and the next positive floating point value we can represent, or one ULP to the right. If you can't be bothered about ULPs, then just see <code>epsilon</code> as the smallest number we can represent with a <code>double</code> before we lose precision due to round-off errors.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":3} -->
<h3 class="wp-block-heading" id="aioseo-inspecting-the-output">Inspecting the output</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Now that we have generated all of these tests, it is time to inspect the test runner. The test runner is part of any xUnit testing framework and it is responsible for collecting all of your tests and then executing them. Running the tests is as simple as running the executable we have generated. If you do that, you will get the output as shown below, with some nicer colours.</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"[==========] Running 8 tests from 1 test suite.\n[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] Global test environment set-up.\n[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] 8 tests from ComplexNumberTest\n[ RUN      ] ComplexNumberTest.TestComplexMagnitude\n[       OK ] ComplexNumberTest.TestComplexMagnitude (0 ms)\n[ RUN      ] ComplexNumberTest.TestComplexConjugate\n[       OK ] ComplexNumberTest.TestComplexConjugate (0 ms)\n[ RUN      ] ComplexNumberTest.TestComplexNumberWithNaN\n[       OK ] ComplexNumberTest.TestComplexNumberWithNaN (0 ms)\n[ RUN      ] ComplexNumberTest.TestComplexAddition\n[       OK ] ComplexNumberTest.TestComplexAddition (0 ms)\n[ RUN      ] ComplexNumberTest.TestComplexSubtraction\n[       OK ] ComplexNumberTest.TestComplexSubtraction (0 ms)\n[ RUN      ] ComplexNumberTest.TestComplexMultiplication\n[       OK ] ComplexNumberTest.TestComplexMultiplication (0 ms)\n[ RUN      ] ComplexNumberTest.TestComplexDivision\n[       OK ] ComplexNumberTest.TestComplexDivision (0 ms)\n[ RUN      ] ComplexNumberTest.TestComplexDivisionWithNaN\n[       OK ] ComplexNumberTest.TestComplexDivisionWithNaN (0 ms)\n[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] 8 tests from ComplexNumberTest (8 ms total)\n\n[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] Global test environment tear-down\n[==========] 8 tests from 1 test suite ran. (12 ms total)\n[  PASSED  ] 8 tests.","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[==========] Running 8 tests from 1 test suite.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] Global test environment set-up.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] 8 tests from ComplexNumberTest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexMagnitude\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexMagnitude (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexConjugate\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexConjugate (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexNumberWithNaN\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexNumberWithNaN (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexAddition\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexAddition (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexSubtraction\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexSubtraction (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexMultiplication\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexMultiplication (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexDivision\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexDivision (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexDivisionWithNaN\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexDivisionWithNaN (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] 8 tests from ComplexNumberTest (8 ms total)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] Global test environment tear-down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[==========] 8 tests from 1 test suite ran. (12 ms total)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[  PASSED  ] 8 tests.\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"plaintext","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":24,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="[==========] Running 8 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 8 tests from ComplexNumberTest
[ RUN      ] ComplexNumberTest.TestComplexMagnitude
[       OK ] ComplexNumberTest.TestComplexMagnitude (0 ms)
[ RUN      ] ComplexNumberTest.TestComplexConjugate
[       OK ] ComplexNumberTest.TestComplexConjugate (0 ms)
[ RUN      ] ComplexNumberTest.TestComplexNumberWithNaN
[       OK ] ComplexNumberTest.TestComplexNumberWithNaN (0 ms)
[ RUN      ] ComplexNumberTest.TestComplexAddition
[       OK ] ComplexNumberTest.TestComplexAddition (0 ms)
[ RUN      ] ComplexNumberTest.TestComplexSubtraction
[       OK ] ComplexNumberTest.TestComplexSubtraction (0 ms)
[ RUN      ] ComplexNumberTest.TestComplexMultiplication
[       OK ] ComplexNumberTest.TestComplexMultiplication (0 ms)
[ RUN      ] ComplexNumberTest.TestComplexDivision
[       OK ] ComplexNumberTest.TestComplexDivision (0 ms)
[ RUN      ] ComplexNumberTest.TestComplexDivisionWithNaN
[       OK ] ComplexNumberTest.TestComplexDivisionWithNaN (0 ms)
[----------] 8 tests from ComplexNumberTest (8 ms total)

[----------] Global test environment tear-down
[==========] 8 tests from 1 test suite ran. (12 ms total)
[  PASSED  ] 8 tests." style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">[==========] Running 8 tests from 1 test suite.</span></span>
<span class="line"><span style="color: #D4D4D4">[----------] Global test environment set-up.</span></span>
<span class="line"><span style="color: #D4D4D4">[----------] 8 tests from ComplexNumberTest</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexMagnitude</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexMagnitude (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexConjugate</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexConjugate (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexNumberWithNaN</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexNumberWithNaN (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexAddition</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexAddition (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexSubtraction</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexSubtraction (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexMultiplication</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexMultiplication (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexDivision</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexDivision (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexDivisionWithNaN</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexDivisionWithNaN (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[----------] 8 tests from ComplexNumberTest (8 ms total)</span></span>
<span class="line"><span style="color: #D4D4D4"></span></span>
<span class="line"><span style="color: #D4D4D4">[----------] Global test environment tear-down</span></span>
<span class="line"><span style="color: #D4D4D4">[==========] 8 tests from 1 test suite ran. (12 ms total)</span></span>
<span class="line"><span style="color: #D4D4D4">[  PASSED  ] 8 tests.</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>Let's start from the bottom, we see on line 24 that a total of 8 tests were performed and the overall status is that all tests passed. We can see on the line before that all tests were performed in <code>12ms</code>. This is good, as we want to add hundreds, if not thousands of unit tests to larger projects and we want to be able to catch any possible regression (bug) early on. If we just have to wait a few seconds, at most, then we can run them often. If they take minutes to run, we run them less frequently and regressions will slip through and need to be fixed later.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>On lines 4-19, we see that we are running all the 8 different tests. We get two lines per test, the first one will indicate that we are running a test, which is identified by the test group and name that we specified for each test (the two strings that go into the <code>TEST()</code> function, and the second one will return either OK or fail, depending on the test outcome. It will also print the time it took to perform each test, and we can see that they are close to <code>0ms</code>.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4 class="wp-block-heading" id="aioseo-making-the-tests-fail">Making the tests fail</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>In our case, all tests pass, because I made sure they do, but let's inspect what happens if tests are not passing. After all, this is why we want to use gtest. We want to write tests that fail initially and then start to provide an implementation that will make the test pass. That is the heart of test-driven development and so we need to understand what a failing test looks like as well.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>For that, let's go back to our complex addition test and make the following modifications</p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"TEST(ComplexNumberTest, TestComplexAddition) {\n  // Arrange\n  ComplexNumber a(1.2, -0.3);\n  ComplexNumber b(1.8, 5.3);\n  \n  // Act\n  ComplexNumber c = a + b;\n  \n  // Assert\n  ASSERT_DOUBLE_EQ(c.Re(), 3.1);\n  ASSERT_DOUBLE_EQ(c.Im(), 5.0);\n}","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eTEST\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(ComplexNumberTest, TestComplexAddition) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Arrange\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003ea\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.2\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, -\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e0.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eb\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e1.8\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.3\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Act\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  ComplexNumber c = a + b;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #6A9955\u0022\u003e  // Assert\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eRe\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e3.1\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  \u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eASSERT_DOUBLE_EQ\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #9CDCFE\u0022\u003ec\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #DCDCAA\u0022\u003eIm\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e(), \u003c/span\u003e\u003cspan style=\u0022color: #B5CEA8\u0022\u003e5.0\u003c/span\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"cpp","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","seeMoreType":"","seeMoreString":"","seeMoreTransition":false,"highestLineNumber":12,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="TEST(ComplexNumberTest, TestComplexAddition) {
  // Arrange
  ComplexNumber a(1.2, -0.3);
  ComplexNumber b(1.8, 5.3);
  
  // Act
  ComplexNumber c = a + b;
  
  // Assert
  ASSERT_DOUBLE_EQ(c.Re(), 3.1);
  ASSERT_DOUBLE_EQ(c.Im(), 5.0);
}" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">TEST</span><span style="color: #D4D4D4">(ComplexNumberTest, TestComplexAddition) {</span></span>
<span class="line"><span style="color: #6A9955">  // Arrange</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">a</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.2</span><span style="color: #D4D4D4">, -</span><span style="color: #B5CEA8">0.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber </span><span style="color: #DCDCAA">b</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">1.8</span><span style="color: #D4D4D4">, </span><span style="color: #B5CEA8">5.3</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Act</span></span>
<span class="line"><span style="color: #D4D4D4">  ComplexNumber c = a + b;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #6A9955">  // Assert</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Re</span><span style="color: #D4D4D4">(), </span><span style="color: #B5CEA8">3.1</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">ASSERT_DOUBLE_EQ</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">c</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">Im</span><span style="color: #D4D4D4">(), </span><span style="color: #B5CEA8">5.0</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>I have changed line 10 here, where we are expecting the real part to be equal to <code>3.1</code>, but in reality it is <code>3.0</code>. So this test should now fail, let's see what the output is from the test runner in this case. </p>
<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"[==========] Running 8 tests from 1 test suite.\n[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] Global test environment set-up.\n[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] 8 tests from ComplexNumberTest\n[ RUN      ] ComplexNumberTest.TestComplexMagnitude\n[       OK ] ComplexNumberTest.TestComplexMagnitude (0 ms)\n[ RUN      ] ComplexNumberTest.TestComplexConjugate\n[       OK ] ComplexNumberTest.TestComplexConjugate (0 ms)\n[ RUN      ] ComplexNumberTest.TestComplexNumberWithNaN\n[       OK ] ComplexNumberTest.TestComplexNumberWithNaN (0 ms)\n[ RUN      ] ComplexNumberTest.TestComplexAddition\n.\\tests\\unit\\testComplexNumbers.cpp(54): error: Expected equality of these values:\n  c.Re()\n    Which is: 3\n  3.1\n    Which is: 3.1000000000000001\n\n[  FAILED  ] ComplexNumberTest.TestComplexAddition (0 ms)\n[ RUN      ] ComplexNumberTest.TestComplexSubtraction\n[       OK ] ComplexNumberTest.TestComplexSubtraction (0 ms)\n[ RUN      ] ComplexNumberTest.TestComplexMultiplication\n[       OK ] ComplexNumberTest.TestComplexMultiplication (0 ms)\n[ RUN      ] ComplexNumberTest.TestComplexDivision\n[       OK ] ComplexNumberTest.TestComplexDivision (0 ms)\n[ RUN      ] ComplexNumberTest.TestComplexDivisionWithNaN\n[       OK ] ComplexNumberTest.TestComplexDivisionWithNaN (0 ms)\n[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] 8 tests from ComplexNumberTest (16 ms total)\n\n[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] Global test environment tear-down\n[==========] 8 tests from 1 test suite ran. (20 ms total)\n[  PASSED  ] 7 tests.\n[  FAILED  ] 1 test, listed below:\n[  FAILED  ] ComplexNumberTest.TestComplexAddition","codeHTML":"\u003cpre class=\u0022shiki dark-plus\u0022 style=\u0022background-color: #1E1E1E\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[==========] Running 8 tests from 1 test suite.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] Global test environment set-up.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] 8 tests from ComplexNumberTest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexMagnitude\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexMagnitude (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexConjugate\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexConjugate (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexNumberWithNaN\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexNumberWithNaN (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexAddition\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e.\\tests\\unit\\testComplexNumbers.cpp(54): error: Expected equality of these values:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  c.Re()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    Which is: 3\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e  3.1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e    Which is: 3.1000000000000001\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[  FAILED  ] ComplexNumberTest.TestComplexAddition (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexSubtraction\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexSubtraction (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexMultiplication\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexMultiplication (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexDivision\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexDivision (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[ RUN      ] ComplexNumberTest.TestComplexDivisionWithNaN\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[       OK ] ComplexNumberTest.TestComplexDivisionWithNaN (0 ms)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] 8 tests from ComplexNumberTest (16 ms total)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d] Global test environment tear-down\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[==========] 8 tests from 1 test suite ran. (20 ms total)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[  PASSED  ] 7 tests.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[  FAILED  ] 1 test, listed below:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D4D4D4\u0022\u003e[  FAILED  ] ComplexNumberTest.TestComplexAddition\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"plaintext","theme":"dark-plus","bgColor":"#1E1E1E","textColor":"#D4D4D4","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":true,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highestLineNumber":32,"highlightingHover":false,"lineHighlightColor":"rgba(234, 191, 191, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro cbp-has-line-numbers" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;--cbp-line-number-color:#D4D4D4;--cbp-line-number-width:calc(2 * 0.6 * .875rem);line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="[==========] Running 8 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 8 tests from ComplexNumberTest
[ RUN      ] ComplexNumberTest.TestComplexMagnitude
[       OK ] ComplexNumberTest.TestComplexMagnitude (0 ms)
[ RUN      ] ComplexNumberTest.TestComplexConjugate
[       OK ] ComplexNumberTest.TestComplexConjugate (0 ms)
[ RUN      ] ComplexNumberTest.TestComplexNumberWithNaN
[       OK ] ComplexNumberTest.TestComplexNumberWithNaN (0 ms)
[ RUN      ] ComplexNumberTest.TestComplexAddition
.\tests\unit\testComplexNumbers.cpp(54): error: Expected equality of these values:
  c.Re()
    Which is: 3
  3.1
    Which is: 3.1000000000000001

[  FAILED  ] ComplexNumberTest.TestComplexAddition (0 ms)
[ RUN      ] ComplexNumberTest.TestComplexSubtraction
[       OK ] ComplexNumberTest.TestComplexSubtraction (0 ms)
[ RUN      ] ComplexNumberTest.TestComplexMultiplication
[       OK ] ComplexNumberTest.TestComplexMultiplication (0 ms)
[ RUN      ] ComplexNumberTest.TestComplexDivision
[       OK ] ComplexNumberTest.TestComplexDivision (0 ms)
[ RUN      ] ComplexNumberTest.TestComplexDivisionWithNaN
[       OK ] ComplexNumberTest.TestComplexDivisionWithNaN (0 ms)
[----------] 8 tests from ComplexNumberTest (16 ms total)

[----------] Global test environment tear-down
[==========] 8 tests from 1 test suite ran. (20 ms total)
[  PASSED  ] 7 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] ComplexNumberTest.TestComplexAddition" style="color:#D4D4D4;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki dark-plus" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">[==========] Running 8 tests from 1 test suite.</span></span>
<span class="line"><span style="color: #D4D4D4">[----------] Global test environment set-up.</span></span>
<span class="line"><span style="color: #D4D4D4">[----------] 8 tests from ComplexNumberTest</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexMagnitude</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexMagnitude (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexConjugate</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexConjugate (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexNumberWithNaN</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexNumberWithNaN (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexAddition</span></span>
<span class="line"><span style="color: #D4D4D4">.\tests\unit\testComplexNumbers.cpp(54): error: Expected equality of these values:</span></span>
<span class="line"><span style="color: #D4D4D4">  c.Re()</span></span>
<span class="line"><span style="color: #D4D4D4">    Which is: 3</span></span>
<span class="line"><span style="color: #D4D4D4">  3.1</span></span>
<span class="line"><span style="color: #D4D4D4">    Which is: 3.1000000000000001</span></span>
<span class="line"><span style="color: #D4D4D4"></span></span>
<span class="line"><span style="color: #D4D4D4">[  FAILED  ] ComplexNumberTest.TestComplexAddition (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexSubtraction</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexSubtraction (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexMultiplication</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexMultiplication (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexDivision</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexDivision (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[ RUN      ] ComplexNumberTest.TestComplexDivisionWithNaN</span></span>
<span class="line"><span style="color: #D4D4D4">[       OK ] ComplexNumberTest.TestComplexDivisionWithNaN (0 ms)</span></span>
<span class="line"><span style="color: #D4D4D4">[----------] 8 tests from ComplexNumberTest (16 ms total)</span></span>
<span class="line"><span style="color: #D4D4D4"></span></span>
<span class="line"><span style="color: #D4D4D4">[----------] Global test environment tear-down</span></span>
<span class="line"><span style="color: #D4D4D4">[==========] 8 tests from 1 test suite ran. (20 ms total)</span></span>
<span class="line"><span style="color: #D4D4D4">[  PASSED  ] 7 tests.</span></span>
<span class="line"><span style="color: #D4D4D4">[  FAILED  ] 1 test, listed below:</span></span>
<span class="line"><span style="color: #D4D4D4">[  FAILED  ] ComplexNumberTest.TestComplexAddition</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->

<!-- wp:paragraph -->
<p>We see at the bottom of our console output that now only 7 tests pass while 1 test failed. So overall, our test suite failed. But gtest is very verbose and tells us exactly what went wrong. We run the complex addition test on line 10 and get a message that on line 54 within the <code>testComplexNumbers.cpp</code> file, we expect <code>c.Re()</code> and <code>3.1</code> to be equal. We are also getting the values of these two expressions, for <code>c.Re()</code> the value is <code>3.0</code>.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We can use this information to now check which value is unexpected. In our case, we now the second argument is wrong but typically it is the other way around, i.e. the expected value is correct but the computed one is wrong. This tells us that our implementation is wrong and so we go back to our implementation and debug it until we have found the error and the test is passing. Then we move on to the next failing test, or, if everything is working, the next feature we want to implement.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading" id="aioseo-summary">Summary</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>In this article, we departed from our own testing implementation and we saw that Google's gtest is a pretty well-rounded testing framework to help us catch regressions (bugs) early on in the development process. Even if we just scratched the surface of what gtest can do, what we saw is what you will use most of the time. If you want to start using gtest to test your own CFD solver code, then you have already most of the knowledge you need. It doesn't get much more complicated than that.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>In the next articles, we will look at a few more examples of how to integrate gtest into more complex test scenarios. This will flush out some more use cases we may have and show how to use some of the more advanced features of gtest. These will help us to clean up large tests that require a lot of preparation and repeated code set-up.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>From now on, I would encourage you to start using gtest (or any other testing framework) for any projects that go beyond a few hundred lines of code. You will lose some time for the test setup and getting gtest compiled, but you will save time in the long run. Give it a try and see it for yourself, you will feel a lot more empowered and confident to make changes to code sections that you have developed earlier. If you break the code, you know it will be caught by your tests, so cleaning up older code sections becomes a rewarding task.  </p>
<!-- /wp:paragraph -->